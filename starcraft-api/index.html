<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 4.24.5"/><style data-href="/styles.f7b0302c8427f1a04772.css" data-identity="gatsby-global-css">@media (prefers-color-scheme:light){code[class*=language-],pre[class*=language-]{background:#fafafa;color:#383a42;direction:ltr;font-family:Fira Code,Fira Mono,Menlo,Consolas,DejaVu Sans Mono,monospace;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;text-align:left;white-space:pre;word-break:normal;word-spacing:normal}code[class*=language-] ::-moz-selection,code[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection{background:#e5e5e6;color:inherit}code[class*=language-] ::selection,code[class*=language-]::selection,pre[class*=language-] ::selection{background:#e5e5e6;color:inherit}pre[class*=language-]{border-radius:.3em;margin:.5em 0;overflow:auto;padding:1em}:not(pre)>code[class*=language-]{border-radius:.3em;padding:.2em .3em;white-space:normal}.token.cdata,.token.comment,.token.prolog{color:#a0a1a7}.token.doctype,.token.entity,.token.punctuation{color:#383a42}.token.atrule,.token.attr-name,.token.boolean,.token.class-name,.token.constant,.token.number{color:#b76b01}.token.keyword{color:#a626a4}.token.deleted,.token.important,.token.property,.token.symbol,.token.tag{color:#e45649}.token.attr-value,.token.attr-value>.token.punctuation,.token.builtin,.token.char,.token.inserted,.token.regex,.token.selector,.token.string{color:#50a14f}.token.function,.token.operator,.token.variable{color:#4078f2}.token.url{color:#0184bc}.token.attr-value>.token.punctuation.attr-equals,.token.special-attr>.token.attr-value>.token.value.css{color:#383a42}.language-css .token.selector{color:#e45649}.language-css .token.property{color:#383a42}.language-css .token.function,.language-css .token.url>.token.function{color:#0184bc}.language-css .token.url>.token.string.url{color:#50a14f}.language-css .token.atrule .token.rule,.language-css .token.important,.language-javascript .token.operator{color:#a626a4}.language-javascript .token.template-string>.token.interpolation>.token.interpolation-punctuation.punctuation{color:#ca1243}.language-json .token.operator{color:#383a42}.language-json .token.null.keyword{color:#b76b01}.language-markdown .token.url,.language-markdown .token.url-reference.url>.token.string,.language-markdown .token.url>.token.operator{color:#383a42}.language-markdown .token.url>.token.content{color:#4078f2}.language-markdown .token.url-reference.url,.language-markdown .token.url>.token.url{color:#0184bc}.language-markdown .token.blockquote.punctuation,.language-markdown .token.hr.punctuation{color:#a0a1a7;font-style:italic}.language-markdown .token.code-snippet{color:#50a14f}.language-markdown .token.bold .token.content{color:#b76b01}.language-markdown .token.italic .token.content{color:#a626a4}.language-markdown .token.list.punctuation,.language-markdown .token.strike .token.content,.language-markdown .token.strike .token.punctuation,.language-markdown .token.title.important>.token.punctuation{color:#e45649}.token.bold{font-weight:700}.token.comment,.token.italic{font-style:italic}.token.entity{cursor:help}.token.namespace{opacity:.8}.token.token.cr:before,.token.token.lf:before,.token.token.space:before,.token.token.tab:not(:empty):before{color:rgba(56,58,66,.2)}div.code-toolbar>.toolbar.toolbar>.toolbar-item{margin-right:.4em}div.code-toolbar>.toolbar.toolbar>.toolbar-item>a,div.code-toolbar>.toolbar.toolbar>.toolbar-item>button,div.code-toolbar>.toolbar.toolbar>.toolbar-item>span{background:#e5e5e6;border-radius:.3em;color:#696c77;padding:.1em .4em}div.code-toolbar>.toolbar.toolbar>.toolbar-item>a:focus,div.code-toolbar>.toolbar.toolbar>.toolbar-item>a:hover,div.code-toolbar>.toolbar.toolbar>.toolbar-item>button:focus,div.code-toolbar>.toolbar.toolbar>.toolbar-item>button:hover,div.code-toolbar>.toolbar.toolbar>.toolbar-item>span:focus,div.code-toolbar>.toolbar.toolbar>.toolbar-item>span:hover{background:#c6c7c7;color:#383a42}.line-highlight.line-highlight{background:rgba(56,58,66,.05)}.line-highlight.line-highlight:before,.line-highlight.line-highlight[data-end]:after{background:#e5e5e6;border-radius:.3em;box-shadow:0 2px 0 0 rgba(0,0,0,.2);color:#383a42;padding:.1em .6em}pre[id].linkable-line-numbers.linkable-line-numbers span.line-numbers-rows>span:hover:before{background-color:rgba(56,58,66,.05)}.command-line .command-line-prompt,.line-numbers.line-numbers .line-numbers-rows{border-right-color:rgba(56,58,66,.2)}.command-line .command-line-prompt>span:before,.line-numbers .line-numbers-rows>span:before{color:#9d9d9f}.rainbow-braces .token.token.punctuation.brace-level-1,.rainbow-braces .token.token.punctuation.brace-level-5,.rainbow-braces .token.token.punctuation.brace-level-9{color:#e45649}.rainbow-braces .token.token.punctuation.brace-level-10,.rainbow-braces .token.token.punctuation.brace-level-2,.rainbow-braces .token.token.punctuation.brace-level-6{color:#50a14f}.rainbow-braces .token.token.punctuation.brace-level-11,.rainbow-braces .token.token.punctuation.brace-level-3,.rainbow-braces .token.token.punctuation.brace-level-7{color:#4078f2}.rainbow-braces .token.token.punctuation.brace-level-12,.rainbow-braces .token.token.punctuation.brace-level-4,.rainbow-braces .token.token.punctuation.brace-level-8{color:#a626a4}pre.diff-highlight>code .token.token.deleted:not(.prefix),pre>code.diff-highlight .token.token.deleted:not(.prefix){background-color:rgba(255,82,102,.15)}pre.diff-highlight>code .token.token.deleted:not(.prefix) ::-moz-selection,pre.diff-highlight>code .token.token.deleted:not(.prefix)::-moz-selection,pre>code.diff-highlight .token.token.deleted:not(.prefix) ::-moz-selection,pre>code.diff-highlight .token.token.deleted:not(.prefix)::-moz-selection{background-color:rgba(251,86,105,.25)}pre.diff-highlight>code .token.token.deleted:not(.prefix) ::selection,pre.diff-highlight>code .token.token.deleted:not(.prefix)::selection,pre>code.diff-highlight .token.token.deleted:not(.prefix) ::selection,pre>code.diff-highlight .token.token.deleted:not(.prefix)::selection{background-color:rgba(251,86,105,.25)}pre.diff-highlight>code .token.token.inserted:not(.prefix),pre>code.diff-highlight .token.token.inserted:not(.prefix){background-color:rgba(25,255,91,.15)}pre.diff-highlight>code .token.token.inserted:not(.prefix) ::-moz-selection,pre.diff-highlight>code .token.token.inserted:not(.prefix)::-moz-selection,pre>code.diff-highlight .token.token.inserted:not(.prefix) ::-moz-selection,pre>code.diff-highlight .token.token.inserted:not(.prefix)::-moz-selection{background-color:rgba(56,224,98,.25)}pre.diff-highlight>code .token.token.inserted:not(.prefix) ::selection,pre.diff-highlight>code .token.token.inserted:not(.prefix)::selection,pre>code.diff-highlight .token.token.inserted:not(.prefix) ::selection,pre>code.diff-highlight .token.token.inserted:not(.prefix)::selection{background-color:rgba(56,224,98,.25)}.prism-previewer-gradient.prism-previewer-gradient div,.prism-previewer.prism-previewer:before{border-color:hsl(0,0,95%)}.prism-previewer-color.prism-previewer-color:before,.prism-previewer-easing.prism-previewer-easing:before,.prism-previewer-gradient.prism-previewer-gradient div{border-radius:.3em}.prism-previewer.prism-previewer:after{border-top-color:hsl(0,0,95%)}.prism-previewer-flipped.prism-previewer-flipped.after{border-bottom-color:hsl(0,0,95%)}.prism-previewer-angle.prism-previewer-angle:before,.prism-previewer-easing.prism-previewer-easing,.prism-previewer-time.prism-previewer-time:before{background:#fff}.prism-previewer-angle.prism-previewer-angle circle,.prism-previewer-time.prism-previewer-time circle{stroke:#383a42;stroke-opacity:1}.prism-previewer-easing.prism-previewer-easing circle,.prism-previewer-easing.prism-previewer-easing line,.prism-previewer-easing.prism-previewer-easing path{stroke:#383a42}.prism-previewer-easing.prism-previewer-easing circle{fill:transparent}}@media (prefers-color-scheme:dark){code[class*=language-],pre[class*=language-]{background:#282c34;color:#abb2bf;direction:ltr;font-family:Fira Code,Fira Mono,Menlo,Consolas,DejaVu Sans Mono,monospace;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;text-align:left;text-shadow:0 1px rgba(0,0,0,.3);white-space:pre;word-break:normal;word-spacing:normal}code[class*=language-] ::-moz-selection,code[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection{background:#3e4451;color:inherit;text-shadow:none}code[class*=language-] ::selection,code[class*=language-]::selection,pre[class*=language-] ::selection{background:#3e4451;color:inherit;text-shadow:none}pre[class*=language-]{border-radius:.3em;margin:.5em 0;overflow:auto;padding:1em}:not(pre)>code[class*=language-]{border-radius:.3em;padding:.2em .3em;white-space:normal}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}.token.cdata,.token.comment,.token.prolog{color:#5c6370}.token.doctype,.token.entity,.token.punctuation{color:#abb2bf}.token.atrule,.token.attr-name,.token.boolean,.token.class-name,.token.constant,.token.number{color:#d19a66}.token.keyword{color:#c678dd}.token.deleted,.token.important,.token.property,.token.symbol,.token.tag{color:#e06c75}.token.attr-value,.token.attr-value>.token.punctuation,.token.builtin,.token.char,.token.inserted,.token.regex,.token.selector,.token.string{color:#98c379}.token.function,.token.operator,.token.variable{color:#61afef}.token.url{color:#56b6c2}.token.attr-value>.token.punctuation.attr-equals,.token.special-attr>.token.attr-value>.token.value.css{color:#abb2bf}.language-css .token.selector{color:#e06c75}.language-css .token.property{color:#abb2bf}.language-css .token.function,.language-css .token.url>.token.function{color:#56b6c2}.language-css .token.url>.token.string.url{color:#98c379}.language-css .token.atrule .token.rule,.language-css .token.important,.language-javascript .token.operator{color:#c678dd}.language-javascript .token.template-string>.token.interpolation>.token.interpolation-punctuation.punctuation{color:#be5046}.language-json .token.operator{color:#abb2bf}.language-json .token.null.keyword{color:#d19a66}.language-markdown .token.url,.language-markdown .token.url-reference.url>.token.string,.language-markdown .token.url>.token.operator{color:#abb2bf}.language-markdown .token.url>.token.content{color:#61afef}.language-markdown .token.url-reference.url,.language-markdown .token.url>.token.url{color:#56b6c2}.language-markdown .token.blockquote.punctuation,.language-markdown .token.hr.punctuation{color:#5c6370;font-style:italic}.language-markdown .token.code-snippet{color:#98c379}.language-markdown .token.bold .token.content{color:#d19a66}.language-markdown .token.italic .token.content{color:#c678dd}.language-markdown .token.list.punctuation,.language-markdown .token.strike .token.content,.language-markdown .token.strike .token.punctuation,.language-markdown .token.title.important>.token.punctuation{color:#e06c75}.token.bold{font-weight:700}.token.comment,.token.italic{font-style:italic}.token.entity{cursor:help}.token.namespace{opacity:.8}.token.token.cr:before,.token.token.lf:before,.token.token.space:before,.token.token.tab:not(:empty):before{color:rgba(171,178,191,.15);text-shadow:none}div.code-toolbar>.toolbar.toolbar>.toolbar-item{margin-right:.4em}div.code-toolbar>.toolbar.toolbar>.toolbar-item>a,div.code-toolbar>.toolbar.toolbar>.toolbar-item>button,div.code-toolbar>.toolbar.toolbar>.toolbar-item>span{background:#3a3f4b;border-radius:.3em;color:#828997;padding:.1em .4em}div.code-toolbar>.toolbar.toolbar>.toolbar-item>a:focus,div.code-toolbar>.toolbar.toolbar>.toolbar-item>a:hover,div.code-toolbar>.toolbar.toolbar>.toolbar-item>button:focus,div.code-toolbar>.toolbar.toolbar>.toolbar-item>button:hover,div.code-toolbar>.toolbar.toolbar>.toolbar-item>span:focus,div.code-toolbar>.toolbar.toolbar>.toolbar-item>span:hover{background:#3e4451;color:#abb2bf}.line-highlight.line-highlight{background:rgba(153,187,255,.04)}.line-highlight.line-highlight:before,.line-highlight.line-highlight[data-end]:after{background:#3a3f4b;border-radius:.3em;box-shadow:0 2px 0 0 rgba(0,0,0,.2);color:#abb2bf;padding:.1em .6em}pre[id].linkable-line-numbers.linkable-line-numbers span.line-numbers-rows>span:hover:before{background-color:rgba(153,187,255,.04)}.command-line .command-line-prompt,.line-numbers.line-numbers .line-numbers-rows{border-right-color:rgba(171,178,191,.15)}.command-line .command-line-prompt>span:before,.line-numbers .line-numbers-rows>span:before{color:#636d83}.rainbow-braces .token.token.punctuation.brace-level-1,.rainbow-braces .token.token.punctuation.brace-level-5,.rainbow-braces .token.token.punctuation.brace-level-9{color:#e06c75}.rainbow-braces .token.token.punctuation.brace-level-10,.rainbow-braces .token.token.punctuation.brace-level-2,.rainbow-braces .token.token.punctuation.brace-level-6{color:#98c379}.rainbow-braces .token.token.punctuation.brace-level-11,.rainbow-braces .token.token.punctuation.brace-level-3,.rainbow-braces .token.token.punctuation.brace-level-7{color:#61afef}.rainbow-braces .token.token.punctuation.brace-level-12,.rainbow-braces .token.token.punctuation.brace-level-4,.rainbow-braces .token.token.punctuation.brace-level-8{color:#c678dd}pre.diff-highlight>code .token.token.deleted:not(.prefix),pre>code.diff-highlight .token.token.deleted:not(.prefix){background-color:rgba(255,82,102,.15)}pre.diff-highlight>code .token.token.deleted:not(.prefix) ::-moz-selection,pre.diff-highlight>code .token.token.deleted:not(.prefix)::-moz-selection,pre>code.diff-highlight .token.token.deleted:not(.prefix) ::-moz-selection,pre>code.diff-highlight .token.token.deleted:not(.prefix)::-moz-selection{background-color:rgba(251,86,105,.25)}pre.diff-highlight>code .token.token.deleted:not(.prefix) ::selection,pre.diff-highlight>code .token.token.deleted:not(.prefix)::selection,pre>code.diff-highlight .token.token.deleted:not(.prefix) ::selection,pre>code.diff-highlight .token.token.deleted:not(.prefix)::selection{background-color:rgba(251,86,105,.25)}pre.diff-highlight>code .token.token.inserted:not(.prefix),pre>code.diff-highlight .token.token.inserted:not(.prefix){background-color:rgba(25,255,91,.15)}pre.diff-highlight>code .token.token.inserted:not(.prefix) ::-moz-selection,pre.diff-highlight>code .token.token.inserted:not(.prefix)::-moz-selection,pre>code.diff-highlight .token.token.inserted:not(.prefix) ::-moz-selection,pre>code.diff-highlight .token.token.inserted:not(.prefix)::-moz-selection{background-color:rgba(56,224,98,.25)}pre.diff-highlight>code .token.token.inserted:not(.prefix) ::selection,pre.diff-highlight>code .token.token.inserted:not(.prefix)::selection,pre>code.diff-highlight .token.token.inserted:not(.prefix) ::selection,pre>code.diff-highlight .token.token.inserted:not(.prefix)::selection{background-color:rgba(56,224,98,.25)}.prism-previewer-gradient.prism-previewer-gradient div,.prism-previewer.prism-previewer:before{border-color:#262931}.prism-previewer-color.prism-previewer-color:before,.prism-previewer-easing.prism-previewer-easing:before,.prism-previewer-gradient.prism-previewer-gradient div{border-radius:.3em}.prism-previewer.prism-previewer:after{border-top-color:#262931}.prism-previewer-flipped.prism-previewer-flipped.after{border-bottom-color:#262931}.prism-previewer-angle.prism-previewer-angle:before,.prism-previewer-easing.prism-previewer-easing,.prism-previewer-time.prism-previewer-time:before{background:#31363f}.prism-previewer-angle.prism-previewer-angle circle,.prism-previewer-time.prism-previewer-time circle{stroke:#abb2bf;stroke-opacity:1}.prism-previewer-easing.prism-previewer-easing circle,.prism-previewer-easing.prism-previewer-easing line,.prism-previewer-easing.prism-previewer-easing path{stroke:#abb2bf}.prism-previewer-easing.prism-previewer-easing circle{fill:transparent}}:root{--foreground:#24292f;--background:#fff}a{color:#0969da}a.visited,a:visited{color:#57606a}.green{color:#1a7f37}.red{color:#cf222e}@media (prefers-color-scheme:dark){:root{--foreground:#adbac7;--background:#22272e}a{color:#539bf5}a.visited,a:visited{color:#768390}.green{color:#57ab5a}.red{color:#e5534b}}a{text-decoration:none}a:hover{text-decoration:underline}html{font-family:Ubuntu,sans-serif}body{background-color:var(--background);color:var(--foreground);margin:0;padding:0}#top{box-sizing:border-box;display:grid;grid-template-rows:1fr 2em;margin:0;min-height:100vh;padding:1em 2em}.graph polygon{fill:transparent}.graph g ellipse[stroke="#000"],.graph g ellipse[stroke="#000000"],.graph g ellipse[stroke=black],.graph g path[stroke="#000"],.graph g path[stroke="#000000"],.graph g path[stroke=black],.graph g polygon[stroke="#000"],.graph g polygon[stroke="#000000"],.graph g polygon[stroke=black]{stroke:var(--foreground)}.graph g text[fill="#000"],.graph g text[fill="#000000"],.graph g text[fill=black]{fill:var(--foreground)}code,pre{font-family:JetBrains Mono,monospace}pre[class*=language-]{word-wrap:break-word;border-radius:0;box-sizing:border-box;margin:1em -2em;max-width:100vw;padding:1em 2em}footer a{line-height:2em;margin-right:.5em}.delta{line-height:1;margin-left:1em;white-space:nowrap}.columns{display:grid;grid-template-columns:repeat(2,1fr)}@media only screen and (max-width:1024px){.columns{grid-template-columns:repeat(1,1fr)}}.pie{text-align:center}.pie figure{display:inline-block}.pie figcaption{font-size:80%;margin-top:.25em}</style><title data-gatsby-head="true">StarCraft 2 API from scratch</title><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){const t=e.target;if(void 0===t.dataset.mainImage)return;if(void 0===t.dataset.gatsbyImageSsr)return;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><link rel="icon" href="/favicon-32x32.png?v=6389d5f13c96000946d60b6bb0a8b5a8" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=6389d5f13c96000946d60b6bb0a8b5a8"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=6389d5f13c96000946d60b6bb0a8b5a8"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=6389d5f13c96000946d60b6bb0a8b5a8"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=6389d5f13c96000946d60b6bb0a8b5a8"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=6389d5f13c96000946d60b6bb0a8b5a8"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=6389d5f13c96000946d60b6bb0a8b5a8"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=6389d5f13c96000946d60b6bb0a8b5a8"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=6389d5f13c96000946d60b6bb0a8b5a8"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div id="top"><main><div><h1>StarCraft 2 API from scratch</h1>
<p>If you google something like "starcrfat 2 api bot" you definitelly will found some cool tutorials of how to create own bot</p>
<p>Personaly for me <a href="https://www.youtube.com/watch?v=qpxdB67wJIk">this one</a> was a starting point into subject</p>
<p>I did <a href="https://www.youtube.com/watch?v=tFx4fopImtE">managed</a> to beat medium computer by terran marine maraudeur three barracks push with help op <a href="https://github.com/BurnySc2/python-sc2">python-sc2</a></p>
<p>But as usual whenever it comes to a pythong it is like a seven rounds of hell with its duck typing</p>
<p>So my curiosity land me into trying to figure out how to utilize raw api in a first place with something strongly typed</p>
<p>Under the cover StarCraft exposes <a href="https://github.com/Blizzard/s2client-proto">protobut api</a> which is documented <a href="https://github.com/Blizzard/s2client-proto/blob/master/docs/protocol.md">here</a></p>
<p>In followup examples I'm saving some notes of raw usage (without any fancy stuff, libraries, wrappers, etc) for it to become really clear how to get up and running</p>
<h2>Starting StarCraft</h2>
<p>Most of implementations are managing this aspect, there a different modes of how StartCraft may be started but at very minimum it requires to pass few flags to expose api</p>
<p>Also there is an important note of from where (working directory) StarCraft is launched, otherwise you will get <code class="language-text">Required library 'icuuc52.dll' does not exist</code></p>
<p>So, here is how StartCraft should be started:</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token builtin class-name">cd</span> <span class="token string">"D:\Battlenet\StarCraft II\Support"</span>
<span class="token string">"D:\Battlenet\StarCraft II\Versions\Base86383\SC2.exe"</span> <span class="token parameter variable">-listen</span> <span class="token number">127.0</span>.0.1 <span class="token parameter variable">-port</span> <span class="token number">8168</span> <span class="token parameter variable">-displaymode</span> <span class="token number">0</span> <span class="token parameter variable">-windowwidth</span> <span class="token number">1024</span> <span class="token parameter variable">-windowheight</span> <span class="token number">768</span> <span class="token parameter variable">-windowx</span> <span class="token number">0</span> <span class="token parameter variable">-windowy</span> <span class="token number">0</span></code></pre></div>
<p>Notes:</p>
<ul>
<li>In my case StartCraft installed in non default path</li>
<li>You need to use Support as a working directory to deal with icuu</li>
<li>Minimal flags are <code class="language-text">-listen</code> and <code class="language-text">-port</code>, all other are self explanatory</li>
<li>If everything fine, black screen with StarCraft cursor will appear - it is ok, and means that we did everything correct</li>
</ul>
<h2>StarCraft Protobuf</h2>
<p>Protobuf definitions can be found <a href="https://github.com/Blizzard/s2client-proto/tree/master/s2clientprotocol">here</a> just drop them to <code class="language-text">s2clientprotocol</code> in the root of your project so C# will see them.</p>
<p>Now install few dependencies:</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">dotnet <span class="token function">add</span> package Grpc.Net.Client
dotnet <span class="token function">add</span> package Google.Protobuf
dotnet <span class="token function">add</span> package Grpc.Tools</code></pre></div>
<p>And in your csproj file add:</p>
<div class="gatsby-highlight" data-language="xml"><pre class="language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ItemGroup</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Protobuf</span> <span class="token attr-name">Include</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>s2clientprotocol/*.proto<span class="token punctuation">"</span></span> <span class="token attr-name">GrpcServices</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Client<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ItemGroup</span><span class="token punctuation">></span></span></code></pre></div>
<p>After compiling project in <code class="language-text">obj/Debug/net6.0/s2clientprotocol</code> you should see bunch of auto generated classes representing protocol</p>
<p>At the very end whole protocol is just about sending <code class="language-text">Request</code> as an input and receiving <code class="language-text">Response</code> as an output via web socket conntection</p>
<h2>WebSockets</h2>
<p>WebSockets are used to transit bytes to/from StarCraft</p>
<p>In my case I'm going to use dotnet, and here are some boiler plate examples:</p>
<div class="gatsby-highlight" data-language="cs"><pre class="language-cs"><code class="language-cs"><span class="token class-name"><span class="token keyword">var</span></span> ws <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ClientWebSocket</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ws<span class="token punctuation">.</span><span class="token function">ConnectAsync</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">Uri</span><span class="token punctuation">(</span><span class="token string">"ws://127.0.0.1:8168/sc2api"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> CancellationToken<span class="token punctuation">.</span>None<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"Connected"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>We are expecting StartCraft to be started already (here you may wish to automate this and start it programmantically) but leaved such by intent to be as little as possible</p>
<p>Sending message:</p>
<div class="gatsby-highlight" data-language="cs"><pre class="language-cs"><code class="language-cs"><span class="token class-name"><span class="token keyword">var</span></span> req <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Request</span> <span class="token punctuation">{</span> Ping <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">RequestPing</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">await</span> ws<span class="token punctuation">.</span><span class="token function">SendAsync</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span><span class="token function">ToByteArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> WebSocketMessageType<span class="token punctuation">.</span>Binary<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> CancellationToken<span class="token punctuation">.</span>None<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>Receiving response:</p>
<div class="gatsby-highlight" data-language="cs"><pre class="language-cs"><code class="language-cs"><span class="token keyword">await</span> <span class="token keyword">using</span> <span class="token class-name"><span class="token keyword">var</span></span> ms <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">MemoryStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">while</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name"><span class="token keyword">var</span></span> buffer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ArraySegment<span class="token punctuation">&lt;</span><span class="token keyword">byte</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name"><span class="token keyword">byte</span></span><span class="token punctuation">[</span><span class="token number">1024</span><span class="token operator">*</span><span class="token number">1024</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name"><span class="token keyword">var</span></span> result <span class="token operator">=</span> <span class="token keyword">await</span> ws<span class="token punctuation">.</span><span class="token function">ReceiveAsync</span><span class="token punctuation">(</span>buffer<span class="token punctuation">,</span> CancellationToken<span class="token punctuation">.</span>None<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>buffer<span class="token punctuation">.</span>Array <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        ms<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span>buffer<span class="token punctuation">.</span>Array<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> result<span class="token punctuation">.</span>Count<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>EndOfMessage<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
ms<span class="token punctuation">.</span><span class="token function">Seek</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> SeekOrigin<span class="token punctuation">.</span>Begin<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">var</span></span> res <span class="token operator">=</span> Response<span class="token punctuation">.</span>Parser<span class="token punctuation">.</span><span class="token function">ParseFrom</span><span class="token punctuation">(</span>ms<span class="token punctuation">)</span><span class="token punctuation">;</span>

Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span> <span class="token property">"ping"</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token property">"gameVersion"</span><span class="token operator">:</span> <span class="token string">"5.0.8.86383"</span><span class="token punctuation">,</span> <span class="token property">"dataVersion"</span><span class="token operator">:</span> <span class="token string">"22EAC562CD0C6A31FB2C2C21E3AA3680"</span><span class="token punctuation">,</span> <span class="token property">"dataBuild"</span><span class="token operator">:</span> <span class="token number">86383</span><span class="token punctuation">,</span> "baseBuild
<span class="token string">": 86383 }, "</span>id<span class="token string">": 0, "</span>status<span class="token string">": "</span>launched" <span class="token punctuation">}</span></code></pre></div>
<p>I did lied to myself, will need at least some kind of wrapper for further examples:</p>
<div class="gatsby-highlight" data-language="cs"><pre class="language-cs"><code class="language-cs"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span>
<span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">readonly</span> <span class="token class-name">ClientWebSocket</span> _clientWebSocket<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token function">Client</span><span class="token punctuation">(</span><span class="token class-name">ClientWebSocket</span> clientWebSocket<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        _clientWebSocket <span class="token operator">=</span> clientWebSocket<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token return-type class-name">Task</span> <span class="token function">SendAsync</span><span class="token punctuation">(</span><span class="token class-name">Request</span> req<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">await</span> _clientWebSocket<span class="token punctuation">.</span><span class="token function">SendAsync</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span><span class="token function">ToByteArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> WebSocketMessageType<span class="token punctuation">.</span>Binary<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> CancellationToken<span class="token punctuation">.</span>None<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span>Response<span class="token punctuation">></span></span> <span class="token function">ReceiveAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">await</span> <span class="token keyword">using</span> <span class="token class-name"><span class="token keyword">var</span></span> ms <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">MemoryStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token class-name"><span class="token keyword">var</span></span> buffer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ArraySegment<span class="token punctuation">&lt;</span><span class="token keyword">byte</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name"><span class="token keyword">byte</span></span><span class="token punctuation">[</span><span class="token number">1024</span><span class="token operator">*</span><span class="token number">1024</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name"><span class="token keyword">var</span></span> result <span class="token operator">=</span> <span class="token keyword">await</span> _clientWebSocket<span class="token punctuation">.</span><span class="token function">ReceiveAsync</span><span class="token punctuation">(</span>buffer<span class="token punctuation">,</span> CancellationToken<span class="token punctuation">.</span>None<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>buffer<span class="token punctuation">.</span>Array <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                ms<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span>buffer<span class="token punctuation">.</span>Array<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> result<span class="token punctuation">.</span>Count<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>EndOfMessage<span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        ms<span class="token punctuation">.</span><span class="token function">Seek</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> SeekOrigin<span class="token punctuation">.</span>Begin<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> Response<span class="token punctuation">.</span>Parser<span class="token punctuation">.</span><span class="token function">ParseFrom</span><span class="token punctuation">(</span>ms<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<h2>Starting game</h2>
<p>Steps are described in <code class="language-text">sc2api.proto</code></p>
<p>Create game</p>
<div class="gatsby-highlight" data-language="cs"><pre class="language-cs"><code class="language-cs"><span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">SendAsync</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">Request</span>
<span class="token punctuation">{</span>
    CreateGame <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">RequestCreateGame</span>
    <span class="token punctuation">{</span>
        Realtime <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        LocalMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">LocalMap</span>
        <span class="token punctuation">{</span>
            MapPath <span class="token operator">=</span> <span class="token string">"D:/Battlenet/StarCraft II/Maps/Flat64.SC2Map"</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        PlayerSetup <span class="token operator">=</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">new</span> <span class="token constructor-invocation class-name">PlayerSetup</span>
            <span class="token punctuation">{</span>
                Type <span class="token operator">=</span> PlayerType<span class="token punctuation">.</span>Participant
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token keyword">new</span> <span class="token constructor-invocation class-name">PlayerSetup</span>
            <span class="token punctuation">{</span>
                Race <span class="token operator">=</span> Race<span class="token punctuation">.</span>Terran<span class="token punctuation">,</span>
                Type <span class="token operator">=</span> PlayerType<span class="token punctuation">.</span>Computer<span class="token punctuation">,</span>
                Difficulty <span class="token operator">=</span> Difficulty<span class="token punctuation">.</span>Medium
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">ReceiveAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// { "createGame": { }, "id": 0, "status": "init_game" }</span></code></pre></div>
<p>Join game</p>
<div class="gatsby-highlight" data-language="cs"><pre class="language-cs"><code class="language-cs"><span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">SendAsync</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">Request</span>
<span class="token punctuation">{</span>
    JoinGame <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">RequestJoinGame</span>
    <span class="token punctuation">{</span>
        Race <span class="token operator">=</span> Race<span class="token punctuation">.</span>Zerg<span class="token punctuation">,</span>
        Options <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">InterfaceOptions</span>
        <span class="token punctuation">{</span>
            Raw <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            Score <span class="token operator">=</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">ReceiveAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// { "joinGame": { "playerId": 1 }, "id": 0, "status": "in_game" }</span></code></pre></div>
<p>In twenty seconds leave the game</p>
<div class="gatsby-highlight" data-language="cs"><pre class="language-cs"><code class="language-cs">Thread<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span><span class="token number">20000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">SendAsync</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">Request</span> <span class="token punctuation">{</span> LeaveGame <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">RequestLeaveGame</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>Notes:</p>
<ul>
<li>because we are not quit we can rerun program as many times as we want without restarting game itself</li>
<li>in case of error response will contain correspongind error enum and error details description</li>
</ul>
<p>Before starting main loop we may want to receive game info:</p>
<div class="gatsby-highlight" data-language="cs"><pre class="language-cs"><code class="language-cs"><span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">SendAsync</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">Request</span> <span class="token punctuation">{</span> GameInfo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">RequestGameInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">ReceiveAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>Which will contain some basic information about map, players, starting positions etc</p>
<p>TODO: how to decode data</p>
<p>Then we may want to retrieve "data"</p>
<div class="gatsby-highlight" data-language="cs"><pre class="language-cs"><code class="language-cs"><span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">SendAsync</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">Request</span> <span class="token punctuation">{</span> Data <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">RequestData</span>
<span class="token punctuation">{</span>
    UnitTypeId <span class="token operator">=</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">ReceiveAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>You can pass much more flags to it, in returned response there will be dictionary for a unit types, e.g. for a Zerg worker:</p>
<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"unitId"</span><span class="token operator">:</span> <span class="token number">104</span><span class="token punctuation">,</span>
  <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"Drone"</span><span class="token punctuation">,</span>
  <span class="token property">"available"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token property">"cargoSize"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token property">"attributes"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"Light"</span><span class="token punctuation">,</span> <span class="token string">"Biological"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">"movementSpeed"</span><span class="token operator">:</span> <span class="token number">2.8125</span><span class="token punctuation">,</span>
  <span class="token property">"armor"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token property">"weapons"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"Ground"</span><span class="token punctuation">,</span>
      <span class="token property">"damage"</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
      <span class="token property">"attacks"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
      <span class="token property">"range"</span><span class="token operator">:</span> <span class="token number">0.100097656</span><span class="token punctuation">,</span>
      <span class="token property">"speed"</span><span class="token operator">:</span> <span class="token number">1.5</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">"mineralCost"</span><span class="token operator">:</span> <span class="token number">50</span><span class="token punctuation">,</span>
  <span class="token property">"vespeneCost"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token property">"foodRequired"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token property">"abilityId"</span><span class="token operator">:</span> <span class="token number">1342</span><span class="token punctuation">,</span>
  <span class="token property">"race"</span><span class="token operator">:</span> <span class="token string">"Zerg"</span><span class="token punctuation">,</span>
  <span class="token property">"buildTime"</span><span class="token operator">:</span> <span class="token number">272</span><span class="token punctuation">,</span>
  <span class="token property">"sightRange"</span><span class="token operator">:</span> <span class="token number">8</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Also in protobuf repository three is <code class="language-text">stableid.json</code> with <code class="language-text">[ 'Abilities', 'Buffs', 'Effects', 'Units', 'Upgrades' ]</code> keys and inside there the same drone will be <code class="language-text">{ id: 104, name: 'Drone' }</code> - it should be used as a part of code generation step, note that actual game data contains way more info which might be changed depending on concrete map</p>
<h2>Main loop</h2>
<p>Now when we started a game and grab all required info in a loop we are going to:</p>
<p><strong>Observing game state</strong></p>
<div class="gatsby-highlight" data-language="cs"><pre class="language-cs"><code class="language-cs"><span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">SendAsync</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">Request</span> <span class="token punctuation">{</span> Observation <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">RequestObservation</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">ReceiveAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>This one will return huge structure with game state data, thats from where all libraries are aquiring all objects</p>
<p><strong>Sending actions</strong></p>
<p>Lets send first found worker attack somewhere</p>
<div class="gatsby-highlight" data-language="cs"><pre class="language-cs"><code class="language-cs"><span class="token class-name"><span class="token keyword">var</span></span> firstUnit <span class="token operator">=</span> observation<span class="token punctuation">.</span>Observation<span class="token punctuation">.</span>Observation<span class="token punctuation">.</span>RawData<span class="token punctuation">.</span>Units<span class="token punctuation">.</span><span class="token function">FirstOrDefault</span><span class="token punctuation">(</span>u <span class="token operator">=></span> u<span class="token punctuation">.</span>UnitType <span class="token operator">==</span> <span class="token number">104</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>firstUnit<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">var</span></span> action1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Action</span>
<span class="token punctuation">{</span>
    ActionRaw <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ActionRaw</span>
    <span class="token punctuation">{</span>
        UnitCommand <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ActionRawUnitCommand</span>
        <span class="token punctuation">{</span>
            AbilityId <span class="token operator">=</span> <span class="token number">23</span><span class="token punctuation">,</span> <span class="token comment">// Attack</span>
            TargetWorldSpacePos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Point2D</span>
            <span class="token punctuation">{</span>
                X <span class="token operator">=</span> <span class="token number">40.0f</span><span class="token punctuation">,</span>
                Y <span class="token operator">=</span> <span class="token number">40.0f</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            UnitTags <span class="token operator">=</span> <span class="token punctuation">{</span> firstUnit<span class="token punctuation">.</span>Tag <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">SendAsync</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">Request</span> <span class="token punctuation">{</span> Action <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">RequestAction</span> <span class="token punctuation">{</span> Actions <span class="token operator">=</span> <span class="token punctuation">{</span> action1 <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">ReceiveAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// { "action": { "result": [ "Success" ] }, "id": 0, "status": "in_game" }</span></code></pre></div>
<p>Note: that you can send more than one action per loop</p>
<p>At the very end most of existing libraries are set of helpers and utilities around all this</p>
<p>Few more notes</p>
<h2>Image data</h2>
<p>In game infor there is an image data for placement grid (where building can be build), path findings (where units can travel), terrain height</p>
<p>All three are just bytes arrays which might be converted to images like so:</p>
<div class="gatsby-highlight" data-language="cs"><pre class="language-cs"><code class="language-cs"><span class="token comment">// works for PlacementGrid and PathingGrid</span>
<span class="token class-name"><span class="token keyword">var</span></span> placementGridImage <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Bitmap</span><span class="token punctuation">(</span>gameInfo<span class="token punctuation">.</span>GameInfo<span class="token punctuation">.</span>StartRaw<span class="token punctuation">.</span>PlacementGrid<span class="token punctuation">.</span>Size<span class="token punctuation">.</span>X<span class="token punctuation">,</span> gameInfo<span class="token punctuation">.</span>GameInfo<span class="token punctuation">.</span>StartRaw<span class="token punctuation">.</span>PlacementGrid<span class="token punctuation">.</span>Size<span class="token punctuation">.</span>Y<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> y <span class="token operator">&lt;</span> gameInfo<span class="token punctuation">.</span>GameInfo<span class="token punctuation">.</span>StartRaw<span class="token punctuation">.</span>PlacementGrid<span class="token punctuation">.</span>Size<span class="token punctuation">.</span>Y<span class="token punctuation">;</span> y<span class="token operator">++</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> x <span class="token operator">&lt;</span> gameInfo<span class="token punctuation">.</span>GameInfo<span class="token punctuation">.</span>StartRaw<span class="token punctuation">.</span>PlacementGrid<span class="token punctuation">.</span>Size<span class="token punctuation">.</span>X<span class="token punctuation">;</span> x<span class="token operator">++</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token class-name"><span class="token keyword">var</span></span> index <span class="token operator">=</span> x <span class="token operator">+</span> y <span class="token operator">*</span> gameInfo<span class="token punctuation">.</span>GameInfo<span class="token punctuation">.</span>StartRaw<span class="token punctuation">.</span>PlacementGrid<span class="token punctuation">.</span>Size<span class="token punctuation">.</span>X<span class="token punctuation">;</span>
        <span class="token class-name"><span class="token keyword">var</span></span> b <span class="token operator">=</span> gameInfo<span class="token punctuation">.</span>GameInfo<span class="token punctuation">.</span>StartRaw<span class="token punctuation">.</span>PlacementGrid<span class="token punctuation">.</span>Data<span class="token punctuation">[</span>index<span class="token operator">/</span><span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token class-name"><span class="token keyword">var</span></span> p <span class="token operator">=</span> <span class="token number">7</span> <span class="token operator">-</span> index <span class="token operator">%</span> <span class="token number">8</span><span class="token punctuation">;</span>
        <span class="token class-name"><span class="token keyword">var</span></span> mask <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> p<span class="token punctuation">;</span>
        <span class="token class-name"><span class="token keyword">var</span></span> val <span class="token operator">=</span> <span class="token punctuation">(</span>b <span class="token operator">&amp;</span> mask<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        placementGridImage<span class="token punctuation">.</span><span class="token function">SetPixel</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> System<span class="token punctuation">.</span>Drawing<span class="token punctuation">.</span>Color<span class="token punctuation">.</span><span class="token function">FromArgb</span><span class="token punctuation">(</span>val <span class="token punctuation">?</span> <span class="token number">255</span> <span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> val <span class="token punctuation">?</span> <span class="token number">255</span> <span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> val <span class="token punctuation">?</span> <span class="token number">255</span> <span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
placementGridImage<span class="token punctuation">.</span><span class="token function">Save</span><span class="token punctuation">(</span><span class="token string">@"C:\Users\mac\OneDrive\Desktop\PlacementGrid.bmp"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name"><span class="token keyword">var</span></span> terrainHeightImage <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Bitmap</span><span class="token punctuation">(</span>gameInfo<span class="token punctuation">.</span>GameInfo<span class="token punctuation">.</span>StartRaw<span class="token punctuation">.</span>TerrainHeight<span class="token punctuation">.</span>Size<span class="token punctuation">.</span>X<span class="token punctuation">,</span> gameInfo<span class="token punctuation">.</span>GameInfo<span class="token punctuation">.</span>StartRaw<span class="token punctuation">.</span>PathingGrid<span class="token punctuation">.</span>Size<span class="token punctuation">.</span>Y<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> y <span class="token operator">&lt;</span> gameInfo<span class="token punctuation">.</span>GameInfo<span class="token punctuation">.</span>StartRaw<span class="token punctuation">.</span>TerrainHeight<span class="token punctuation">.</span>Size<span class="token punctuation">.</span>Y<span class="token punctuation">;</span> y<span class="token operator">++</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> x <span class="token operator">&lt;</span> gameInfo<span class="token punctuation">.</span>GameInfo<span class="token punctuation">.</span>StartRaw<span class="token punctuation">.</span>TerrainHeight<span class="token punctuation">.</span>Size<span class="token punctuation">.</span>X<span class="token punctuation">;</span> x<span class="token operator">++</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token class-name"><span class="token keyword">var</span></span> index <span class="token operator">=</span> x <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>gameInfo<span class="token punctuation">.</span>GameInfo<span class="token punctuation">.</span>StartRaw<span class="token punctuation">.</span>TerrainHeight<span class="token punctuation">.</span>Size<span class="token punctuation">.</span>Y <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">-</span> y<span class="token punctuation">)</span> <span class="token operator">*</span> gameInfo<span class="token punctuation">.</span>GameInfo<span class="token punctuation">.</span>StartRaw<span class="token punctuation">.</span>TerrainHeight<span class="token punctuation">.</span>Size<span class="token punctuation">.</span>X<span class="token punctuation">;</span>
        <span class="token class-name"><span class="token keyword">var</span></span> encodedHeight <span class="token operator">=</span> gameInfo<span class="token punctuation">.</span>GameInfo<span class="token punctuation">.</span>StartRaw<span class="token punctuation">.</span>TerrainHeight<span class="token punctuation">.</span>Data<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token comment">// var decodedHeight = -100.0f + 200.0f * encodedHeight / 255.0f;</span>
        terrainHeightImage<span class="token punctuation">.</span><span class="token function">SetPixel</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> System<span class="token punctuation">.</span>Drawing<span class="token punctuation">.</span>Color<span class="token punctuation">.</span><span class="token function">FromArgb</span><span class="token punctuation">(</span>encodedHeight<span class="token punctuation">,</span> encodedHeight<span class="token punctuation">,</span> encodedHeight<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
terrainHeightImage<span class="token punctuation">.</span><span class="token function">Save</span><span class="token punctuation">(</span><span class="token string">@"C:\Users\mac\OneDrive\Desktop\TerrainHeight.bmp"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>Which will give us:</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 168px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/dbb93a2391afa579247fefc7a5191e27/9d904/PathingGrid.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 119.04761904761905%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAYCAIAAAB1KUohAAAACXBIWXMAAA7CAAAOwgEVKEqAAAAEIUlEQVQ4y51Uyy87XRg+vYzRC61ItxL/gB0JFi5dkQjVYCFsBImNy7cRRNwWUoKIaFKXSCohikoTlwgllIhrWtEpU9PRpBoySZWmpnTy/hLjMz/f8nsWk8k55znv+7zP+x6EviCVSsVisVKpxDBMIpHwX/QXRCIRQgjDMBzHf23JZDKLxWK322maNpvNMzMzLpdramoKIVRSUtLX15eVlYUQqqioOD09dTqdBoNBIKtUKq/XC1+4u7s7Pj4GgM3NTYlEcnt7CwDBYLCrq+v8/Jw/4/P5UlJShMhOpxMAYrEYAFitVoqidnZ2MjMz/X4/AFxfX19dXW1sbBAEAQB2u10ulwt6Jicn9/b2np+f4/H49PQ0QRBvb28AMDExsbu7+/DwcHV1ZbVaLRYLAOh0OoTQt3KlUunxeEKh0MzMTEZGRnZ2djwe93g8FEWp1eri4uKbLwBAeXl5c3Pz/v7+TwlRamqqz+cDgLq6OhzHt7e3eW16vV6tVtM0HQqFLBZLIBAYGBiYnJx0uVy/bKitrW1qakIIGY1GAIhEIkNDQ263u6ury+PxAMDi4uLW1hbHcQDgdrt/aUYIaTSa3Nzc3t5eXmp+fn5LS4vP5+M4bnh4WKvVfnx8sCwbDod9Pp9KpUI/uqurqyORyOfnp9frbW9vb21tBYCLiwuGYQBgfn6eXxkaGhodHWUYRqFQCOS1tTUAYFkWAM7OzvLy8u7v72OxGMuyZ2dnS0tLABCPxzs7O2maJkkSx/HvtBMSEjwez9PTU39/P6/KaDQeHR29v7+zLEsQRHZ2Nu9wNBoFgPX1dcEqhULBMMzIyEhfXx8AdHR08ImEw+G7uzsA+OcLgUCA47iPj4+6ujqBrFKpaJp+fHx8eXkBgMLCwp6eHgCgabqxsbGqqmp4eBgAuru7Kysr09PTBZP5yHxWfEvPzs4CAEEQBoOBJMm2trZwOAwA/KiUlpYWFRX9PXDI5XLNzs4aDAa/32+1Wl9fXwOBgEaj0ev1/KUOhyM5ObmmpoYfjNTUVIF8cnLS0NCg0+l4h1wuV1lZGY7jFxcXFEVxHJeTk5OWlmYymViW9Xq9SUlJglXl5eUAYDab19fX3W734+Oj1WodHBwEgFAoRJLk+Ph4NBoNBoM7OztGo1HQLJPJtra2AODm5sZms52enl5eXgLAw8NDQUGBw+EgSZKvfywW4zju8PBQaE+1Wk1RFK/N6XSOjY3xZfd6vWKxeHV1FQAODg5IkuR/FhYW1Gq1oNlkMvn9foqi6uvrEUJardZkMtXW1opEouXl5UAgsLq6arPZGIaZm5tbWVlJTk4WyAkJCUlJSTKZ7JeH/27J5XIMw2QymUajSUxM/G7sn6mSSqUikUgikUilUv4xTUxMxDCMXxSLxfzzyh8Wi8X/CfB/8AcVua5T4KmcmwAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="PathingGrid"
        title="PathingGrid"
        src="/static/dbb93a2391afa579247fefc7a5191e27/9d904/PathingGrid.png"
        srcset="/static/dbb93a2391afa579247fefc7a5191e27/9d904/PathingGrid.png 168w"
        sizes="(max-width: 168px) 100vw, 168px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span></p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 168px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/f93a533c259a88e00b7aae24cbe0e267/9d904/PlacementGrid.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 119.04761904761905%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAYCAIAAAB1KUohAAAACXBIWXMAAA7CAAAOwgEVKEqAAAAEO0lEQVQ4y51UXSi7bRy+zZ7NxmI+iiLKISXhgMJqykdyotA2HzXJHCg5oiYcSaHlQL4WCsmILUZGyBQyHttj2YPnEWOyQmIYz+/t7/Ha33v4Xgf3wX3f1/27+13X9UPoC1wul8PhBAUFYRjm7+/Prugv+Pn5IYQwDOPz+b+OBALB9PT02toaTdPj4+Ojo6M4jg8NDSGECgoK2tvb09LSEEJKpXJvbw/H8c7OTh85ODj49PQUvmCxWLRaLQAsLCzweDyapgHA7XbX1dWp1Wr2DkVRYrHYVxnHcQDwer0Mw4yNjVEUtbGxERkZubi4CAAEQZjNZoVCYbFYAGB9fV0gEPiKa7XaxsbGvb09ANBqtQRBfH5+WiyW1NTU3d3d8/NzHMeNX1haWoqJifnpAgoMDCRJcmdnR6PRJCcnp6ene71eiqJubm7Cw8MLCgqOj48PDg4YhikrK0tISNBqtd9MhFBYWBhFUQCgVCoxDFtaWgKAs7Oz+Pj46Ohomqbv7+9zc3MJgujo6BgZGbHZbL9kqKioUKlUCKGhoSEAYBgmOzt7cHBQJpPZbDYAGB0dNRqNn5+fb29vNptNKBT+0jA8PFwikeTm5j49PTU1NeXl5RUXF5eWlgJAf39/SkoK23mz2UwQRGho6B8mq7hcLn96evr4+DAYDLW1tQqFAgAMBoNEInl+fm5paSkrKwOAzs7O7u5ut9sdGBjoI8/NzQHA6+srAOA4XlhYyCo/NjaWmZmZk5PjcDgAoLm5maZpkiT5fP73t3k8nt1ud7lc7e3tAHB7e5v+Bb1eDwD7+/tSqfTs7AwAXl5eWP/8VP0jldvt7unpaWtrAwCZTNba2upyubKyssxmMwBUVVXV1NRsbW0xDPP+/q5UKn1ksVhst9tXVlY8Hs/d3V1SUlJ3dzcAlJSU5OfnV1ZW1tfXO53OrKwsuVweFxfncwhCKCgoyGq1Pj8/A4DRaBweHgaAo6MjmUw2MTGRkpLi8XgAYGRkBCFUVFSUn5//d+CQzWabmprq6uqyWq2FhYWPj49Op5M1id1uB4DNzU2RSFReXs4GIywszKezTqdLTExkVV1dXbVarUVFRSKRiCTJ6+vrj4+PjIyMuLg4jUZDkiRN0yKRyOeQqKioycnJubk5k8nkcDiurq6Wl5eTkpJIkvR4PCcnJ729vQCwvb2tUqmGh4d/DYOVlRVWlerq6s3NTTZ6s7OzsbGxu7u7DodjcnISAN7f3wHg8PDQZ8+QkJDz83M26A0NDWq1mm3e5eUlhmEzMzMA0NfXx74IAA6H4/vbLAYGBi4uLiiKamxsRAhJpdLBwUG5XI4Q0ul0Tqdzfn5er9c/PDzgOG4ymb7t+WMykUjEzgefhv8eCYVCDMOEQmFERASPxwsICPgVSS6X6+fn5+/vz+Vy2WEaEBCAYRi7yeFw2PHKGovD4fynwP/BPw5ifqG9Bh+0AAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="PlacementGrid"
        title="PlacementGrid"
        src="/static/f93a533c259a88e00b7aae24cbe0e267/9d904/PlacementGrid.png"
        srcset="/static/f93a533c259a88e00b7aae24cbe0e267/9d904/PlacementGrid.png 168w"
        sizes="(max-width: 168px) 100vw, 168px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span></p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 168px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/7aa449a5a60ab424b8fcf2bc7d7bbc44/9d904/TerrainHeight.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 119.04761904761905%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAYCAIAAAB1KUohAAAACXBIWXMAAA7CAAAOwgEVKEqAAAAC7klEQVQ4y8WUS0/rOhSFj9RKgFRESGCUlDZt+aMFMWHADIQYVYwYIYRQJZqHY+flPOwkJi0DlHsJ/SH3Kruk56Izv2sWy99e28ve+fXr/1S329U0rd/va5qmqqosywcHB5Ik7e/vK4qiqmq/31dVVdO0wWDQb9Ttdjewruv5txhj19fXt7e3Ly8vs9ns/Pw8DEMhBOf84+Pj6+urqqr1en16erqBR6OREIIxxjmP49iyLISQ67qWZd3d3cVxnGWZEKKqqr8a1XW9hXVd540YYxhju5HVKAgCIUQURW9vb5+fn8DXdT2ZTDbwYDAghKRpGsdxS5qm6bouVEyShDEGtsvlsizL0Wi0dSaEAANwGIae59m2nSQJ5zzLMkppW6soivF4vIGHwyHGGPq0bZtSmuc55xxj7DgOZME5D4KAEJLn+Wq12rat6zrEA7aUUtYIFn3fz7IM/H3fRwg9Pz+rqvpn2LIsSDhJEviMoijLsiAIMMZPT08XFxdHR0cb+OTkBCFkfwshBD5hGJqmuVgsLMtyXRcKEUIeHx8VRdk6e57XOtu2TQjxPM8wjMViYRiGaZq/9+W6rq7rG1jTNMMwEELtDjAELAgC3/ft30QI2cKyLM9ms/aqfN93HAfgMAwhecdx2tKEkOFwuIGPj4+n0+nDwwPGmFKaZVmaptBIGIac8yRJ2r5+tq2qKuyDZwBpRVFkWRbGmDHWJv8HeDwel2WZ57nneRjjNE2B9zwPIZSmKdwTZAHPdgvrup5lGby7KIrgnFDCaQRPFaYNY/wTLsvy/f29qqq6rvM8p5RC/3CFbVRxHHPOwzDcBjYajf5uBBO3Wq2SJCmKAq4aDB3HaU/0n8GYTCbr9frrW8vlUghRFMXNzc18PqeU2rY9n88ZY7D+czCEEHmeF0UB/wMYoLOzs8vLy/v7+6urq+l0+vr66jcKgmDbdqfTkb91eHgoSZKiKLIs93q93d3dnZ2dvb29Xq8nSVK7rdPp/Ev+AzrT+8mIBZAUAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="TerrainHeight"
        title="TerrainHeight"
        src="/static/7aa449a5a60ab424b8fcf2bc7d7bbc44/9d904/TerrainHeight.png"
        srcset="/static/7aa449a5a60ab424b8fcf2bc7d7bbc44/9d904/TerrainHeight.png 168w"
        sizes="(max-width: 168px) 100vw, 168px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span></p>
<p>Also, while observing there is two more image data - one for visibility map and second for creep</p>
<h2>Debug commands</h2>
<p>Here an example of few debug commands which will allow us to control the game (aka recreate some situation)</p>
<div class="gatsby-highlight" data-language="cs"><pre class="language-cs"><code class="language-cs"><span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">SendAsync</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">Request</span> <span class="token punctuation">{</span> Debug <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">RequestDebug</span> <span class="token punctuation">{</span> Debug <span class="token operator">=</span>
<span class="token punctuation">{</span>
    <span class="token comment">// disable fog of war (now observation will show us all units on the map)</span>
    <span class="token keyword">new</span> <span class="token constructor-invocation class-name">DebugCommand</span> <span class="token punctuation">{</span> GameState <span class="token operator">=</span> DebugGameState<span class="token punctuation">.</span>ShowMap <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// will allow us to send commands to any unit on the map</span>
    <span class="token keyword">new</span> <span class="token constructor-invocation class-name">DebugCommand</span> <span class="token punctuation">{</span> GameState <span class="token operator">=</span> DebugGameState<span class="token punctuation">.</span>ControlEnemy <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// create 40 worker</span>
    <span class="token keyword">new</span> <span class="token constructor-invocation class-name">DebugCommand</span> <span class="token punctuation">{</span> CreateUnit <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">DebugCreateUnit</span> <span class="token punctuation">{</span> Owner <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> UnitType <span class="token operator">=</span> <span class="token number">104</span><span class="token punctuation">,</span> Quantity <span class="token operator">=</span> <span class="token number">40</span><span class="token punctuation">,</span> Pos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Point2D</span> <span class="token punctuation">{</span> X <span class="token operator">=</span> <span class="token number">40.0f</span><span class="token punctuation">,</span> Y <span class="token operator">=</span> <span class="token number">40.0f</span><span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">ReceiveAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<h2>Displaying debug info</h2>
<p>There are thre ways to have debug info right in the game</p>
<p>Send a chat message</p>
<div class="gatsby-highlight" data-language="cs"><pre class="language-cs"><code class="language-cs"><span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">SendAsync</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">Request</span> <span class="token punctuation">{</span> Action <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">RequestAction</span> <span class="token punctuation">{</span> Actions <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Action</span> <span class="token punctuation">{</span> ActionChat <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ActionChat</span> <span class="token punctuation">{</span> Channel <span class="token operator">=</span> ActionChat<span class="token punctuation">.</span>Types<span class="token punctuation">.</span>Channel<span class="token punctuation">.</span>Broadcast<span class="token punctuation">,</span> Message <span class="token operator">=</span> <span class="token string">"Hello"</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">ReceiveAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// { "action": { "result": [ "Success" ] }, "id": 0, "status": "in_game" }</span></code></pre></div>
<p>Draw a text on screen</p>
<div class="gatsby-highlight" data-language="cs"><pre class="language-cs"><code class="language-cs"><span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">SendAsync</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">Request</span>
<span class="token punctuation">{</span>
    Debug <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">RequestDebug</span>
    <span class="token punctuation">{</span>
        Debug <span class="token operator">=</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">new</span> <span class="token constructor-invocation class-name">DebugCommand</span>
            <span class="token punctuation">{</span>
                Draw <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">DebugDraw</span>
                <span class="token punctuation">{</span>
                    Text <span class="token operator">=</span>
                    <span class="token punctuation">{</span>
                        <span class="token keyword">new</span> <span class="token constructor-invocation class-name">DebugText</span>
                        <span class="token punctuation">{</span>
                            Text <span class="token operator">=</span> <span class="token string">"Hello"</span>
                        <span class="token punctuation">}</span><span class="token punctuation">,</span>
                        <span class="token keyword">new</span> <span class="token constructor-invocation class-name">DebugText</span>
                        <span class="token punctuation">{</span>
                            Color <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Color</span> <span class="token punctuation">{</span>R <span class="token operator">=</span> <span class="token number">255</span><span class="token punctuation">,</span> G <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> B <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
                            Size <span class="token operator">=</span> <span class="token number">24</span><span class="token punctuation">,</span> <span class="token comment">// 8 default</span>
                            VirtualPos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Point</span> <span class="token punctuation">{</span> X <span class="token operator">=</span> <span class="token number">0.5f</span><span class="token punctuation">,</span> Y <span class="token operator">=</span> <span class="token number">0.5f</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
                            Text <span class="token operator">=</span> <span class="token string">"Hello World"</span>
                        <span class="token punctuation">}</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1011px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/42c2b6bceb8c6013f7e7267dfd544a2c/6bfd0/DebugText.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAA7DAAAOwwHHb6hkAAADhUlEQVQ4y1WRS2hcVRyH765NMDMZk2YmNpOkmcmduffc58zcua+58+pMJi/Jq4logwZcqLQoota6EeMm4MKFBaGitGgRhNZNXbgQRCjuioog4kpXYi12od36yb2pERc/zovz/b//OdLtj+/w0/U/uPP5fc7tvUHYWuXM2efpr+xSqbVx/AXccIm6P8ANFg/nwSKN3hZBawmvuUAQDGjXW/juaaTbV37jx2t3+eXGn+xtvkZZa+B4KyhGk7IWJmtZ9ZOUREhJDSgp/uH4YF4s1SnIdYplF+mbq/f44aO7/Hz9by5d/AzVCNGtFrrdQbPaKHqDsghQtQaa2cKq9BBahCpCdLOF0JvoZhvNaKKIEOnr93/nu2t/cXX/S6JgE7PSQa90sJ0FhNlE0cIEVlb8BGLa3eTiv1G1KAFaldMoRoR064N73Lpynyc2X0E1Qzx/OQHGdrrVTi7E1WOTGCz0KAHJZTc5i/dKipcUa0d9pK8u/8qFvX2sSgen2sUyW+iVLobdPQLpRhfT7hy1FkMSuxiuHZrGHXjCRXrzuUustwdEbo+g1sWwmih6gBFbGi2C7gqPvXqWR1/YRjO6SVvxR6l6E0UNESJCaM3EfL7sID2zu49hNqhYESXVxXHbCKNOSfWo1AcsbJ3hxRvPsvvSGlapjiFXseQaemxZC1HrIaIaJQViAenDg2/x3BV8p0VxvobQXMpqjZLqU6kvEPQ2WH1yl42tp2hGa5hlj4riYxkRQveoVRsYRoDQD99X+v4TePviTVx/hWJc2QxRNI+yCDHsPlVnidPbb7F8/gvc5hpWrYdRbaOUXKqKhzZnIk8LivNV1Njw8ssHvP70AW1/FdvwqTsdZDV+8BamvYDXv0C4/g79nXfpt3YwzV5ipyoeA79PTXWwZBvH9OmGAyRXnCSfH8cUBnpBUC3N4+g2YWOdRrRDf+kci4+/x9Lep2xsn6de6+BYHVwjwNeq2LJFvVRguSbT0QtIk7mTaOosuimYmp7FLkyhzU0jyxaacLGNBrbdQzXa2GaIIWvMPjLLVDbPSOoED42Mk0rFGSOVHkeayecToKXPUTiVQ8xMkZvIc2wow9BwhuNDoxwfSjM0nObY0CiZ0SzDIyeYGJ8ik8mRSk+QSmePIs2eKqJaFXRNZiafpTA1Ry47zUhqgvRo7n9JpXOMPTxJOp1lLDNJejT7APhf/gF6u/3nukYm3gAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="DebugText"
        title="DebugText"
        src="/static/42c2b6bceb8c6013f7e7267dfd544a2c/6bfd0/DebugText.png"
        srcset="/static/42c2b6bceb8c6013f7e7267dfd544a2c/6f3f2/DebugText.png 256w,
/static/42c2b6bceb8c6013f7e7267dfd544a2c/01e7c/DebugText.png 512w,
/static/42c2b6bceb8c6013f7e7267dfd544a2c/6bfd0/DebugText.png 1011w"
        sizes="(max-width: 1011px) 100vw, 1011px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span></p>
<p>Note: text is persisten and will be overwriten on a next call</p>
<p>Draw some lines and boxes</p>
<div class="gatsby-highlight" data-language="cs"><pre class="language-cs"><code class="language-cs"><span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">SendAsync</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">Request</span>
<span class="token punctuation">{</span>
    Debug <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">RequestDebug</span>
    <span class="token punctuation">{</span>
        Debug <span class="token operator">=</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">new</span> <span class="token constructor-invocation class-name">DebugCommand</span>
            <span class="token punctuation">{</span>
                Draw <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">DebugDraw</span>
                <span class="token punctuation">{</span>
                    Lines <span class="token operator">=</span>
                    <span class="token punctuation">{</span>
                        <span class="token keyword">new</span> <span class="token constructor-invocation class-name">DebugLine</span>
                        <span class="token punctuation">{</span>
                            Color <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Color</span> <span class="token punctuation">{</span> R <span class="token operator">=</span> <span class="token number">255</span><span class="token punctuation">,</span> G <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> B <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
                            Line <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Line</span>
                            <span class="token punctuation">{</span>
                                P0 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Point</span> <span class="token punctuation">{</span> X <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> Y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> Z <span class="token operator">=</span> <span class="token number">20</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
                                P1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Point</span> <span class="token punctuation">{</span> X <span class="token operator">=</span> <span class="token number">255</span><span class="token punctuation">,</span> Y <span class="token operator">=</span> <span class="token number">255</span><span class="token punctuation">,</span> Z <span class="token operator">=</span> <span class="token number">20</span> <span class="token punctuation">}</span>
                            <span class="token punctuation">}</span>
                        <span class="token punctuation">}</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span>
                    Boxes <span class="token operator">=</span>
                    <span class="token punctuation">{</span>
                        <span class="token keyword">new</span> <span class="token constructor-invocation class-name">DebugBox</span>
                        <span class="token punctuation">{</span>
                            Color <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Color</span> <span class="token punctuation">{</span> R <span class="token operator">=</span> <span class="token number">255</span><span class="token punctuation">,</span> G <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> B <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
                            Min <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Point</span> <span class="token punctuation">{</span> X <span class="token operator">=</span> <span class="token number">24.0f</span><span class="token punctuation">,</span> Y <span class="token operator">=</span> <span class="token number">24.0f</span><span class="token punctuation">,</span> Z <span class="token operator">=</span> <span class="token number">10.0f</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
                            Max <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Point</span> <span class="token punctuation">{</span> X <span class="token operator">=</span> <span class="token number">28.0f</span><span class="token punctuation">,</span> Y <span class="token operator">=</span> <span class="token number">28.0f</span><span class="token punctuation">,</span> Z <span class="token operator">=</span> <span class="token number">16.0f</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
                        <span class="token punctuation">}</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>Same story as with text, drawings wont dissapear until next drawn</p>
<p>Points are calculating from left bottom corner, and should be in range of map size, e.g. if we are on map with size 168 and 200 then points must be within this numbers</p>
<p>It was fun holidays, there is so much to discover, need to save it somewhere in <a href="https://github.com/mac2000/StarCraft">repo</a></p></div></main><footer><a href="#top">top</a><a href="/">home</a><a href="/search">search</a></footer></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/starcraft-api";window.___webpackCompilationHash="356180f10c55a5b2052f";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-b4bb882d10635d85fa25.js"],"app":["/app-98475b819971087d4b7e.js"],"component---src-pages-404-js":["/component---src-pages-404-js-2652c435d8decd31b8ef.js"],"component---src-pages-index-js":["/component---src-pages-index-js-59ea4a114c2918516395.js"],"component---src-pages-search-js":["/component---src-pages-search-js-078619e3aef857102623.js"],"component---src-templates-note-js":["/component---src-templates-note-js-b005c02681f20ea28edd.js"]};/*]]>*/</script><script src="/polyfill-b4bb882d10635d85fa25.js" nomodule=""></script><script src="/app-98475b819971087d4b7e.js" async=""></script><script src="/framework-2ce620c91826a79f925c.js" async=""></script><script src="/webpack-runtime-6771fb13f8b0672ecdbd.js" async=""></script></body></html>