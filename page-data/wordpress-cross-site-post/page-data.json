{"componentChunkName":"component---src-templates-note-js","path":"/wordpress-cross-site-post/","result":{"data":{"remark":{"fields":{"path":"wordpress-cross-site-post"},"meta":{"title":""},"headings":[{"value":"WordPress cross site post"}],"html":"<h1>WordPress cross site post</h1>\n<p>Programmaticaly create post from one site on another, with custom fields.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n<span class=\"token keyword\">include</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'./wp-load.php'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">include_once</span><span class=\"token punctuation\">(</span><span class=\"token constant\">ABSPATH</span> <span class=\"token operator\">.</span> <span class=\"token constant\">WPINC</span> <span class=\"token operator\">.</span> <span class=\"token string single-quoted-string\">'/class-IXR.php'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token variable\">$client</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">IXR_Client</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'http://cross2.wp.local.com/xmlrpc.php'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token variable\">$post</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span>\n    <span class=\"token string single-quoted-string\">'post_type'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'post'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string single-quoted-string\">'title'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'Automaticaly created post from cross 1'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string single-quoted-string\">'description'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'Automaticaly created post from cross 1 content goes here'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string single-quoted-string\">'categories'</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'Task'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string single-quoted-string\">'custom_fields'</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token variable\">$post</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'custom_fields'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'key'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'Price'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'value'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'22'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$post</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'custom_fields'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'key'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'Good'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'value'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'YES'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token variable\">$client</span><span class=\"token operator\">-></span><span class=\"token function\">query</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'metaWeblog.newPost'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'admin'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'PASSWORD'</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$post</span><span class=\"token punctuation\">,</span> <span class=\"token constant boolean\">TRUE</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">//die('Something went wrong - '.$client->getErrorCode().' : '.$client->getErrorMessage());</span>\n    <span class=\"token comment\">//TODO: redirect here - something wrong</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token variable\">$response</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$client</span><span class=\"token operator\">-></span><span class=\"token function\">getResponse</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">//TODO: all ok</span>\n<span class=\"token punctuation\">}</span></span></code></pre></div>"}},"pageContext":{"id":"8dcc428e-4ecf-5f8b-b953-4621f3e24a19"}},"staticQueryHashes":[],"slicesMap":{}}