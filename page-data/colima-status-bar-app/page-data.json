{"componentChunkName":"component---src-templates-note-js","path":"/colima-status-bar-app/","result":{"data":{"remark":{"fields":{"path":"colima-status-bar-app"},"meta":{"title":""},"headings":[{"value":"colima status bar app"}],"html":"<h1>colima status bar app</h1>\n<p>Decided to give a try to <a href=\"https://github.com/abiosoft/colima\">colima</a></p>\n<p>But somehow still missing some status bar icon displaying if it is running or not</p>\n<p>Which immediatelly become my weekend fun</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 704px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/bf0d989d5de380e534b6bbc80f102c93/5ebd7/statusbar.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 30.46875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAABDUlEQVR42o2QS0vDUBCF8+Oah02kiU1y85AIFSqESLuom7quUKF5kLqqlUoJ1EWIjYH8vGPnQoordXGYOzOH71xGECURpJ7Yg6zImD/OEd1H8K99KBcKjCuDzxlj8HwPfbWP0e0I2qWGyXQCSZYQBAGCm4BzhIE+gG7o3ECL9csacRxjFa+wfF4iTVPMHmYgH3MYOj9V0zJ5pVCSfnoLlm3BZjY3RVGEsiyxfdui/qpxrI9o2xZ5nkPVVO4jfycC/uxJQjekpDAMUVUVDh8HVJ8VhzdNgyRJzkDy/6YzkH44vhtj87pBlmXYF3vs3ncoigKLpwU/yb+BnYbmEK7n8uM7rsNFPQXS7i8YAb8Br3YDKG8ewncAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Colima status bar app\"\n        title=\"\"\n        src=\"/static/bf0d989d5de380e534b6bbc80f102c93/5ebd7/statusbar.png\"\n        srcset=\"/static/bf0d989d5de380e534b6bbc80f102c93/6f3f2/statusbar.png 256w,\n/static/bf0d989d5de380e534b6bbc80f102c93/01e7c/statusbar.png 512w,\n/static/bf0d989d5de380e534b6bbc80f102c93/5ebd7/statusbar.png 704w\"\n        sizes=\"(max-width: 704px) 100vw, 704px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>The goal is not the app itself but probably attempt to figure out how to build such apps in general</p>\n<p>And indeed that is quite easy, except few caweats, for you to run shell commands you need:</p>\n<p><strong>App Sandbox</strong></p>\n<p>Under target signing and capabilities - remove app sandbox block</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e37734c03a51f950bcce35ca36249e98/669cd/appsandbox.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 59.765625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAACK0lEQVR42o2TzW7aQBDH/QZ5kfA4HKo2BXFAkZC4cOIWH9qXyqVIVRRaQK4cPpQE2QYb4xoDtll/7ZrpzOZDpFXVrjxaPOP5zX92B+XHl+vK46z/yTGmV8v5WDXmD6rl+qrluKplGarnuarv+9KWy6U6N+bq0nFUPwjQfIx7quu6V7Ztf9Y07Vy57k9q2jKDr/esvHlIIIhzKAGgOAIIeLLTdTweT1+AJSlkhZCfYcEL5fb76ONAm8DNQM8njzZfeVteloLjw70g4uEh4Vmec84FL4oC/YILtLIsOS2EcNM0syAIYDgcflAGg0HNsuZwP5uU9sIElA/7fQj4LUkA0hPGB9hut1AUORTiCOWzSCwAlrWA1Wol0iyHb5p+ofT7/RqeAywWi9IwDIjjCDspARVAmqYI30sY7XmeQ5oVuBeyYJZlYJqYE0WCaujj2RNwvV5jJUsCGWOvZ0W/d7sdhGEok2WRHEESWECBBWxnBc5qLdI0g9uh/ncgJROE2iKlBKX9dJFKOruf/kZQbDz+B/Blp5bJ/+aGn4FbBGJc4MUhcPx/wJfzO/WfKpRA7EYC6ZY3mw04jlPiCECSJH/MGwGpELV12jaOj4zhcQiCS2Cv13uv6/pxOp3Gd3c6s12PRXGM+QeGyQyVMZwChv8Uhsksxhj5URGLoojhyDActYi6HI1G75RqtXpWr9crjUbjnOzysn3e6XTeWLfblfa7v91uv1qr1ao0m82zX1kRRZzIswkDAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"App Sandobx\"\n        title=\"\"\n        src=\"/static/e37734c03a51f950bcce35ca36249e98/2bef9/appsandbox.png\"\n        srcset=\"/static/e37734c03a51f950bcce35ca36249e98/6f3f2/appsandbox.png 256w,\n/static/e37734c03a51f950bcce35ca36249e98/01e7c/appsandbox.png 512w,\n/static/e37734c03a51f950bcce35ca36249e98/2bef9/appsandbox.png 1024w,\n/static/e37734c03a51f950bcce35ca36249e98/71c1d/appsandbox.png 1536w,\n/static/e37734c03a51f950bcce35ca36249e98/a878e/appsandbox.png 2048w,\n/static/e37734c03a51f950bcce35ca36249e98/669cd/appsandbox.png 3024w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p><strong>User Script Sandboxing</strong></p>\n<p>Under project build settings turn off user script sandboxing</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/34973761221a4fc0909ee7230f11647f/669cd/userscriptsandboxing.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 59.765625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAACY0lEQVR42m1TzU7bQBDOG/Ai4XE4VIWCOKBISLlw4oYP7XMVVaoamoSAkwJNg3Ecx3YSx/Y6a3u9tr/OOijqDyONdveb8Te/bnS/ft7/8Xj7cTweXz09PWmTyVgzbE8zLEebGIbmeI4W+Ett6fuaZVlkn2iWbdVvn3DP8zTHca5ms9mnwWDQbHzp3B1bcxee65ZkBE8yFABKbKUilRXelqoi/xRZXqhPQAGPGt/7/Q939/cgdmGaprRsVzIWyTThMggCmUsp3VUoN5uNLErIPM+lEKI+syyTRCJfXozM9330er3DRrfbPSYADw8PJRFisVgiTTMKXiEMQ6zXa+S5qBMKGUeWide8QXgO05xiPp8XKeE3A/2o0el0jlWp0+m0NAwDlEntXJYlKBMqKUFBqakAQuQ1ru5KlF19EzNWKEQfPW4JXdelSGZNyPkrYSERRwEYaUF3JTFPIdJk10KFz+w5bMctVFXfevr/hJsNr515DphejOFPC26Yw4sKPNtrjC0f87WAS+9FJOD7ayyWKyJMMRq9SbjN0FykuPkV43lZQp9JdA2B26nSHL0XUb+HVko99lWfCxoQEY7eKpnvSopZiIVrU5nbIAmVVZZyZ6cFgJruX4RqyqvVCrZtl7QCSJLkdcUqpOTE4hi0OjWW0VCklH/0sKg3IYqiQuE14fX19Xtd1ytam3g41PnM8Xgcx6SMU3QehCGnfeTUCh5EGzo5DT7h1DPOGOO0Mpz+FKaq7Pf77xoHBwd7Jycn+6enp02lrVa7eXFx0by8vKzPVqtVq7r/q+12e6fn5+f7Z2dne78B4KlBT3Ws8y8AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"User Script Sandboxing\"\n        title=\"\"\n        src=\"/static/34973761221a4fc0909ee7230f11647f/2bef9/userscriptsandboxing.png\"\n        srcset=\"/static/34973761221a4fc0909ee7230f11647f/6f3f2/userscriptsandboxing.png 256w,\n/static/34973761221a4fc0909ee7230f11647f/01e7c/userscriptsandboxing.png 512w,\n/static/34973761221a4fc0909ee7230f11647f/2bef9/userscriptsandboxing.png 1024w,\n/static/34973761221a4fc0909ee7230f11647f/71c1d/userscriptsandboxing.png 1536w,\n/static/34973761221a4fc0909ee7230f11647f/a878e/userscriptsandboxing.png 2048w,\n/static/34973761221a4fc0909ee7230f11647f/669cd/userscriptsandboxing.png 3024w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p><strong>Shell</strong></p>\n<p>While running shell script do not forget to pass <code class=\"language-text\">-l</code> flag, so user profile will be loaded, otherwise you will catch neverending errors like <code class=\"language-text\">/bin/zsh colima not found</code></p>\n<p><strong>Dock icon</strong></p>\n<p>To disable dock icon add application is agent property to target info and set it to NO</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b00ae5e4576094434b4b5f683ef9910b/669cd/applicationagent.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 59.765625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAACI0lEQVR42o2SzW7aQBDH/QZ5EXgcDlWTgjhwicSFF4gP7XOVS1UaIA4WUBQhY8DYjj+w19hee3c9HRscRa2IOtLf0mit33z8R3r+8b25WDx9Xb28PKxWK1nTNVk3PVk3DFnf7WTbcWTnojJfa2vZMA3ZOx5lx3Nk27Zl0zQf9vv9N0VRGtJo/NzeGhZYlinsVwdyXkAOAAJVFEWlMs7fvwLf4iQFmnNeprvd7k56fJx+mc1moChPmb7dsYCcGL4xlueMEMLCIGRRdGJZzpngnOWMMUopE0IwjjlC2GazoZ7nwWQyuZXG43F7s9FguVyK7XYLr44DpziuGuCMwcHYQxKfqlwIDlmeQRAcgdIUEAi6rsPhcOApzeCXot5Jo9GojXsoHwRWq37i5wlwFAar9QbcI4GU4XiUQXiiYDo+Fk2q/zRNg4gQXq5Enf8+Ay3LAmy7AtY7w5nB9gisth7s3QRsIsAKGZhBBrqTAElyKLDjvXEAw7R4mlL4OVGvA+MEIbaF1cPagXfW1EUZeJ6Pa3IRmMJ8/gEwQSCaAhxzcXG7Vp2XQB/N8H2f0yxD4PxfYB3o4hv8Wpw7vAApPQNLl13XBTxMgQf67sQ+hlVXgKYEQQBhGPISXgGHw+FnVVWLxWIRLZbL2A9IHEUEV5jEuJerwo5iXEmMJxNjI6SccjqdfpJardZNp9Npdrvdxi2q3x80BoP/U7/ff9P9/X2z1+vd/AEVU0cN+vIuOAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Application agent\"\n        title=\"\"\n        src=\"/static/b00ae5e4576094434b4b5f683ef9910b/2bef9/applicationagent.png\"\n        srcset=\"/static/b00ae5e4576094434b4b5f683ef9910b/6f3f2/applicationagent.png 256w,\n/static/b00ae5e4576094434b4b5f683ef9910b/01e7c/applicationagent.png 512w,\n/static/b00ae5e4576094434b4b5f683ef9910b/2bef9/applicationagent.png 1024w,\n/static/b00ae5e4576094434b4b5f683ef9910b/71c1d/applicationagent.png 1536w,\n/static/b00ae5e4576094434b4b5f683ef9910b/a878e/applicationagent.png 2048w,\n/static/b00ae5e4576094434b4b5f683ef9910b/669cd/applicationagent.png 3024w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Sample app is so small and easy that probably there is no need for any description</p>\n<p><div class=\"gatsby-highlight\" data-language=\"swift\"><pre class=\"language-swift\"><code class=\"language-swift\"><span class=\"token keyword\">import</span> <span class=\"token class-name\">SwiftUI</span>\n\n<span class=\"token attribute atrule\">@main</span>\n<span class=\"token keyword\">struct</span> <span class=\"token class-name\">ColimaMenuApp</span><span class=\"token punctuation\">:</span> <span class=\"token class-name\">App</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token attribute atrule\">@State</span> <span class=\"token keyword\">private</span> <span class=\"token keyword\">var</span> changing<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Bool</span> <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span>\n    <span class=\"token attribute atrule\">@State</span> <span class=\"token keyword\">private</span> <span class=\"token keyword\">var</span> running<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Bool</span> <span class=\"token operator\">=</span> <span class=\"token function\">colima</span><span class=\"token punctuation\">(</span><span class=\"token string-literal\"><span class=\"token string\">\"status\"</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">contains</span><span class=\"token punctuation\">(</span><span class=\"token string-literal\"><span class=\"token string\">\"colima is running\"</span></span><span class=\"token punctuation\">)</span>\n    \n    <span class=\"token keyword\">var</span> body<span class=\"token punctuation\">:</span> <span class=\"token keyword\">some</span> <span class=\"token class-name\">Scene</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">MenuBarExtra</span><span class=\"token punctuation\">(</span><span class=\"token string-literal\"><span class=\"token string\">\"Colima\"</span></span><span class=\"token punctuation\">,</span> systemImage<span class=\"token punctuation\">:</span> <span class=\"token string-literal\"><span class=\"token string\">\"shippingbox\"</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token class-name\">AppMenu</span><span class=\"token punctuation\">(</span>changing<span class=\"token punctuation\">:</span> $changing<span class=\"token punctuation\">,</span> running<span class=\"token punctuation\">:</span> $running<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">struct</span> <span class=\"token class-name\">AppMenu</span><span class=\"token punctuation\">:</span> <span class=\"token class-name\">View</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token attribute atrule\">@Binding</span> <span class=\"token keyword\">var</span> changing<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Bool</span>\n    <span class=\"token attribute atrule\">@Binding</span> <span class=\"token keyword\">var</span> running<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Bool</span>\n    \n    <span class=\"token keyword\">var</span> label<span class=\"token punctuation\">:</span> <span class=\"token class-name\">String</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> changing <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span> <span class=\"token string-literal\"><span class=\"token string\">\"Applying...\"</span></span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">return</span> running <span class=\"token operator\">?</span> <span class=\"token string-literal\"><span class=\"token string\">\"Stop\"</span></span> <span class=\"token punctuation\">:</span> <span class=\"token string-literal\"><span class=\"token string\">\"Start\"</span></span>\n    <span class=\"token punctuation\">}</span>\n    \n    <span class=\"token keyword\">var</span> body<span class=\"token punctuation\">:</span> <span class=\"token keyword\">some</span> <span class=\"token class-name\">View</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">Button</span><span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n            changing <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span>\n            <span class=\"token class-name\">DispatchQueue</span><span class=\"token punctuation\">.</span><span class=\"token function\">global</span><span class=\"token punctuation\">(</span>qos<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">.</span>background<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">async</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token function\">colima</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>running <span class=\"token operator\">?</span> <span class=\"token string-literal\"><span class=\"token string\">\"stop\"</span></span> <span class=\"token punctuation\">:</span> <span class=\"token string-literal\"><span class=\"token string\">\"start\"</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n                <span class=\"token class-name\">DispatchQueue</span><span class=\"token punctuation\">.</span>main<span class=\"token punctuation\">.</span><span class=\"token keyword\">async</span> <span class=\"token punctuation\">{</span>\n                    changing <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span>\n                    running<span class=\"token punctuation\">.</span><span class=\"token function\">toggle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">}</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> label<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token class-name\">Text</span><span class=\"token punctuation\">(</span>label<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">keyboardShortcut</span><span class=\"token punctuation\">(</span><span class=\"token string-literal\"><span class=\"token string\">\"s\"</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">disabled</span><span class=\"token punctuation\">(</span>changing<span class=\"token punctuation\">)</span>\n        \n        <span class=\"token class-name\">Divider</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n        <span class=\"token class-name\">Button</span><span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token class-name\">NSApplication</span><span class=\"token punctuation\">.</span>shared<span class=\"token punctuation\">.</span><span class=\"token function\">terminate</span><span class=\"token punctuation\">(</span><span class=\"token nil constant\">nil</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> label<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token class-name\">Text</span><span class=\"token punctuation\">(</span><span class=\"token string-literal\"><span class=\"token string\">\"Quit\"</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">keyboardShortcut</span><span class=\"token punctuation\">(</span><span class=\"token string-literal\"><span class=\"token string\">\"q\"</span></span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">func</span> <span class=\"token function-definition function\">colima</span><span class=\"token punctuation\">(</span><span class=\"token omit keyword\">_</span> command<span class=\"token punctuation\">:</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span> <span class=\"token class-name\">String</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token function\">runShellCommand</span><span class=\"token punctuation\">(</span>command<span class=\"token punctuation\">:</span> <span class=\"token string-literal\"><span class=\"token string\">\"colima </span><span class=\"token interpolation-punctuation punctuation\">\\(</span><span class=\"token interpolation\">command</span><span class=\"token interpolation-punctuation punctuation\">)</span><span class=\"token string\">\"</span></span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">func</span> <span class=\"token function-definition function\">text</span><span class=\"token punctuation\">(</span><span class=\"token omit keyword\">_</span> pipe<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Pipe</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span> <span class=\"token class-name\">String</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">(</span>decoding<span class=\"token punctuation\">:</span> pipe<span class=\"token punctuation\">.</span>fileHandleForReading<span class=\"token punctuation\">.</span><span class=\"token function\">readDataToEndOfFile</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">as</span><span class=\"token punctuation\">:</span> UTF8<span class=\"token punctuation\">.</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">trimmingCharacters</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">in</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">.</span>whitespacesAndNewlines<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">func</span> <span class=\"token function-definition function\">runShellCommand</span><span class=\"token punctuation\">(</span>command<span class=\"token punctuation\">:</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span> <span class=\"token class-name\">String</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> process <span class=\"token operator\">=</span> <span class=\"token class-name\">Process</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">let</span> stdout <span class=\"token operator\">=</span> <span class=\"token class-name\">Pipe</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">let</span> stderr <span class=\"token operator\">=</span> <span class=\"token class-name\">Pipe</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    process<span class=\"token punctuation\">.</span>executableURL <span class=\"token operator\">=</span> <span class=\"token function\">URL</span><span class=\"token punctuation\">(</span>fileURLWithPath<span class=\"token punctuation\">:</span> <span class=\"token class-name\">ProcessInfo</span><span class=\"token punctuation\">.</span>processInfo<span class=\"token punctuation\">.</span>environment<span class=\"token punctuation\">[</span><span class=\"token string-literal\"><span class=\"token string\">\"SHELL\"</span></span><span class=\"token punctuation\">]</span><span class=\"token operator\">!</span><span class=\"token punctuation\">)</span>\n    process<span class=\"token punctuation\">.</span>arguments <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string-literal\"><span class=\"token string\">\"-l\"</span></span><span class=\"token punctuation\">,</span> <span class=\"token string-literal\"><span class=\"token string\">\"-c\"</span></span><span class=\"token punctuation\">,</span> command<span class=\"token punctuation\">]</span>\n    process<span class=\"token punctuation\">.</span>standardOutput <span class=\"token operator\">=</span> stdout\n    process<span class=\"token punctuation\">.</span>standardError <span class=\"token operator\">=</span> stderr\n    process<span class=\"token punctuation\">.</span>environment <span class=\"token operator\">=</span> <span class=\"token class-name\">ProcessInfo</span><span class=\"token punctuation\">.</span>processInfo<span class=\"token punctuation\">.</span>environment\n    \n    <span class=\"token keyword\">do</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">try</span> process<span class=\"token punctuation\">.</span><span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">let</span> err <span class=\"token operator\">=</span> <span class=\"token function\">text</span><span class=\"token punctuation\">(</span>stderr<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">if</span> err <span class=\"token operator\">!=</span> <span class=\"token string-literal\"><span class=\"token string\">\"\"</span></span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span> err\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">return</span> <span class=\"token function\">text</span><span class=\"token punctuation\">(</span>stdout<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">let</span> err <span class=\"token operator\">=</span> <span class=\"token function\">text</span><span class=\"token punctuation\">(</span>stderr<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">if</span> err <span class=\"token operator\">!=</span> <span class=\"token string-literal\"><span class=\"token string\">\"\"</span></span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span> err\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">return</span> error<span class=\"token punctuation\">.</span>localizedDescription\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div></p>\n<p>With this in place, technically quadrillion of other useful things may be done, for repeated commands</p>\n<p>And unfortunately there is no way to share it via app store, because of app sandboxing, so only testflight internal testing</p>\n<p>Links that helped:</p>\n<ul>\n<li><a href=\"https://blog.schurigeln.com/menu-bar-apps-swift-ui/\">Creating Menu Bar Apps in SwiftUI for macOS Ventura</a></li>\n<li><a href=\"https://sarunw.com/posts/swiftui-menu-bar-app/\">Create a mac menu bar app in SwiftUI with MenuBarExtra</a></li>\n</ul>"}},"pageContext":{"id":"423ae249-8a59-5678-b8ee-9f3fb78eff54"}},"staticQueryHashes":[],"slicesMap":{}}