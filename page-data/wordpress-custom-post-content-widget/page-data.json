{"componentChunkName":"component---src-templates-note-js","path":"/wordpress-custom-post-content-widget/","result":{"data":{"remark":{"fields":{"path":"wordpress-custom-post-content-widget"},"meta":{"title":""},"headings":[{"value":"WordPress custom post content widget"}],"html":"<h1>WordPress custom post content widget</h1>\n<h2>Задача</h2>\n<p>В WP необходимо создать отдельный тип записей и виджет для вывода их контента в сайтбаре. Виджет при добавлении в сайт будет предлагать в виде дропдауна список кастомных записей для выбора.</p>\n<h2>Шаг 1. Создание кастомного типа</h2>\n<p>В <code class=\"language-text\">functions.php</code> необходимо прописать следующее:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token keyword\">function</span> <span class=\"token function-definition function\">register_post_type_txt</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">register_post_type</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'txt'</span><span class=\"token punctuation\">,</span><span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span>\n            <span class=\"token string single-quoted-string\">'label'</span> <span class=\"token operator\">=></span> <span class=\"token function\">__</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'Text'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string single-quoted-string\">'public'</span> <span class=\"token operator\">=></span> <span class=\"token constant boolean\">true</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string single-quoted-string\">'supports'</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'title'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'editor'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token function\">add_action</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'init'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'register_post_type_txt'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>После чего в админке появится новосозданный кастомный тип записей</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 449px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a6f51f1b1aa2d26de5bbc3d4076ca9b6/053a9/image01.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 70.703125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAACRUlEQVR42m2T607jMBCF8/4PhpAAVaVoEaV0c7Edx7n5krRxCpzdmZBVF/FjZDvxHH9zxk6s7SHKCrLuoOoWznuEEOC9xzRNcM6hqWsopVBqjaqqMI4jnLXoug7WWg7KiTEi6boWSlcoTAthGlj3vyAlheChtcbh8IY0/c3/S6WQ5zkfpJRE0zSLICUSVe8DQhj49GEYMIwjpumMLMvRtC0ulws+Pz/x8fHBibS+jnmeGSDp2haZLPErlSh0De8dl9n3FqfTiQlpfT6fOegbJf4UTFgbg9c0w3OmsDsKbN8KSNPAO8e0xhgIIbg0rSukaQohJAuTwHfRpK4NjnmBtDQcvbUcZPRKQ2QTBSV9ka5E67hGYkyFTCrsixIvuULd9ky3Cv7bfLkgUvL7+zL/QWwRrComPMoKr0W5lOvJwx6ncUSkJliLWBSIQiDWNWLfIxIliZDolXDSNg2OWYFXofGSl+zjm9Dc+THOiM4heo/4/Iz5/h7zZsNzElsFp2tC2/fIywoHVaPpLHfU0T3UGtPTE2JVLaXRxaVxGDBR2WQHzb9RJqWS2O/32DzukBcCZIFuGsjdDiPRAIhSIiqFuNlgfnhATFPMd3dsw0SWXFEmsiiwebjH0+MWUgjosuSbn2YZ3DBgJpr9nkViWSK2LWLXLURESS9qpSRBehWHrICm7p7O6PyA87Rs4KZQR3c7xO0W880NW8AH0Pr2lg9iC1ZBHwJ0H2BsQOsCTO9xOi+e0H1js0NYfKQGffkYjVnW193+K/gHIrwou4UVuksAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"screenshot\"\n        title=\"\"\n        src=\"/static/a6f51f1b1aa2d26de5bbc3d4076ca9b6/053a9/image01.png\"\n        srcset=\"/static/a6f51f1b1aa2d26de5bbc3d4076ca9b6/6f3f2/image01.png 256w,\n/static/a6f51f1b1aa2d26de5bbc3d4076ca9b6/053a9/image01.png 449w\"\n        sizes=\"(max-width: 449px) 100vw, 449px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Подробнее о создании кастомных полей: <a href=\"http://codex.wordpress.org/Function_Reference/register_post_type\">register_post_type</a></p>\n<h2>Шаг 2. Вывод содержимого поста в теме</h2>\n<p>Где угодно в файлах темы (я для примера прописал в <code class=\"language-text\">header.php</code>) прописать следующее:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n<span class=\"token variable\">$postId</span> <span class=\"token operator\">=</span> <span class=\"token number\">50</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$queried_post</span> <span class=\"token operator\">=</span> <span class=\"token function\">get_post</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$postId</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$title</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$queried_post</span><span class=\"token operator\">-></span><span class=\"token property\">post_title</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$content</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$queried_post</span><span class=\"token operator\">-></span><span class=\"token property\">post_content</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">echo</span> <span class=\"token function\">_e</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$title</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">echo</span> <span class=\"token string single-quoted-string\">'&lt;br />'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">echo</span> <span class=\"token function\">_e</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$content</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token delimiter important\">?></span></span></code></pre></div>\n<p>Примечание: в функцию <code class=\"language-text\">get_post</code> - обязательно должна передаваться переменная, иначе получим эксепшн.</p>\n<p>Подробнее о ф-ии <a href=\"http://codex.wordpress.org/Function_Reference/get_post\">get_post</a></p>\n<p>Примечание: в проекте для которого все это делалось, юзается плагин <em>qTranslate</em> для создания многоязычного сайта, этот плагин записывает через комменты все переводы в один пост, для того чтобы отобразить нужный, необходимо прогнать текст через ф-ию <code class=\"language-text\">_e()</code></p>\n<p>Эта заготовка будет использоваться плагином, для вывода содержимого поста.</p>\n<h2>Шаг 3. Создание кастомных сайтбаров</h2>\n<p>В файле <code class=\"language-text\">functions.php</code> необходимо прописать следующее:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span> <span class=\"token function\">function_exists</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'register_sidebar'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token function\">register_sidebar</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span>\n        <span class=\"token string single-quoted-string\">'name'</span>  <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'home_page_text'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string single-quoted-string\">'before_widget'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">''</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string single-quoted-string\">'after_widget'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">''</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string single-quoted-string\">'before_title'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">''</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string single-quoted-string\">'after_title'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">''</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Тем самым мы добавляем новый сайтбар для размещения виджетов, соотв. в дальнейшем плодим этих сайдтбаров, столько, сколько нам надо.</p>\n<p>После добавления этого кода на странице виджетов должен появиться новый сайтбар:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 721px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/17bc8bc75b17e98c3bcee2cdc7e12c78/01dae/image11.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 40.23437500000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAABRklEQVR42oWS3Y6CMBCF+/5vY2JUoqIXXnhvojHG6BoWy0+hRbCA0rOZWTHZG7fJF0qnPZwzVOR5DiLLMmRaIysKfub0nmVcU0pB05rWWC6XWCx8+L6P+XwOz/OY0WiE9XoNIaVEGIZIlEJyOiHd7hAHAaI4RpQkoLo2BqVSyA8HeOMxH57OZphMJhgOh8xgMMBqtYJI0xTGGDRti8YY1Nst2uMRCL/h8hzOOfB4PtHe7+z6er2iLEumqiqG5nVdQ5zPXyDRSEp2RNFsEAC7HbDfA48HSJKE79ZynQz8adULqonCGBhteJPRmg+11gLkbrOBk5INuq6DtRa3243pHfbQGjkVcRxzn6IoYiTFIcGigLtc4MryLUiRmqb5iOjzV69+0JdqW/+KvIBzHJkE/0OQK2oyuSToalA0Fum690/pBcnFJ8EfxVhb5Mie7ZoAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"screenshot\"\n        title=\"\"\n        src=\"/static/17bc8bc75b17e98c3bcee2cdc7e12c78/01dae/image11.png\"\n        srcset=\"/static/17bc8bc75b17e98c3bcee2cdc7e12c78/6f3f2/image11.png 256w,\n/static/17bc8bc75b17e98c3bcee2cdc7e12c78/01e7c/image11.png 512w,\n/static/17bc8bc75b17e98c3bcee2cdc7e12c78/01dae/image11.png 721w\"\n        sizes=\"(max-width: 721px) 100vw, 721px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h2>Шаг 4. Вывод кастомных сайтбаров</h2>\n<p>Где угодно в файлах темы (я для примера пробывал в <code class=\"language-text\">header.php</code>) прописываем следующее:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> <span class=\"token function\">dynamic_sidebar</span><span class=\"token punctuation\">(</span> <span class=\"token string single-quoted-string\">'home_page_text'</span> <span class=\"token punctuation\">)</span><span class=\"token delimiter important\">?></span></span></code></pre></div>\n<p>Эта ф-ия выведет содержимое кастомного сайтбара, подробнее: <a href=\"http://codex.wordpress.org/Function_Reference/dynamic_sidebar\">dynamic_sidebar</a></p>\n<h2>Шаг 5. Создание виджета (собираем все в кучу)</h2>\n<p>Описание <a href=\"http://www.lonewolfdesigns.co.uk/create-wordpress-widgets/\">create wordpress widgets</a></p>\n<p>Код <code class=\"language-text\">/wp-content/plugins/custom-post-type-widget.php</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n<span class=\"token comment\">/**\n    * Plugin Name: Custom Post Type Widget\n    * Plugin URI: http://photowizard.com\n    * Description: Widget to display custom post content\n    * Version: 0.1\n    * Author: mac\n    * Author URI: http://photowizard.com.ua\n    */</span>\n\n<span class=\"token function\">add_action</span><span class=\"token punctuation\">(</span> <span class=\"token string single-quoted-string\">'widgets_init'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'widgets_init_custom_post_type_widget'</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function-definition function\">widgets_init_custom_post_type_widget</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">register_widget</span><span class=\"token punctuation\">(</span> <span class=\"token string single-quoted-string\">'Custom_Post_Type_Widget'</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name-definition class-name\">Custom_Post_Type_Widget</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">WP_Widget</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">function</span> <span class=\"token function-definition function\">Custom_Post_Type_Widget</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword static-context\">parent</span><span class=\"token operator\">::</span><span class=\"token function\">WP_Widget</span><span class=\"token punctuation\">(</span><span class=\"token constant boolean\">false</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$name</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'Custom_Post_Type_Widget'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">function</span> <span class=\"token function-definition function\">widget</span><span class=\"token punctuation\">(</span> <span class=\"token variable\">$args</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$instance</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">extract</span><span class=\"token punctuation\">(</span> <span class=\"token variable\">$args</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token variable\">$txtId</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">isset</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$instance</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'txtId'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> <span class=\"token variable\">$instance</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'txtId'</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">:</span> <span class=\"token constant boolean\">false</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">echo</span> <span class=\"token variable\">$before_widget</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span> <span class=\"token variable\">$txtId</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token variable\">$queried_post</span> <span class=\"token operator\">=</span> <span class=\"token function\">get_post</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$txtId</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token variable\">$content</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$queried_post</span><span class=\"token operator\">-></span><span class=\"token property\">post_content</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">echo</span> <span class=\"token function\">_e</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$content</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">echo</span> <span class=\"token variable\">$after_widget</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">function</span> <span class=\"token function-definition function\">update</span><span class=\"token punctuation\">(</span> <span class=\"token variable\">$new_instance</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$old_instance</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token variable\">$instance</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$old_instance</span><span class=\"token punctuation\">;</span>\n        <span class=\"token variable\">$instance</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'txtId'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$new_instance</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'txtId'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token variable\">$instance</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">function</span> <span class=\"token function-definition function\">form</span><span class=\"token punctuation\">(</span> <span class=\"token variable\">$instance</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token variable\">$txtId</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">isset</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$instance</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'txtId'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> <span class=\"token variable\">$instance</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'txtId'</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n        <span class=\"token variable\">$opts</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">''</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">wp_reset_query</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token variable\">$my_query</span> <span class=\"token operator\">=</span> <span class=\"token constant\">null</span><span class=\"token punctuation\">;</span>\n        <span class=\"token variable\">$my_query</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">WP_Query</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span>\n            <span class=\"token string single-quoted-string\">'post_type'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'txt'</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string single-quoted-string\">'post_status'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'publish'</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string single-quoted-string\">'posts_per_page'</span> <span class=\"token operator\">=></span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string single-quoted-string\">'caller_get_posts'</span><span class=\"token operator\">=></span> <span class=\"token number\">1</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span> <span class=\"token variable\">$my_query</span><span class=\"token operator\">-></span><span class=\"token function\">have_posts</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$my_query</span><span class=\"token operator\">-></span><span class=\"token function\">have_posts</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">:</span> <span class=\"token variable\">$my_query</span><span class=\"token operator\">-></span><span class=\"token function\">the_post</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token variable\">$sel</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$txtId</span> <span class=\"token operator\">==</span> <span class=\"token function\">get_the_ID</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> <span class=\"token string single-quoted-string\">' selected=\"selected\" '</span> <span class=\"token punctuation\">:</span> <span class=\"token string single-quoted-string\">''</span><span class=\"token punctuation\">;</span>\n                <span class=\"token variable\">$opts</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$opts</span> <span class=\"token operator\">.</span> <span class=\"token string single-quoted-string\">'&lt;option '</span> <span class=\"token operator\">.</span> <span class=\"token variable\">$sel</span> <span class=\"token operator\">.</span> <span class=\"token string single-quoted-string\">' value=\"'</span> <span class=\"token operator\">.</span> <span class=\"token function\">get_the_ID</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">.</span> <span class=\"token string single-quoted-string\">'\">'</span> <span class=\"token operator\">.</span> <span class=\"token function\">get_the_title</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">.</span> <span class=\"token string single-quoted-string\">'&lt;/option>'</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">endwhile</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token function\">wp_reset_query</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">echo</span> <span class=\"token string single-quoted-string\">'&lt;p>&lt;select id=\"'</span> <span class=\"token operator\">.</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-></span><span class=\"token function\">get_field_id</span><span class=\"token punctuation\">(</span> <span class=\"token string single-quoted-string\">'txtId'</span> <span class=\"token punctuation\">)</span> <span class=\"token operator\">.</span> <span class=\"token string single-quoted-string\">'\" name=\"'</span> <span class=\"token operator\">.</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-></span><span class=\"token function\">get_field_name</span><span class=\"token punctuation\">(</span> <span class=\"token string single-quoted-string\">'txtId'</span> <span class=\"token punctuation\">)</span> <span class=\"token operator\">.</span> <span class=\"token string single-quoted-string\">'\" class=\"widefat\" style=\"width:100%;\">&lt;option value=\"0\">- select -&lt;/option>'</span> <span class=\"token operator\">.</span> <span class=\"token variable\">$opts</span> <span class=\"token operator\">.</span> <span class=\"token string single-quoted-string\">'&lt;/select>&lt;/p>'</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token delimiter important\">?></span></span></code></pre></div>\n<p>Примечание: Очень важно в форме правильно использовать методы <code class=\"language-text\">$this->get_field_id</code> и <code class=\"language-text\">$this->get_field_name</code> иначе данные не будут сохранятся и будет куча гемороя.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 315px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/7335e368691cc58e2a2d45e04d16ae45/6bdcf/image21.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 78.90625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsTAAALEwEAmpwYAAAClklEQVR42o1UTU/bQBDNT6n6T3qq+n965UCQaKUARiACElI/1FurnugBtSJqiQj0AI0Th8QpieIkju3Edrz+dgi8apa4ETRVu9LTzs7Mvn0z3nUmSRIw5kDXdRiGgdFohOFwyNepTX7TNGFZFp8XgXKDIECGCF+9fgNBELCzk0cul4OwuYl8fgdra2sQhE1sb2/jxeoqstkVrKwsxvLyMorFIhHG2Nvb40S0kUi2trawu5uHIGxgfWODH5ZuWoRsNoulpSUUCgVk4jiGZZrQNI1Lt20bhq5DVVVetq5pPEZlU/l/A8UZY0QYwfN96JqK42/HKB4XoSgKJ6eklCi1H4Jig8GA95f3kBQSMympVqoQyyIUpctVkUpKJqQ2zamtzdSTTQJ8358Tuq6LyWSC6XQK8lEwnenkKIr4TD7qO9mO4/C9BLI9z0OGEl3PQ1fpoFQ6xddCAScnpyhfnPMmV8QKzkolnJROUS7/wKeDAxwefsb5+QUvmdT1+/37CkmdoWu4vKyjJkmQpBpaV1eo1SS0Wm3IjQbKoohGvY6KKPKDZVmGZdtcGfWP8JuQnFTq9PoaLmOgu3lXYshL8z0Pt7e3eDimNzfQdB1+ECAMQy7sHqHa60GqSuh1e7yUZvMK7XYbTbkB07KxaAw6LYwt8z4hm6n619DdEF/qfRw1VI6CrOJIHsAMEkSB/yeharvomAw904Xr+ujSeuigM2Kc8N33n3j0fB9Pcx/w5OV7PFv/iMfP9/H2rAncTDB22JyQehYlCfwoRhAl/IAwSeCFMfdRS1gQoaroqPcMXPYMSF2CDpdyfA+u680Jx+MxGN2rGZwZ6E9Ea4q7zEEceIj8OWhNfnqy/B5yJeHd1/wf0DN9iDRGVf4CFsWCN5x/64UAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"screenshot\"\n        title=\"\"\n        src=\"/static/7335e368691cc58e2a2d45e04d16ae45/6bdcf/image21.png\"\n        srcset=\"/static/7335e368691cc58e2a2d45e04d16ae45/6f3f2/image21.png 256w,\n/static/7335e368691cc58e2a2d45e04d16ae45/6bdcf/image21.png 315w\"\n        sizes=\"(max-width: 315px) 100vw, 315px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>"}},"pageContext":{"id":"9f801458-d24e-51dd-93d6-5419806aa8b8"}},"staticQueryHashes":[],"slicesMap":{}}