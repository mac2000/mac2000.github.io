{"componentChunkName":"component---src-templates-note-js","path":"/wordpress-custom-post-content-widget/","result":{"data":{"remark":{"fields":{"path":"wordpress-custom-post-content-widget"},"meta":{"title":""},"headings":[{"value":"WordPress custom post content widget"}],"html":"<h1>WordPress custom post content widget</h1>\n<h2>Задача</h2>\n<p>В WP необходимо создать отдельный тип записей и виджет для вывода их контента в сайтбаре. Виджет при добавлении в сайт будет предлагать в виде дропдауна список кастомных записей для выбора.</p>\n<h2>Шаг 1. Создание кастомного типа</h2>\n<p>В <code class=\"language-text\">functions.php</code> необходимо прописать следующее:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token keyword\">function</span> <span class=\"token function-definition function\">register_post_type_txt</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">register_post_type</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'txt'</span><span class=\"token punctuation\">,</span><span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span>\n            <span class=\"token string single-quoted-string\">'label'</span> <span class=\"token operator\">=></span> <span class=\"token function\">__</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'Text'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string single-quoted-string\">'public'</span> <span class=\"token operator\">=></span> <span class=\"token constant boolean\">true</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string single-quoted-string\">'supports'</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'title'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'editor'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token function\">add_action</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'init'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'register_post_type_txt'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>После чего в админке появится новосозданный кастомный тип записей</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 449px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a6f51f1b1aa2d26de5bbc3d4076ca9b6/053a9/image01.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 70.703125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAACQklEQVR42nWT6W7bMBCE/f4vFgRwENdx2tSOEx2USFEnDx2kbEyxlG24TfNjsVwS/DA7S666rkMmJPKyBa8aKK1hjIHWGtM0QSmFqirBOYcQBWQhMQxD2G+aNmSlOhhj4ZzDqmka5KJAWtRgskan7oEObdPCGoNCCByPR0RRBGMtBOdIkgQ5z5HnOaqqXoB0kSCt0tDGwvY9rO3R9z3cNCFJUtR1jXn2OJ/POJ1OcN5jnmec5hmzX8J7f1VYI8o4fsY5UlHCaAWtFMiKcRhAHVA9jmOwgPYo38K5Ww7AqizxHiX4lXC8fDL8OKbIZQWtFfqhh5QSjGWhLSEE4jgKNfnoLpD7CMDPhCHiMkTbdei6ReH10jSOof2ghJRS/R9YAJZSIsk49kzgkHJUTRvU3QNDzHOAOvKQ1t8BqSVS+JHJAMxkBUODIiAN5nyGUwqeMbg0hStLuLaF+0blqq4qfCQpDozj98XHY1aEZzM4B681nNbwb2/w6zX8ZhPWAXCZ7F/Arm2R8ALHvETVdGGi2lqYosD0+gon5aLGmCVbu7RMdlj7FUgPdL8/YPOyQ8JY+AlFVSN/3WEgNQBcloXwz8/wT0/wURTUBgvIU/L2CsxYiuf1GrvtFhljEIKHJxLFMZS18HRhv4ePYzjO4ep68ZAApJIsuWt9Rb/iPUoh6hZmmNBoe3ukYSjzDL/bwW+38A8PcEUBfzgs9eMjXBQtg7uoXNF3E62B7AwaTVljvByO10mSf6SC1NAZeUfTpvqfaf8BUHUpv4laMJgAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"screenshot\"\n        title=\"\"\n        src=\"/static/a6f51f1b1aa2d26de5bbc3d4076ca9b6/053a9/image01.png\"\n        srcset=\"/static/a6f51f1b1aa2d26de5bbc3d4076ca9b6/6f3f2/image01.png 256w,\n/static/a6f51f1b1aa2d26de5bbc3d4076ca9b6/053a9/image01.png 449w\"\n        sizes=\"(max-width: 449px) 100vw, 449px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Подробнее о создании кастомных полей: <a href=\"http://codex.wordpress.org/Function_Reference/register_post_type\">register_post_type</a></p>\n<h2>Шаг 2. Вывод содержимого поста в теме</h2>\n<p>Где угодно в файлах темы (я для примера прописал в <code class=\"language-text\">header.php</code>) прописать следующее:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n<span class=\"token variable\">$postId</span> <span class=\"token operator\">=</span> <span class=\"token number\">50</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$queried_post</span> <span class=\"token operator\">=</span> <span class=\"token function\">get_post</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$postId</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$title</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$queried_post</span><span class=\"token operator\">-></span><span class=\"token property\">post_title</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$content</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$queried_post</span><span class=\"token operator\">-></span><span class=\"token property\">post_content</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">echo</span> <span class=\"token function\">_e</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$title</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">echo</span> <span class=\"token string single-quoted-string\">'&lt;br />'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">echo</span> <span class=\"token function\">_e</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$content</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token delimiter important\">?></span></span></code></pre></div>\n<p>Примечание: в функцию <code class=\"language-text\">get_post</code> - обязательно должна передаваться переменная, иначе получим эксепшн.</p>\n<p>Подробнее о ф-ии <a href=\"http://codex.wordpress.org/Function_Reference/get_post\">get_post</a></p>\n<p>Примечание: в проекте для которого все это делалось, юзается плагин <em>qTranslate</em> для создания многоязычного сайта, этот плагин записывает через комменты все переводы в один пост, для того чтобы отобразить нужный, необходимо прогнать текст через ф-ию <code class=\"language-text\">_e()</code></p>\n<p>Эта заготовка будет использоваться плагином, для вывода содержимого поста.</p>\n<h2>Шаг 3. Создание кастомных сайтбаров</h2>\n<p>В файле <code class=\"language-text\">functions.php</code> необходимо прописать следующее:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span> <span class=\"token function\">function_exists</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'register_sidebar'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token function\">register_sidebar</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span>\n        <span class=\"token string single-quoted-string\">'name'</span>  <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'home_page_text'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string single-quoted-string\">'before_widget'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">''</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string single-quoted-string\">'after_widget'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">''</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string single-quoted-string\">'before_title'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">''</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string single-quoted-string\">'after_title'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">''</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Тем самым мы добавляем новый сайтбар для размещения виджетов, соотв. в дальнейшем плодим этих сайдтбаров, столько, сколько нам надо.</p>\n<p>После добавления этого кода на странице виджетов должен появиться новый сайтбар:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 721px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/17bc8bc75b17e98c3bcee2cdc7e12c78/01dae/image11.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 40.23437500000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAABPklEQVR42pWRf2vCMBCG+/0/jaDOgYj/CH4AoaAIm5vapD+SNJq2VuwzrptjDCbs4CEJd/fm8iay1iIYYzDOYbzvVytnY/pcUeRY53DOMZ/Pmc1mPdPplMlk0jMej1kul0RKKY7HI7kxZK8v5HFM+r5HZxk6z5F86T1BxDcbnqX56akXk/1wOGQ0GjEYDFgsFkR5XuC9p71eaX3JJY5pt1s4HOiMobvdkOgkX9c4a1GJogqBEAJVVX1zuVyIdrs3iqJAK4XOclzpqPd7iGNYr6Ft+VTsqESwLPFlyd2qn4glkUxXSpH3fWHdNLRNA9bCagVKferdbtR1zfl8/hOZOMqyFK01WqfoNEUlCeeqAudgt4MQvgbsaOSytn1IFL68uHM6nfrG33EXFJ8eEaVakyRJ/5uC+CBPE8+++YfgBwCaXGIwHGxqAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"screenshot\"\n        title=\"\"\n        src=\"/static/17bc8bc75b17e98c3bcee2cdc7e12c78/01dae/image11.png\"\n        srcset=\"/static/17bc8bc75b17e98c3bcee2cdc7e12c78/6f3f2/image11.png 256w,\n/static/17bc8bc75b17e98c3bcee2cdc7e12c78/01e7c/image11.png 512w,\n/static/17bc8bc75b17e98c3bcee2cdc7e12c78/01dae/image11.png 721w\"\n        sizes=\"(max-width: 721px) 100vw, 721px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h2>Шаг 4. Вывод кастомных сайтбаров</h2>\n<p>Где угодно в файлах темы (я для примера пробывал в <code class=\"language-text\">header.php</code>) прописываем следующее:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> <span class=\"token function\">dynamic_sidebar</span><span class=\"token punctuation\">(</span> <span class=\"token string single-quoted-string\">'home_page_text'</span> <span class=\"token punctuation\">)</span><span class=\"token delimiter important\">?></span></span></code></pre></div>\n<p>Эта ф-ия выведет содержимое кастомного сайтбара, подробнее: <a href=\"http://codex.wordpress.org/Function_Reference/dynamic_sidebar\">dynamic_sidebar</a></p>\n<h2>Шаг 5. Создание виджета (собираем все в кучу)</h2>\n<p>Описание <a href=\"http://www.lonewolfdesigns.co.uk/create-wordpress-widgets/\">create wordpress widgets</a></p>\n<p>Код <code class=\"language-text\">/wp-content/plugins/custom-post-type-widget.php</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n<span class=\"token comment\">/**\n    * Plugin Name: Custom Post Type Widget\n    * Plugin URI: http://photowizard.com\n    * Description: Widget to display custom post content\n    * Version: 0.1\n    * Author: mac\n    * Author URI: http://photowizard.com.ua\n    */</span>\n\n<span class=\"token function\">add_action</span><span class=\"token punctuation\">(</span> <span class=\"token string single-quoted-string\">'widgets_init'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'widgets_init_custom_post_type_widget'</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function-definition function\">widgets_init_custom_post_type_widget</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">register_widget</span><span class=\"token punctuation\">(</span> <span class=\"token string single-quoted-string\">'Custom_Post_Type_Widget'</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name-definition class-name\">Custom_Post_Type_Widget</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">WP_Widget</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">function</span> <span class=\"token function-definition function\">Custom_Post_Type_Widget</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword static-context\">parent</span><span class=\"token operator\">::</span><span class=\"token function\">WP_Widget</span><span class=\"token punctuation\">(</span><span class=\"token constant boolean\">false</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$name</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'Custom_Post_Type_Widget'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">function</span> <span class=\"token function-definition function\">widget</span><span class=\"token punctuation\">(</span> <span class=\"token variable\">$args</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$instance</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">extract</span><span class=\"token punctuation\">(</span> <span class=\"token variable\">$args</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token variable\">$txtId</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">isset</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$instance</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'txtId'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> <span class=\"token variable\">$instance</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'txtId'</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">:</span> <span class=\"token constant boolean\">false</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">echo</span> <span class=\"token variable\">$before_widget</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span> <span class=\"token variable\">$txtId</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token variable\">$queried_post</span> <span class=\"token operator\">=</span> <span class=\"token function\">get_post</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$txtId</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token variable\">$content</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$queried_post</span><span class=\"token operator\">-></span><span class=\"token property\">post_content</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">echo</span> <span class=\"token function\">_e</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$content</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">echo</span> <span class=\"token variable\">$after_widget</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">function</span> <span class=\"token function-definition function\">update</span><span class=\"token punctuation\">(</span> <span class=\"token variable\">$new_instance</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$old_instance</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token variable\">$instance</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$old_instance</span><span class=\"token punctuation\">;</span>\n        <span class=\"token variable\">$instance</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'txtId'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$new_instance</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'txtId'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token variable\">$instance</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">function</span> <span class=\"token function-definition function\">form</span><span class=\"token punctuation\">(</span> <span class=\"token variable\">$instance</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token variable\">$txtId</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">isset</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$instance</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'txtId'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> <span class=\"token variable\">$instance</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'txtId'</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n        <span class=\"token variable\">$opts</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">''</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">wp_reset_query</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token variable\">$my_query</span> <span class=\"token operator\">=</span> <span class=\"token constant\">null</span><span class=\"token punctuation\">;</span>\n        <span class=\"token variable\">$my_query</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">WP_Query</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span>\n            <span class=\"token string single-quoted-string\">'post_type'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'txt'</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string single-quoted-string\">'post_status'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'publish'</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string single-quoted-string\">'posts_per_page'</span> <span class=\"token operator\">=></span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string single-quoted-string\">'caller_get_posts'</span><span class=\"token operator\">=></span> <span class=\"token number\">1</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span> <span class=\"token variable\">$my_query</span><span class=\"token operator\">-></span><span class=\"token function\">have_posts</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$my_query</span><span class=\"token operator\">-></span><span class=\"token function\">have_posts</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">:</span> <span class=\"token variable\">$my_query</span><span class=\"token operator\">-></span><span class=\"token function\">the_post</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token variable\">$sel</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$txtId</span> <span class=\"token operator\">==</span> <span class=\"token function\">get_the_ID</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> <span class=\"token string single-quoted-string\">' selected=\"selected\" '</span> <span class=\"token punctuation\">:</span> <span class=\"token string single-quoted-string\">''</span><span class=\"token punctuation\">;</span>\n                <span class=\"token variable\">$opts</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$opts</span> <span class=\"token operator\">.</span> <span class=\"token string single-quoted-string\">'&lt;option '</span> <span class=\"token operator\">.</span> <span class=\"token variable\">$sel</span> <span class=\"token operator\">.</span> <span class=\"token string single-quoted-string\">' value=\"'</span> <span class=\"token operator\">.</span> <span class=\"token function\">get_the_ID</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">.</span> <span class=\"token string single-quoted-string\">'\">'</span> <span class=\"token operator\">.</span> <span class=\"token function\">get_the_title</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">.</span> <span class=\"token string single-quoted-string\">'&lt;/option>'</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">endwhile</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token function\">wp_reset_query</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">echo</span> <span class=\"token string single-quoted-string\">'&lt;p>&lt;select id=\"'</span> <span class=\"token operator\">.</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-></span><span class=\"token function\">get_field_id</span><span class=\"token punctuation\">(</span> <span class=\"token string single-quoted-string\">'txtId'</span> <span class=\"token punctuation\">)</span> <span class=\"token operator\">.</span> <span class=\"token string single-quoted-string\">'\" name=\"'</span> <span class=\"token operator\">.</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-></span><span class=\"token function\">get_field_name</span><span class=\"token punctuation\">(</span> <span class=\"token string single-quoted-string\">'txtId'</span> <span class=\"token punctuation\">)</span> <span class=\"token operator\">.</span> <span class=\"token string single-quoted-string\">'\" class=\"widefat\" style=\"width:100%;\">&lt;option value=\"0\">- select -&lt;/option>'</span> <span class=\"token operator\">.</span> <span class=\"token variable\">$opts</span> <span class=\"token operator\">.</span> <span class=\"token string single-quoted-string\">'&lt;/select>&lt;/p>'</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token delimiter important\">?></span></span></code></pre></div>\n<p>Примечание: Очень важно в форме правильно использовать методы <code class=\"language-text\">$this->get_field_id</code> и <code class=\"language-text\">$this->get_field_name</code> иначе данные не будут сохранятся и будет куча гемороя.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 315px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/7335e368691cc58e2a2d45e04d16ae45/6bdcf/image21.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 78.90625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsTAAALEwEAmpwYAAACtElEQVR42o1TW28SYRDlrxj/iW/6f/raBKhNLAUaENtGo0bfjPFFfWgaaZWmtC8VWihsKVZg2QvXvd8Ke8xMi21NSfySk5n9ZvdwzswQCYIAuq5DURWoqop+v49erwdFucnVnorBYIDhcDgX9K5t24gQ4es3b5FOpZDL5ZBYWUEqncaL3HMkEgnOM5kMlpefIhaLIR6P34toNIpCoYCI7/vY2NzE6uoqstkskskkMtksNtbXsZZOI5VKYS29hqWlOKKxGJPeh8XFReTzeUQ8z2PJiqJwHI/HbF2SZI50LysyWydb80B1ah0TmqYFRe6i8KOAvcIeWq0W94wI6UXuo6rOhSRJLIZ7SIQ8FEXGyfEJyqUyWq02ZFlGt9vlKMkSf0SgO4kgSVwjB5STAMuybggNwwT1c3J5Cddzueh6HkfbceC6Lmy+c+H5Hquh72bQNO2G0DRNdNotFIuH+L67i2LxAOXST+zu7LDqw4Pi9V0JXz9/wdbWNo6OjrgVpFIUxbsKDcOAqiiondZQrVRQOamieX6OarWCZrMJoV5HqXyMWr2G43IZ+/tFCIKA0XjMyma7eMcy7WMQ+JyTPcdxYFk2LNOCaZiYTCagE4YhQgDTaYjJNISsqLBsC45ts1MmpF+ZTCeQRBHV6inEjshr02g0cfHrAg1BwHA0xn2nc3EObTSE47js9I7CeScMr6JqONiuicgLEvJ1CTuChG9nEvq2D9e2ebB/CWnC3ZGB330dnYEBw7DQpueehlZfZ8L3hw08WHiFx8mPePTsA56kPuHhwku8OzgDpgE0/ZZCiq4fwPI8OJ4P3w+unl0PtutxDw3HQ6Wtoi72GNWOyjBdWi8ThnlLIfVRJ9BeaRq062jQjuoa1yl3LAuOZTJc24RLRLrOf1meMlmdTfV/QAv9L2Y1EvcHo/6DYKow0DwAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"screenshot\"\n        title=\"\"\n        src=\"/static/7335e368691cc58e2a2d45e04d16ae45/6bdcf/image21.png\"\n        srcset=\"/static/7335e368691cc58e2a2d45e04d16ae45/6f3f2/image21.png 256w,\n/static/7335e368691cc58e2a2d45e04d16ae45/6bdcf/image21.png 315w\"\n        sizes=\"(max-width: 315px) 100vw, 315px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>"}},"pageContext":{"id":"9f801458-d24e-51dd-93d6-5419806aa8b8"}},"staticQueryHashes":[],"slicesMap":{}}