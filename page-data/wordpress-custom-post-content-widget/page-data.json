{"componentChunkName":"component---src-templates-note-js","path":"/wordpress-custom-post-content-widget","result":{"data":{"remark":{"fields":{"path":"wordpress-custom-post-content-widget"},"meta":{"title":""},"headings":[{"value":"WordPress custom post content widget"}],"html":"<h1>WordPress custom post content widget</h1>\n<h2>Задача</h2>\n<p>В WP необходимо создать отдельный тип записей и виджет для вывода их контента в сайтбаре. Виджет при добавлении в сайт будет предлагать в виде дропдауна список кастомных записей для выбора.</p>\n<h2>Шаг 1. Создание кастомного типа</h2>\n<p>В <code class=\"language-text\">functions.php</code> необходимо прописать следующее:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token keyword\">function</span> <span class=\"token function-definition function\">register_post_type_txt</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">register_post_type</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'txt'</span><span class=\"token punctuation\">,</span><span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span>\n            <span class=\"token string single-quoted-string\">'label'</span> <span class=\"token operator\">=></span> <span class=\"token function\">__</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'Text'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string single-quoted-string\">'public'</span> <span class=\"token operator\">=></span> <span class=\"token constant boolean\">true</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string single-quoted-string\">'supports'</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'title'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'editor'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token function\">add_action</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'init'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'register_post_type_txt'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>После чего в админке появится новосозданный кастомный тип записей</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 449px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a6f51f1b1aa2d26de5bbc3d4076ca9b6/053a9/image01.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 70.703125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAACQUlEQVQ4y12T63LbIBCF9f4PlslMmjR22sYeT2xLSCCEQBJCF2Q7p7Ngp6l/7LBC8HH2sCSNMWC8BKs0ikqjsxZ9b2GtxTzPaJoGSinkeY6Cc5RCYBgGNI2B1jr8p6D13nskRmuISqFQBlzdgD1s3wegMQbO9ZBlif3+gCzL0DsHwTkYYxBChFxrE4HWdmi7Dqa1AUKnO+fg3IB5GnE8HsPi8/mMz89PXC4XLN7jdDqFORoplmUJAhJd1zjmAn+OBVipYLsObduGGMcxKKRyKJ+mKRxII22+j6CwkhK7Q4b3lGO9z7H6YKF0AtNmKWXwj5N/ZRkU50WBaRoD4B6aVJXEIctxFBUyUaG7U/jfpjvA7R+Nt0ikLJEWHNtMYJtxKG2+yg7AK8ifTjE/n0Me5u5gEUi3l+XYc4kdE+BVHVU2DcZhgL9c4I2Bz7IYUsZv8vEG/QZO6lrhI8uxY2VQ+bbPsS9kvAha1DTw1GPv71ien+FXK/jtFjOpXJZ/FdyA1KCpkPgQCrpp0XcdOudgiwLzeg2vVPTJubiR+pPK7vuY36lMeJ5js9ng5XWNjLHQwIJexmqF4e0NHoBnDL4ogsLl5QX+cMDy9BTmZrLkm8okZww/n3/gz+9fELyIQM6RMgY7DFjoMjYb+DSFFyJaoHUEOAffdV+lByC9il2aQ5oWdphg7LU0P8dLocWkdL3G8vAAX1XxgNdXLI+PQX2w4Abs+h6y7aHaPsBUazFe+4xehL8qCSrIt6ufvq6/vr+30F+l8yi6M5UE7AAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"screenshot\"\n        title=\"screenshot\"\n        src=\"/static/a6f51f1b1aa2d26de5bbc3d4076ca9b6/053a9/image01.png\"\n        srcset=\"/static/a6f51f1b1aa2d26de5bbc3d4076ca9b6/6f3f2/image01.png 256w,\n/static/a6f51f1b1aa2d26de5bbc3d4076ca9b6/053a9/image01.png 449w\"\n        sizes=\"(max-width: 449px) 100vw, 449px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Подробнее о создании кастомных полей: <a href=\"http://codex.wordpress.org/Function_Reference/register_post_type\">register_post_type</a></p>\n<h2>Шаг 2. Вывод содержимого поста в теме</h2>\n<p>Где угодно в файлах темы (я для примера прописал в <code class=\"language-text\">header.php</code>) прописать следующее:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n<span class=\"token variable\">$postId</span> <span class=\"token operator\">=</span> <span class=\"token number\">50</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$queried_post</span> <span class=\"token operator\">=</span> <span class=\"token function\">get_post</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$postId</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$title</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$queried_post</span><span class=\"token operator\">-></span><span class=\"token property\">post_title</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$content</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$queried_post</span><span class=\"token operator\">-></span><span class=\"token property\">post_content</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">echo</span> <span class=\"token function\">_e</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$title</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">echo</span> <span class=\"token string single-quoted-string\">'&lt;br />'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">echo</span> <span class=\"token function\">_e</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$content</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token delimiter important\">?></span></span></code></pre></div>\n<p>Примечание: в функцию <code class=\"language-text\">get_post</code> - обязательно должна передаваться переменная, иначе получим эксепшн.</p>\n<p>Подробнее о ф-ии <a href=\"http://codex.wordpress.org/Function_Reference/get_post\">get_post</a></p>\n<p>Примечание: в проекте для которого все это делалось, юзается плагин <em>qTranslate</em> для создания многоязычного сайта, этот плагин записывает через комменты все переводы в один пост, для того чтобы отобразить нужный, необходимо прогнать текст через ф-ию <code class=\"language-text\">_e()</code></p>\n<p>Эта заготовка будет использоваться плагином, для вывода содержимого поста.</p>\n<h2>Шаг 3. Создание кастомных сайтбаров</h2>\n<p>В файле <code class=\"language-text\">functions.php</code> необходимо прописать следующее:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span> <span class=\"token function\">function_exists</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'register_sidebar'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token function\">register_sidebar</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span>\n        <span class=\"token string single-quoted-string\">'name'</span>  <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'home_page_text'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string single-quoted-string\">'before_widget'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">''</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string single-quoted-string\">'after_widget'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">''</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string single-quoted-string\">'before_title'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">''</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string single-quoted-string\">'after_title'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">''</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Тем самым мы добавляем новый сайтбар для размещения виджетов, соотв. в дальнейшем плодим этих сайдтбаров, столько, сколько нам надо.</p>\n<p>После добавления этого кода на странице виджетов должен появиться новый сайтбар:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 721px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/17bc8bc75b17e98c3bcee2cdc7e12c78/01dae/image11.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 40.23437500000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAABPUlEQVQoz4WQwYrCMBRF8/8fI4I6uNGF4sL1oIIidNGmaW2bpLGmtfTdIc/RhTBO4JDXlh7uu8IYg4DWGtpaaOf4NuFZa/5WVRWMtbB1jc1mg/V6zaxWKyyXS2axWGC73UIolUImCfKiQB5FuBwOyOIYKs+RXS5I0xTaGLiyhD6d8DWbYTKZYD6fYzadYjweM6PRiKWiLEtYa9H1PTpr0e52uJ/PIClBxoCGAXz6Hvem4bRSSlyvV6ZpGibMbdtCRFGEoiiQKcWJwpo+joH9HjgeWUQAc/Mez4qC+J3wr6jrmhMyxsC3Le7eg7QGfX+DlOKAIan3Hs65PwkpRZ7nUCFdIMuQSgl3uwF1DYoikHMvYVip67qPiGcH713gd03igUBE/P4/hEoVkiThogNV6ND7h2QYWPRw0ivhJ+EPH9pb1iWGwCoAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"screenshot\"\n        title=\"screenshot\"\n        src=\"/static/17bc8bc75b17e98c3bcee2cdc7e12c78/01dae/image11.png\"\n        srcset=\"/static/17bc8bc75b17e98c3bcee2cdc7e12c78/6f3f2/image11.png 256w,\n/static/17bc8bc75b17e98c3bcee2cdc7e12c78/01e7c/image11.png 512w,\n/static/17bc8bc75b17e98c3bcee2cdc7e12c78/01dae/image11.png 721w\"\n        sizes=\"(max-width: 721px) 100vw, 721px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h2>Шаг 4. Вывод кастомных сайтбаров</h2>\n<p>Где угодно в файлах темы (я для примера пробывал в <code class=\"language-text\">header.php</code>) прописываем следующее:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> <span class=\"token function\">dynamic_sidebar</span><span class=\"token punctuation\">(</span> <span class=\"token string single-quoted-string\">'home_page_text'</span> <span class=\"token punctuation\">)</span><span class=\"token delimiter important\">?></span></span></code></pre></div>\n<p>Эта ф-ия выведет содержимое кастомного сайтбара, подробнее: <a href=\"http://codex.wordpress.org/Function_Reference/dynamic_sidebar\">dynamic_sidebar</a></p>\n<h2>Шаг 5. Создание виджета (собираем все в кучу)</h2>\n<p>Описание <a href=\"http://www.lonewolfdesigns.co.uk/create-wordpress-widgets/\">create wordpress widgets</a></p>\n<p>Код <code class=\"language-text\">/wp-content/plugins/custom-post-type-widget.php</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n<span class=\"token comment\">/**\n    * Plugin Name: Custom Post Type Widget\n    * Plugin URI: http://photowizard.com\n    * Description: Widget to display custom post content\n    * Version: 0.1\n    * Author: mac\n    * Author URI: http://photowizard.com.ua\n    */</span>\n\n<span class=\"token function\">add_action</span><span class=\"token punctuation\">(</span> <span class=\"token string single-quoted-string\">'widgets_init'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'widgets_init_custom_post_type_widget'</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function-definition function\">widgets_init_custom_post_type_widget</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">register_widget</span><span class=\"token punctuation\">(</span> <span class=\"token string single-quoted-string\">'Custom_Post_Type_Widget'</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name-definition class-name\">Custom_Post_Type_Widget</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">WP_Widget</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">function</span> <span class=\"token function-definition function\">Custom_Post_Type_Widget</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword static-context\">parent</span><span class=\"token operator\">::</span><span class=\"token function\">WP_Widget</span><span class=\"token punctuation\">(</span><span class=\"token constant boolean\">false</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$name</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'Custom_Post_Type_Widget'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">function</span> <span class=\"token function-definition function\">widget</span><span class=\"token punctuation\">(</span> <span class=\"token variable\">$args</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$instance</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">extract</span><span class=\"token punctuation\">(</span> <span class=\"token variable\">$args</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token variable\">$txtId</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">isset</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$instance</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'txtId'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> <span class=\"token variable\">$instance</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'txtId'</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">:</span> <span class=\"token constant boolean\">false</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">echo</span> <span class=\"token variable\">$before_widget</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span> <span class=\"token variable\">$txtId</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token variable\">$queried_post</span> <span class=\"token operator\">=</span> <span class=\"token function\">get_post</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$txtId</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token variable\">$content</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$queried_post</span><span class=\"token operator\">-></span><span class=\"token property\">post_content</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">echo</span> <span class=\"token function\">_e</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$content</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">echo</span> <span class=\"token variable\">$after_widget</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">function</span> <span class=\"token function-definition function\">update</span><span class=\"token punctuation\">(</span> <span class=\"token variable\">$new_instance</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$old_instance</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token variable\">$instance</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$old_instance</span><span class=\"token punctuation\">;</span>\n        <span class=\"token variable\">$instance</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'txtId'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$new_instance</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'txtId'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token variable\">$instance</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">function</span> <span class=\"token function-definition function\">form</span><span class=\"token punctuation\">(</span> <span class=\"token variable\">$instance</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token variable\">$txtId</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">isset</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$instance</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'txtId'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> <span class=\"token variable\">$instance</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'txtId'</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n        <span class=\"token variable\">$opts</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">''</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">wp_reset_query</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token variable\">$my_query</span> <span class=\"token operator\">=</span> <span class=\"token constant\">null</span><span class=\"token punctuation\">;</span>\n        <span class=\"token variable\">$my_query</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">WP_Query</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span>\n            <span class=\"token string single-quoted-string\">'post_type'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'txt'</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string single-quoted-string\">'post_status'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'publish'</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string single-quoted-string\">'posts_per_page'</span> <span class=\"token operator\">=></span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string single-quoted-string\">'caller_get_posts'</span><span class=\"token operator\">=></span> <span class=\"token number\">1</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span> <span class=\"token variable\">$my_query</span><span class=\"token operator\">-></span><span class=\"token function\">have_posts</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$my_query</span><span class=\"token operator\">-></span><span class=\"token function\">have_posts</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">:</span> <span class=\"token variable\">$my_query</span><span class=\"token operator\">-></span><span class=\"token function\">the_post</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token variable\">$sel</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$txtId</span> <span class=\"token operator\">==</span> <span class=\"token function\">get_the_ID</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> <span class=\"token string single-quoted-string\">' selected=\"selected\" '</span> <span class=\"token punctuation\">:</span> <span class=\"token string single-quoted-string\">''</span><span class=\"token punctuation\">;</span>\n                <span class=\"token variable\">$opts</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$opts</span> <span class=\"token operator\">.</span> <span class=\"token string single-quoted-string\">'&lt;option '</span> <span class=\"token operator\">.</span> <span class=\"token variable\">$sel</span> <span class=\"token operator\">.</span> <span class=\"token string single-quoted-string\">' value=\"'</span> <span class=\"token operator\">.</span> <span class=\"token function\">get_the_ID</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">.</span> <span class=\"token string single-quoted-string\">'\">'</span> <span class=\"token operator\">.</span> <span class=\"token function\">get_the_title</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">.</span> <span class=\"token string single-quoted-string\">'&lt;/option>'</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">endwhile</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token function\">wp_reset_query</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">echo</span> <span class=\"token string single-quoted-string\">'&lt;p>&lt;select id=\"'</span> <span class=\"token operator\">.</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-></span><span class=\"token function\">get_field_id</span><span class=\"token punctuation\">(</span> <span class=\"token string single-quoted-string\">'txtId'</span> <span class=\"token punctuation\">)</span> <span class=\"token operator\">.</span> <span class=\"token string single-quoted-string\">'\" name=\"'</span> <span class=\"token operator\">.</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-></span><span class=\"token function\">get_field_name</span><span class=\"token punctuation\">(</span> <span class=\"token string single-quoted-string\">'txtId'</span> <span class=\"token punctuation\">)</span> <span class=\"token operator\">.</span> <span class=\"token string single-quoted-string\">'\" class=\"widefat\" style=\"width:100%;\">&lt;option value=\"0\">- select -&lt;/option>'</span> <span class=\"token operator\">.</span> <span class=\"token variable\">$opts</span> <span class=\"token operator\">.</span> <span class=\"token string single-quoted-string\">'&lt;/select>&lt;/p>'</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token delimiter important\">?></span></span></code></pre></div>\n<p>Примечание: Очень важно в форме правильно использовать методы <code class=\"language-text\">$this->get_field_id</code> и <code class=\"language-text\">$this->get_field_name</code> иначе данные не будут сохранятся и будет куча гемороя.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 315px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/7335e368691cc58e2a2d45e04d16ae45/6bdcf/image21.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 78.90625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsTAAALEwEAmpwYAAACkUlEQVQ4y41UW08TQRjtrzH+E9/4OwRI8AkStqIWWywRwosxakCJL9VYaa0vQFMSfKmt7W730hvb7v0y21aO+aYtltAIk5zs2dmZM2fP9+3GBoMBdF1Ho9HgUBQFiixPuMrvZVmGpmn/haqqcBwHsSiK8DK9A0HYQCKRwNraGjaEOLa2ElhfX8eGIGBz8yker65ieXkZKysrc7G0tIRcLjcW3N/f52LpdBrJF0mkd9LY3X2F7e0UkskUUqkUnsTjEARhLuLxOD+8UCggxhiDbdvo9/uwLIvbNvp9HgPNEXq9HkzTvBOe55FgCMd10dRUZL9mkc1+gyiK6Ha7aLfb9wJlSIdOBMcOSaBaqaJcLkPVNHQ6HbRaretN8zitIRCnN7khaNsOiA+GQ5Br1/MQhiE8z4Xn+xPuIQgCvs73fR4RgfbT1XVdxGghEbkhIp8v4MvnDHLHeRTPTpHJZFAqnePH9zyOc3kUi2f4cHiIo6NPODk5RafbRbPZ5C1DmV87pELo+iUkSYIkiqjXRWiqCkkSeT5yo4FKtcqzrdVquLj4yfuUCkF7yZ1hGP8EaWI0GiFiDD1dh+/5/KFpjV/FNAwMhyPMjisAoz9XUFQNjuPyKHhjzwp2Wi1UflXQbrZ4kSRp/OWI9ToMw8S80W8pcC0T/qwghUoNfteQeg5en/7G+1Id70p1HJyLeFsSoVoBWODDvik4gGY4kHQLSs+B7XiQDQdi14Sk21zwTbGGB4t7WHh2iEfxAyw8/4iHi3v8EIwGPKJrQao2iwYIGEPIIu6YRRGCkCFgEegnEjIG5dKAopscjQkPo4h3Cm+bqSBVzJrB9HOyrDGm3HedW6B5wzTHguSE3FGV7gPfv43pMzL3FwwqgeGPv535AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"screenshot\"\n        title=\"screenshot\"\n        src=\"/static/7335e368691cc58e2a2d45e04d16ae45/6bdcf/image21.png\"\n        srcset=\"/static/7335e368691cc58e2a2d45e04d16ae45/6f3f2/image21.png 256w,\n/static/7335e368691cc58e2a2d45e04d16ae45/6bdcf/image21.png 315w\"\n        sizes=\"(max-width: 315px) 100vw, 315px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>"}},"pageContext":{"id":"9f801458-d24e-51dd-93d6-5419806aa8b8"}},"staticQueryHashes":[]}