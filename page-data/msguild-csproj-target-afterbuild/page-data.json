{"componentChunkName":"component---src-templates-note-js","path":"/msguild-csproj-target-afterbuild/","result":{"data":{"remark":{"fields":{"path":"msguild-csproj-target-afterbuild"},"meta":{"title":""},"headings":[{"value":"Remove pdb, xml of dll files, merge dlls into exe"}],"html":"<h1>Remove pdb, xml of dll files, merge dlls into exe</h1>\n<div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Target</span> <span class=\"token attr-name\">Name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>AfterBuild<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">Condition</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token punctuation\">'</span>$(Configuration)' == 'Release'<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n\n    <span class=\"token comment\">&lt;!--\n    &lt;Delete Files=\"$(OutputPath)Elasticsearch.Net.pdb\" />\n    &lt;Delete Files=\"$(OutputPath)Nest.pdb\" />\n    --></span>\n\n    <span class=\"token comment\">&lt;!--\n    &lt;ItemGroup>\n      &lt;FilesToDelete Include=\"$(OutputPath)*.pdb\"/>\n      &lt;FilesToDelete Include=\"$(OutputPath)*.xml\"/>\n    &lt;/ItemGroup>\n    &lt;Message Text=\"Cleaningup: @(FilesToDelete, ', ')\" Importance=\"High\" />\n    &lt;Delete Files=\"@(FilesToDelete)\" />\n    --></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ConvertToAbsolutePath</span> <span class=\"token attr-name\">Paths</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>$(OutputPath)<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Output</span> <span class=\"token attr-name\">TaskParameter</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>AbsolutePaths<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">PropertyName</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>OutputFullPath<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ConvertToAbsolutePath</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ItemGroup</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>MergeAssemblies</span> <span class=\"token attr-name\">Include</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>$(OutputPath)Recreate.exe<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>MergeAssemblies</span> <span class=\"token attr-name\">Include</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>$(OutputPath)Elasticsearch.Net.dll<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>MergeAssemblies</span> <span class=\"token attr-name\">Include</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>$(OutputPath)Nest.dll<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>MergeAssemblies</span> <span class=\"token attr-name\">Include</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>$(OutputPath)Newtonsoft.Json.dll<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ItemGroup</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>PropertyGroup</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>OutputAssembly</span><span class=\"token punctuation\">></span></span>$(OutputFullPath)Recreate.exe<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>OutputAssembly</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Merger</span><span class=\"token punctuation\">></span></span>$(SolutionDir)packages\\ILMerge.2.14.1208\\tools\\ILMerge.exe<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>Merger</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>PropertyGroup</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Message</span> <span class=\"token attr-name\">Text</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Merge -> $(OutputAssembly)<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">Importance</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>High<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Message</span> <span class=\"token attr-name\">Text</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>         <span class=\"token entity named-entity\" title=\"&quot;\">&amp;quot;</span>$(Merger)<span class=\"token entity named-entity\" title=\"&quot;\">&amp;quot;</span> /out:<span class=\"token entity named-entity\" title=\"&quot;\">&amp;quot;</span>$(OutputAssembly)<span class=\"token entity named-entity\" title=\"&quot;\">&amp;quot;</span> @(MergeAssemblies->'<span class=\"token entity named-entity\" title=\"&quot;\">&amp;quot;</span>%(FullPath)<span class=\"token entity named-entity\" title=\"&quot;\">&amp;quot;</span>', ' ')<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">Importance</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>High<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Exec</span> <span class=\"token attr-name\">Command</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token entity named-entity\" title=\"&quot;\">&amp;quot;</span>$(Merger)<span class=\"token entity named-entity\" title=\"&quot;\">&amp;quot;</span> /out:<span class=\"token entity named-entity\" title=\"&quot;\">&amp;quot;</span>$(OutputAssembly)<span class=\"token entity named-entity\" title=\"&quot;\">&amp;quot;</span> @(MergeAssemblies->'<span class=\"token entity named-entity\" title=\"&quot;\">&amp;quot;</span>%(FullPath)<span class=\"token entity named-entity\" title=\"&quot;\">&amp;quot;</span>', ' ')<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ItemGroup</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>FilesToDelete</span> <span class=\"token attr-name\">Include</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>$(OutputPath)*.pdb<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>FilesToDelete</span> <span class=\"token attr-name\">Include</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>$(OutputPath)*.xml<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>FilesToDelete</span> <span class=\"token attr-name\">Include</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>$(OutputPath)*.dll<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ItemGroup</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Message</span> <span class=\"token attr-name\">Text</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Cleanup -> @(FilesToDelete, ', ')<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">Importance</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>High<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Delete</span> <span class=\"token attr-name\">Files</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@(FilesToDelete)<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>Target</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<h2>Force NuGet package update before build</h2>\n<div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Target</span> <span class=\"token attr-name\">Name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>BeforeBuild<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">Condition</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Exists('$(SolutionDir)packages\\OctoPack.3.0.60\\tools\\NuGet.exe')<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Exec</span> <span class=\"token attr-name\">Command</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token entity named-entity\" title=\"&quot;\">&amp;quot;</span>$(SolutionDir)packages\\OctoPack.3.0.60\\tools\\NuGet.exe<span class=\"token entity named-entity\" title=\"&quot;\">&amp;quot;</span> update -Source <span class=\"token entity named-entity\" title=\"&quot;\">&amp;quot;</span>http://tc.rabota.local/httpAuth/app/nuget/v1/FeedService.svc/<span class=\"token entity named-entity\" title=\"&quot;\">&amp;quot;</span> -Id <span class=\"token entity named-entity\" title=\"&quot;\">&amp;quot;</span>CVBuilder.Templates<span class=\"token entity named-entity\" title=\"&quot;\">&amp;quot;</span> -NonInteractive <span class=\"token entity named-entity\" title=\"&quot;\">&amp;quot;</span>$(MSBuildProjectDirectory)\\packages.config<span class=\"token entity named-entity\" title=\"&quot;\">&amp;quot;</span><span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>Target</span><span class=\"token punctuation\">></span></span></code></pre></div>"}},"pageContext":{"id":"e1d33aeb-d6b7-51c6-b7cc-c0393e6213be"}},"staticQueryHashes":[],"slicesMap":{}}