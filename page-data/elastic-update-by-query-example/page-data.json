{"componentChunkName":"component---src-templates-note-js","path":"/elastic-update-by-query-example/","result":{"data":{"remark":{"fields":{"path":"elastic-update-by-query-example"},"meta":{"title":""},"headings":[{"value":"ElasticSearch update by query example"}],"html":"<h1>ElasticSearch update by query example</h1>\n<div class=\"gatsby-highlight\" data-language=\"http\"><pre class=\"language-http\"><code class=\"language-http\">DELETE /mac\n\n# POI: let elastic handle document _id\nPOST /mac/profile\n{\n  \"cid\": \"1\",\n  \"name\": \"unknown\",\n  \"vacancies_disliked\": {}\n}\n\nPOST /mac/profile\n{\n  \"cid\": \"1\",\n  \"uid\": \"1\",\n  \"name\": \"alex\",\n  \"vacancies_disliked\": {}\n}\n\n# POI: partialy update 1 to 2 documents via script in single request\nPOST /mac/profile/_update_by_query\n{\n  \"query\": {\n    \"bool\": {\n      \"should\": [\n        {\n          \"term\": {\n            \"cid\": \"1\"\n          }\n        },\n        {\n          \"term\": {\n            \"uid\": \"1\"\n          }\n        }\n      ],\n      \"minimum_number_should_match\": 1\n    }\n  },\n  \"script\": {\n    \"inline\": \"ctx._source.vacancies_disliked[params.vid.toString()] = true\",\n    \"lang\": \"painless\",\n    \"params\": {\n      \"vid\": 123\n    }\n  }\n}\n\nPOST /mac/_search\n{\n  \"query\": {\n    \"match_all\": {}\n  }\n}</code></pre></div>"}},"pageContext":{"id":"560f9be8-be07-5c6e-9857-647f10a6fc60"}},"staticQueryHashes":[],"slicesMap":{}}