{"componentChunkName":"component---src-templates-note-js","path":"/firewalld/","result":{"data":{"remark":{"fields":{"path":"firewalld"},"meta":{"title":""},"headings":[{"value":"FirewallD"}],"html":"<h1>FirewallD</h1>\n<h2>Start/enable firewalld</h2>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">systemctl start firewalld\nsystemctl <span class=\"token builtin class-name\">enable</span> firewalld</code></pre></div>\n<h2>Reload</h2>\n<p>To changes take effect run:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">firewall-cmd <span class=\"token parameter variable\">--reload</span></code></pre></div>\n<h2>List current rules</h2>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">firewall-cmd --list-all</code></pre></div>\n<h2>Services</h2>\n<p><a href=\"https://firewalld.org/documentation/man-pages/firewalld.service\">docs</a></p>\n<p><strong>/etc/firewalld/services/redis.xml</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"utf-8\"?></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>service</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>short</span><span class=\"token punctuation\">></span></span>redis<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>short</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>description</span><span class=\"token punctuation\">></span></span>redis<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>description</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>port</span> <span class=\"token attr-name\">protocol</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>tcp<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">port</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>6379<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>service</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p><strong>/etc/firewalld/services/sentinel.xml</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"utf-8\"?></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>service</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>short</span><span class=\"token punctuation\">></span></span>sentinel<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>short</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>description</span><span class=\"token punctuation\">></span></span>sentinel<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>description</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>port</span> <span class=\"token attr-name\">protocol</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>tcp<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">port</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>26379<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>service</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">firewall-cmd <span class=\"token parameter variable\">--reload</span>\nfirewall-cmd --get-services</code></pre></div>\n<p><strong>Alternative way with CLI</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">firewall-cmd <span class=\"token parameter variable\">--permanent</span> --new-service<span class=\"token operator\">=</span>http\nfirewall-cmd <span class=\"token parameter variable\">--permanent</span> <span class=\"token parameter variable\">--service</span><span class=\"token operator\">=</span>http --add-port<span class=\"token operator\">=</span><span class=\"token number\">80</span>/tcp\nfirewall-cmd <span class=\"token parameter variable\">--permanent</span> <span class=\"token parameter variable\">--service</span><span class=\"token operator\">=</span>http --add-port<span class=\"token operator\">=</span><span class=\"token number\">443</span>/tcp\nfirewall-cmd <span class=\"token parameter variable\">--permanent</span> <span class=\"token parameter variable\">--service</span><span class=\"token operator\">=</span>http --set-description<span class=\"token operator\">=</span>nginx\nfirewall-cmd <span class=\"token parameter variable\">--permanent</span> <span class=\"token parameter variable\">--service</span><span class=\"token operator\">=</span>http --set-short<span class=\"token operator\">=</span>nginx</code></pre></div>\n<h2>Allow access to certain service from concrete IP address</h2>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">firewall-cmd <span class=\"token parameter variable\">--permanent</span> --add-rich-rule <span class=\"token string\">'rule family=\"ipv4\" source address=\"217.20.165.109/32\" service name=\"redis\" accept'</span>\nfirewall-cmd <span class=\"token parameter variable\">--reload</span></code></pre></div>\n<h2>Zones</h2>\n<h3>List available zones</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">firewall-cmd --list-all-zones</code></pre></div>\n<h3>Create zone</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">firewall-cmd <span class=\"token parameter variable\">--permanent</span> --new-zone<span class=\"token operator\">=</span>demo\nfirewall-cmd <span class=\"token parameter variable\">--permanent</span> <span class=\"token parameter variable\">--zone</span><span class=\"token operator\">=</span>demo --add-source<span class=\"token operator\">=</span><span class=\"token string\">\"178.150.44.191/32\"</span>\nfirewall-cmd <span class=\"token parameter variable\">--permanent</span> <span class=\"token parameter variable\">--zone</span><span class=\"token operator\">=</span>demo --add-source<span class=\"token operator\">=</span><span class=\"token string\">\"217.20.165.104/29\"</span>\nfirewall-cmd <span class=\"token parameter variable\">--reload</span>\nfirewall-cmd --get-active-zones\nfirewall-cmd <span class=\"token parameter variable\">--zone</span><span class=\"token operator\">=</span>demo --list-services\nfirewall-cmd <span class=\"token parameter variable\">--permanent</span> <span class=\"token parameter variable\">--zone</span><span class=\"token operator\">=</span>demo --add-service<span class=\"token operator\">=</span>ssh\nfirewall-cmd <span class=\"token parameter variable\">--reload</span>\nfirewall-cmd <span class=\"token parameter variable\">--zone</span><span class=\"token operator\">=</span>demo --list-services</code></pre></div>\n<h3>Demo - disallow ssh from public, allow from certain IP</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">firewall-cmd <span class=\"token parameter variable\">--permanent</span> --new-zone<span class=\"token operator\">=</span>demo\nfirewall-cmd <span class=\"token parameter variable\">--permanent</span> <span class=\"token parameter variable\">--zone</span><span class=\"token operator\">=</span>demo --add-source<span class=\"token operator\">=</span><span class=\"token string\">\"178.150.44.191/32\"</span>\nfirewall-cmd <span class=\"token parameter variable\">--permanent</span> <span class=\"token parameter variable\">--zone</span><span class=\"token operator\">=</span>demo --add-source<span class=\"token operator\">=</span><span class=\"token string\">\"217.20.165.104/29\"</span> --set-short<span class=\"token operator\">=</span><span class=\"token string\">\"office\"</span>\nfirewall-cmd <span class=\"token parameter variable\">--permanent</span> <span class=\"token parameter variable\">--zone</span><span class=\"token operator\">=</span>demo --list-sources\nfirewall-cmd <span class=\"token parameter variable\">--permanent</span> <span class=\"token parameter variable\">--zone</span><span class=\"token operator\">=</span>demo --add-service<span class=\"token operator\">=</span>ssh\nfirewall-cmd <span class=\"token parameter variable\">--permanent</span> <span class=\"token parameter variable\">--zone</span><span class=\"token operator\">=</span>public --remove-service<span class=\"token operator\">=</span>ssh\nfirewall-cmd <span class=\"token parameter variable\">--reload</span></code></pre></div>\n<h3>Demo - trusted IP</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">firewall-cmd <span class=\"token parameter variable\">--permanent</span> <span class=\"token parameter variable\">--zone</span><span class=\"token operator\">=</span>demo --remove-source<span class=\"token operator\">=</span><span class=\"token string\">\"217.20.165.104/29\"</span>\nfirewall-cmd <span class=\"token parameter variable\">--permanent</span> <span class=\"token parameter variable\">--zone</span><span class=\"token operator\">=</span>trusted --add-source<span class=\"token operator\">=</span><span class=\"token string\">\"217.20.165.104/29\"</span>\nfirewall-cmd <span class=\"token parameter variable\">--reload</span></code></pre></div>"}},"pageContext":{"id":"481a438a-1226-5825-bfa0-f1a8d5427251"}},"staticQueryHashes":[],"slicesMap":{}}