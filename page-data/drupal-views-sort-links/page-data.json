{"componentChunkName":"component---src-templates-note-js","path":"/drupal-views-sort-links/","result":{"data":{"remark":{"fields":{"path":"drupal-views-sort-links"},"meta":{"title":""},"headings":[{"value":"Drupal views sort links"}],"html":"<h1>Drupal views sort links</h1>\n<p>Create any view page, for example i have one with url /service.</p>\n<p>Create simple module wich will implement <code class=\"language-text\">hook__views_query_alter</code>, like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token keyword\">function</span> <span class=\"token function-definition function\">sync_company_prices_views_query_alter</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span><span class=\"token variable\">$view</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span><span class=\"token variable\">$query</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$view</span><span class=\"token operator\">-></span><span class=\"token property\">name</span> <span class=\"token operator\">==</span> <span class=\"token string single-quoted-string\">'Services'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">arg</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token string single-quoted-string\">'pfa'</span><span class=\"token punctuation\">)</span> <span class=\"token variable\">$query</span><span class=\"token operator\">-></span><span class=\"token property\">orderby</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token string single-quoted-string\">'field_price_from_value ASC'</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">arg</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token string single-quoted-string\">'pfd'</span><span class=\"token punctuation\">)</span> <span class=\"token variable\">$query</span><span class=\"token operator\">-></span><span class=\"token property\">orderby</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token string single-quoted-string\">'field_price_from_value DESC'</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">arg</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token string single-quoted-string\">'pta'</span><span class=\"token punctuation\">)</span> <span class=\"token variable\">$query</span><span class=\"token operator\">-></span><span class=\"token property\">orderby</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token string single-quoted-string\">'field_price_to_value ASC'</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">arg</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token string single-quoted-string\">'ptd'</span><span class=\"token punctuation\">)</span> <span class=\"token variable\">$query</span><span class=\"token operator\">-></span><span class=\"token property\">orderby</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token string single-quoted-string\">'field_price_to_value DESC'</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Now anywhere in theme u can add links like:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;a href=\"/services/pfa\">by price from ASC&lt;/a> |\n&lt;a href=\"/services/pfd\">by price from DESC&lt;/a> |\n&lt;a href=\"/services/pta\">by price to ASC&lt;/a> |\n&lt;a href=\"/services/ptd\">by price to DESC&lt;/a></code></pre></div>"}},"pageContext":{"id":"eff2c7e0-3c4a-5f18-97a1-5fde1f1a1da6"}},"staticQueryHashes":[],"slicesMap":{}}