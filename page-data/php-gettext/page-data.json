{"componentChunkName":"component---src-templates-note-js","path":"/php-gettext/","result":{"data":{"remark":{"fields":{"path":"php-gettext"},"meta":{"title":""},"headings":[{"value":"php gettext"}],"html":"<h1>php gettext</h1>\n<p>При создании сайтов, которые в последствии, возможно будет необходимо перевести на другой язык, либо добавить еще пару языков, встает вопрос о том как сделать так, чтобы когда этот момент настанет перевести сайт без особых затруднений.</p>\n<p>Тут поможет <a href=\"http://php.net/manual/en/book.gettext.php\">gettext</a>.Для того чтобы эта штука заработала необходимо по всюду на сайте, где есть вывод какого либо текста, окружать текст вот таким кодом: <code class=\"language-text\">_()</code>.</p>\n<p>Например если где либо на странице было вот такое:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span>Header for page<span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> <span class=\"token keyword\">echo</span> <span class=\"token variable\">$pagetitle</span><span class=\"token delimiter important\">?></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>Необходимо переделать вот так:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> <span class=\"token keyword\">echo</span> <span class=\"token function\">_</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'Header for page'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">.</span><span class=\"token string single-quoted-string\">' '</span><span class=\"token operator\">.</span><span class=\"token variable\">$pagetitle</span><span class=\"token delimiter important\">?></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>Эта функция и будет заниматься переводом всех строк в будущем.</p>\n<p>Теперь необходимо в корне проекта создать следующие папки:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">/locale/ru_RU/LC_MESSAGES</code></pre></div>\n<p>Теперь можно запускать <a href=\"http://www.poedit.net/\">Poedit</a>, в котором необходимо создать новый каталог, он создаст необходимые PO файлы, которые в нем же можно и перевести.</p>\n<p>Пример кода:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n<span class=\"token function\">define</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'LOCALES_FOLDER_PATH'</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$_SERVER</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'DOCUMENT_ROOT'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">.</span><span class=\"token constant\">DIRECTORY_SEPARATOR</span><span class=\"token operator\">.</span><span class=\"token string single-quoted-string\">'gettext'</span><span class=\"token operator\">.</span><span class=\"token constant\">DIRECTORY_SEPARATOR</span><span class=\"token operator\">.</span><span class=\"token string single-quoted-string\">'locale'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">define</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'PO_FILE_NAME'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'default'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$locale</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'ru_RU'</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">putenv</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'LANG='</span><span class=\"token operator\">.</span><span class=\"token variable\">$locale</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">setlocale</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">LC_ALL</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$locale</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">bindtextdomain</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">PO_FILE_NAME</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">LOCALES_FOLDER_PATH</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">textdomain</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">PO_FILE_NAME</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">bind_textdomain_codeset</span><span class=\"token punctuation\">(</span><span class=\"token constant\">PO_FILE_NAME</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'UTF-8'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">echo</span> <span class=\"token function\">_</span><span class=\"token punctuation\">(</span><span class=\"token string double-quoted-string\">\"Hello world!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span></code></pre></div>"}},"pageContext":{"id":"23bab85d-ee84-5bd1-b225-a0cbde641623"}},"staticQueryHashes":[],"slicesMap":{}}