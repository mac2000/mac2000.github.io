{"componentChunkName":"component---src-templates-note-js","path":"/wordpress-custom-database-table-example-full/","result":{"data":{"remark":{"fields":{"path":"wordpress-custom-database-table-example-full"},"meta":{"title":""},"headings":[{"value":"WordPress custom database table example (full)"}],"html":"<h1>WordPress custom database table example (full)</h1>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 822px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/66314e9cf9bb4875329142a785e274c6/f73a1/cte1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 59.765625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAA7DAAAOwwHHb6hkAAABp0lEQVR42qVS7YrbMBDUcxfaONR3gZRCnyA/W/IceYDSlpKSc+L44p6dWLItyZYdf82x8iVwf0rvbmGQGa1md3bNJo6Dd+8/YDqdYnZ7i5sbF5PJBK7rWnx0XTiO80/MZjPM53N8+vwFbHcf4s8+xEMcQykFUxkIwcE5R2Eq6KrG/8cAttkF2IURUsEhpUSe58iyHFVVIRUCxhj0/YCm7TAMA4Z+QN/36DpCZ7+Jr+sa5/OZBPfw/0YQfBQUIkWUCBRFAa21PZXWCOMTsiyzHBWRSkHkEqYsUZalzaMm2J2/x9o/II6PVpCS6aJtO7Rta0GVqXMC3VNnxFFXlxwC8czz9/jlBdjeh1BKjtW0tg8uoIfqaRyXu7qqrjYvIFG28QP83GzheZ5tO5cSR5FZ4dIYa4ksPyQpdFFYnjipNNJcPbNMBdg2OOAQnZClqd1ywscNU1KSJHZmZKVp2mf2CE3TXK2W5dMMf/xe4/v6DkEQQAgxLp+2OQw2kc6XBPv6bYnlconFYoHVanUVfG2w6MTt+tumQV2f8dZgCRc4Jgk4H/+9two+AgB6hSjUIRkrAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"screenshot\"\n        title=\"\"\n        src=\"/static/66314e9cf9bb4875329142a785e274c6/f73a1/cte1.png\"\n        srcset=\"/static/66314e9cf9bb4875329142a785e274c6/6f3f2/cte1.png 256w,\n/static/66314e9cf9bb4875329142a785e274c6/01e7c/cte1.png 512w,\n/static/66314e9cf9bb4875329142a785e274c6/f73a1/cte1.png 822w\"\n        sizes=\"(max-width: 822px) 100vw, 822px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 823px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a4256324e149f932fbf190b2ae4ca48c/31aff/cte2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 59.375%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAA7DAAAOwwHHb6hkAAABZElEQVR42qWSW2vCQBCF95cXauK9SKH0zZdSKNL/IfStLUW81JgmRuLWzWWzuWginrKLSi+2YB342IfZOXNmd0hJ03F2XkK5XEGz0UC9XoOmaeqs1mqoVKvQdf1Pms0LtFotXF5dgxi2g9HUBV0wxHGM1WqFIAjAeYh0VSiOCdIfmzBnLjyPgXMOz/dAKUUURUiTBEmSqEYSIcRBdrk0y0AGhglrNofHFkpEupNkWbZHiopIYL0ukOe5muI7y+VSnWRkmOibU8znVHXxgwBhyFVyJ5imKRhjCnmnKIof7BqRoWGiZ1iY2A6EiBBHXBUl23GVu+1oqsHWySGHEjKaWHgejDExDIg4hsU4eJyiyL8WSAef3fwGeX2z4dAFojAACzluHoawPKF+bLPZ4Nggjy89PA3GsG0bvu/j1CC3d/fodDpot9vodrv/drYXdFwKrlZirR71ZIeu64K+U7USckFPFfwAtESHOuHtd/sAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"screenshot\"\n        title=\"\"\n        src=\"/static/a4256324e149f932fbf190b2ae4ca48c/31aff/cte2.png\"\n        srcset=\"/static/a4256324e149f932fbf190b2ae4ca48c/6f3f2/cte2.png 256w,\n/static/a4256324e149f932fbf190b2ae4ca48c/01e7c/cte2.png 512w,\n/static/a4256324e149f932fbf190b2ae4ca48c/31aff/cte2.png 823w\"\n        sizes=\"(max-width: 823px) 100vw, 823px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n<span class=\"token comment\">/*\nPlugin Name: Custom table example\nDescription: example plugin to demonstrate wordpress capatabilities\nPlugin URI: http://mac-blog.org.ua/\nAuthor URI: http://mac-blog.org.ua/\nAuthor: Marchenko Alexandr\nLicense: Public Domain\nVersion: 1.1\n*/</span>\n\n<span class=\"token comment\">/**\n    * PART 1. Defining Custom Database Table\n    * ============================================================================\n    *\n    * In this part you are going to define custom database table,\n    * create it, update, and fill with some dummy data\n    *\n    * http://codex.wordpress.org/Creating_Tables_with_Plugins\n    *\n    * In case your are developing and want to check plugin use:\n    *\n    * DROP TABLE IF EXISTS wp_cte;\n    * DELETE FROM wp_options WHERE option_name = 'custom_table_example_install_data';\n    *\n    * to drop table and option\n    */</span>\n\n<span class=\"token comment\">/**\n    * $custom_table_example_db_version - holds current database version\n    * and used on plugin update to sync database tables\n    */</span>\n<span class=\"token keyword\">global</span> <span class=\"token variable\">$custom_table_example_db_version</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$custom_table_example_db_version</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'1.1'</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// version changed from 1.0 to 1.1</span>\n\n<span class=\"token comment\">/**\n    * register_activation_hook implementation\n    *\n    * will be called when user activates plugin first time\n    * must create needed database tables\n    */</span>\n<span class=\"token keyword\">function</span> <span class=\"token function-definition function\">custom_table_example_install</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">global</span> <span class=\"token variable\">$wpdb</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">global</span> <span class=\"token variable\">$custom_table_example_db_version</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token variable\">$table_name</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$wpdb</span><span class=\"token operator\">-></span><span class=\"token property\">prefix</span> <span class=\"token operator\">.</span> <span class=\"token string single-quoted-string\">'cte'</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// do not forget about tables prefix</span>\n\n    <span class=\"token comment\">// sql to create your table</span>\n    <span class=\"token comment\">// NOTICE that:</span>\n    <span class=\"token comment\">// 1. each field MUST be in separate line</span>\n    <span class=\"token comment\">// 2. There must be two spaces between PRIMARY KEY and its name</span>\n    <span class=\"token comment\">//    Like this: PRIMARY KEY[space][space](id)</span>\n    <span class=\"token comment\">// otherwise dbDelta will not work</span>\n    <span class=\"token variable\">$sql</span> <span class=\"token operator\">=</span> <span class=\"token string double-quoted-string\">\"CREATE TABLE \"</span> <span class=\"token operator\">.</span> <span class=\"token variable\">$table_name</span> <span class=\"token operator\">.</span> <span class=\"token string double-quoted-string\">\" (\n        id int(11) NOT NULL AUTO_INCREMENT,\n        name tinytext NOT NULL,\n        email VARCHAR(100) NOT NULL,\n        age int(11) NULL,\n        PRIMARY KEY  (id)\n    );\"</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// we do not execute sql directly</span>\n    <span class=\"token comment\">// we are calling dbDelta which cant migrate database</span>\n    <span class=\"token keyword\">require_once</span><span class=\"token punctuation\">(</span><span class=\"token constant\">ABSPATH</span> <span class=\"token operator\">.</span> <span class=\"token string single-quoted-string\">'wp-admin/includes/upgrade.php'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">dbDelta</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$sql</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// save current database version for later use (on upgrade)</span>\n    <span class=\"token function\">add_option</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'custom_table_example_db_version'</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$custom_table_example_db_version</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">/**\n        * [OPTIONAL] Example of updating to 1.1 version\n        *\n        * If you develop new version of plugin\n        * just increment $custom_table_example_db_version variable\n        * and add following block of code\n        *\n        * must be repeated for each new version\n        * in version 1.1 we change email field\n        * to contain 200 chars rather 100 in version 1.0\n        * and again we are not executing sql\n        * we are using dbDelta to migrate table changes\n        */</span>\n    <span class=\"token variable\">$installed_ver</span> <span class=\"token operator\">=</span> <span class=\"token function\">get_option</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'custom_table_example_db_version'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$installed_ver</span> <span class=\"token operator\">!=</span> <span class=\"token variable\">$custom_table_example_db_version</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token variable\">$sql</span> <span class=\"token operator\">=</span> <span class=\"token string double-quoted-string\">\"CREATE TABLE \"</span> <span class=\"token operator\">.</span> <span class=\"token variable\">$table_name</span> <span class=\"token operator\">.</span> <span class=\"token string double-quoted-string\">\" (\n            id int(11) NOT NULL AUTO_INCREMENT,\n            name tinytext NOT NULL,\n            email VARCHAR(200) NOT NULL,\n            age int(11) NULL,\n            PRIMARY KEY  (id)\n        );\"</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">require_once</span><span class=\"token punctuation\">(</span><span class=\"token constant\">ABSPATH</span> <span class=\"token operator\">.</span> <span class=\"token string single-quoted-string\">'wp-admin/includes/upgrade.php'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">dbDelta</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$sql</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">// notice that we are updating option, rather than adding it</span>\n        <span class=\"token function\">update_option</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'custom_table_example_db_version'</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$custom_table_example_db_version</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">register_activation_hook</span><span class=\"token punctuation\">(</span><span class=\"token constant\">__FILE__</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'custom_table_example_install'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/**\n    * register_activation_hook implementation\n    *\n    * [OPTIONAL]\n    * additional implementation of register_activation_hook\n    * to insert some dummy data\n    */</span>\n<span class=\"token keyword\">function</span> <span class=\"token function-definition function\">custom_table_example_install_data</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">global</span> <span class=\"token variable\">$wpdb</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token variable\">$table_name</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$wpdb</span><span class=\"token operator\">-></span><span class=\"token property\">prefix</span> <span class=\"token operator\">.</span> <span class=\"token string single-quoted-string\">'cte'</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// do not forget about tables prefix</span>\n\n    <span class=\"token variable\">$wpdb</span><span class=\"token operator\">-></span><span class=\"token function\">insert</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$table_name</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span>\n        <span class=\"token string single-quoted-string\">'name'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'Alex'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string single-quoted-string\">'email'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'alex@example.com'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string single-quoted-string\">'age'</span> <span class=\"token operator\">=></span> <span class=\"token number\">25</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$wpdb</span><span class=\"token operator\">-></span><span class=\"token function\">insert</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$table_name</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span>\n        <span class=\"token string single-quoted-string\">'name'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'Maria'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string single-quoted-string\">'email'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'maria@example.com'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string single-quoted-string\">'age'</span> <span class=\"token operator\">=></span> <span class=\"token number\">22</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">register_activation_hook</span><span class=\"token punctuation\">(</span><span class=\"token constant\">__FILE__</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'custom_table_example_install_data'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/**\n    * Trick to update plugin database, see docs\n    */</span>\n<span class=\"token keyword\">function</span> <span class=\"token function-definition function\">custom_table_example_update_db_check</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">global</span> <span class=\"token variable\">$custom_table_example_db_version</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">get_site_option</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'custom_table_example_db_version'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">!=</span> <span class=\"token variable\">$custom_table_example_db_version</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">custom_table_example_install</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">add_action</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'plugins_loaded'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'custom_table_example_update_db_check'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/**\n    * PART 2. Defining Custom Table List\n    * ============================================================================\n    *\n    * In this part you are going to define custom table list class,\n    * that will display your database records in nice looking table\n    *\n    * http://codex.wordpress.org/Class_Reference/WP_List_Table\n    * http://wordpress.org/extend/plugins/custom-list-table-example/\n    */</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token function\">class_exists</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'WP_List_Table'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">require_once</span><span class=\"token punctuation\">(</span><span class=\"token constant\">ABSPATH</span> <span class=\"token operator\">.</span> <span class=\"token string single-quoted-string\">'wp-admin/includes/class-wp-list-table.php'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/**\n    * Custom_Table_Example_List_Table class that will display our custom table\n    * records in nice table\n    */</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name-definition class-name\">Custom_Table_Example_List_Table</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">WP_List_Table</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">/**\n        * [REQUIRED] You must declare constructor and give some basic params\n        */</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function-definition function\">__construct</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">global</span> <span class=\"token variable\">$status</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$page</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword static-context\">parent</span><span class=\"token operator\">::</span><span class=\"token function\">__construct</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span>\n            <span class=\"token string single-quoted-string\">'singular'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'person'</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string single-quoted-string\">'plural'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'persons'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">/**\n        * [REQUIRED] this is a default column renderer\n        *\n        * @param $item - row (key, value array)\n        * @param $column_name - string (key)\n        * @return HTML\n        */</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function-definition function\">column_default</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$item</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$column_name</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token variable\">$item</span><span class=\"token punctuation\">[</span><span class=\"token variable\">$column_name</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">/**\n        * [OPTIONAL] this is example, how to render specific column\n        *\n        * method name must be like this: \"column_[column_name]\"\n        *\n        * @param $item - row (key, value array)\n        * @return HTML\n        */</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function-definition function\">column_age</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$item</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token string single-quoted-string\">'&lt;em>'</span> <span class=\"token operator\">.</span> <span class=\"token variable\">$item</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'age'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">.</span> <span class=\"token string single-quoted-string\">'&lt;/em>'</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">/**\n        * [OPTIONAL] this is example, how to render column with actions,\n        * when you hover row \"Edit | Delete\" links showed\n        *\n        * @param $item - row (key, value array)\n        * @return HTML\n        */</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function-definition function\">column_name</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$item</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// links going to /admin.php?page=[your_plugin_page][&amp;other_params]</span>\n        <span class=\"token comment\">// notice how we used $_REQUEST['page'], so action will be done on curren page</span>\n        <span class=\"token comment\">// also notice how we use $this->_args['singular'] so in this example it will</span>\n        <span class=\"token comment\">// be something like &amp;person=2</span>\n        <span class=\"token variable\">$actions</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span>\n            <span class=\"token string single-quoted-string\">'edit'</span> <span class=\"token operator\">=></span> <span class=\"token function\">sprintf</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'&lt;a href=\"?page=persons_form&amp;id=%s\">%s&lt;/a>'</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$item</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'id'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token function\">__</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'Edit'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'custom_table_example'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string single-quoted-string\">'delete'</span> <span class=\"token operator\">=></span> <span class=\"token function\">sprintf</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'&lt;a href=\"?page=%s&amp;action=delete&amp;id=%s\">%s&lt;/a>'</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$_REQUEST</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'page'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$item</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'id'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token function\">__</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'Delete'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'custom_table_example'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">return</span> <span class=\"token function\">sprintf</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'%s %s'</span><span class=\"token punctuation\">,</span>\n            <span class=\"token variable\">$item</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'name'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n            <span class=\"token variable\">$this</span><span class=\"token operator\">-></span><span class=\"token function\">row_actions</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$actions</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">/**\n        * [REQUIRED] this is how checkbox column renders\n        *\n        * @param $item - row (key, value array)\n        * @return HTML\n        */</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function-definition function\">column_cb</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$item</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token function\">sprintf</span><span class=\"token punctuation\">(</span>\n            <span class=\"token string single-quoted-string\">'&lt;input type=\"checkbox\" name=\"id[]\" value=\"%s\" />'</span><span class=\"token punctuation\">,</span>\n            <span class=\"token variable\">$item</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'id'</span><span class=\"token punctuation\">]</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">/**\n        * [REQUIRED] This method return columns to display in table\n        * you can skip columns that you do not want to show\n        * like content, or description\n        *\n        * @return array\n        */</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function-definition function\">get_columns</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token variable\">$columns</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span>\n            <span class=\"token string single-quoted-string\">'cb'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'&lt;input type=\"checkbox\" />'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">//Render a checkbox instead of text</span>\n            <span class=\"token string single-quoted-string\">'name'</span> <span class=\"token operator\">=></span> <span class=\"token function\">__</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'Name'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'custom_table_example'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string single-quoted-string\">'email'</span> <span class=\"token operator\">=></span> <span class=\"token function\">__</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'E-Mail'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'custom_table_example'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string single-quoted-string\">'age'</span> <span class=\"token operator\">=></span> <span class=\"token function\">__</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'Age'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'custom_table_example'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token variable\">$columns</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">/**\n        * [OPTIONAL] This method return columns that may be used to sort table\n        * all strings in array - is column names\n        * notice that true on name column means that its default sort\n        *\n        * @return array\n        */</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function-definition function\">get_sortable_columns</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token variable\">$sortable_columns</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span>\n            <span class=\"token string single-quoted-string\">'name'</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'name'</span><span class=\"token punctuation\">,</span> <span class=\"token constant boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string single-quoted-string\">'email'</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'email'</span><span class=\"token punctuation\">,</span> <span class=\"token constant boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string single-quoted-string\">'age'</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'age'</span><span class=\"token punctuation\">,</span> <span class=\"token constant boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token variable\">$sortable_columns</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">/**\n        * [OPTIONAL] Return array of bult actions if has any\n        *\n        * @return array\n        */</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function-definition function\">get_bulk_actions</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token variable\">$actions</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span>\n            <span class=\"token string single-quoted-string\">'delete'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'Delete'</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token variable\">$actions</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">/**\n        * [OPTIONAL] This method processes bulk actions\n        * it can be outside of class\n        * it can not use wp_redirect coz there is output already\n        * in this example we are processing delete action\n        * message about successful deletion will be shown on page in next part\n        */</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function-definition function\">process_bulk_action</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">global</span> <span class=\"token variable\">$wpdb</span><span class=\"token punctuation\">;</span>\n        <span class=\"token variable\">$table_name</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$wpdb</span><span class=\"token operator\">-></span><span class=\"token property\">prefix</span> <span class=\"token operator\">.</span> <span class=\"token string single-quoted-string\">'cte'</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// do not forget about tables prefix</span>\n\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'delete'</span> <span class=\"token operator\">===</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-></span><span class=\"token function\">current_action</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token variable\">$ids</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">isset</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$_REQUEST</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'id'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> <span class=\"token variable\">$_REQUEST</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'id'</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">:</span> <span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">is_array</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$ids</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token variable\">$ids</span> <span class=\"token operator\">=</span> <span class=\"token function\">implode</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">','</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$ids</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token keyword\">empty</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$ids</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token variable\">$wpdb</span><span class=\"token operator\">-></span><span class=\"token function\">query</span><span class=\"token punctuation\">(</span><span class=\"token string double-quoted-string\">\"DELETE FROM <span class=\"token interpolation\"><span class=\"token variable\">$table_name</span></span> WHERE id IN(<span class=\"token interpolation\"><span class=\"token variable\">$ids</span></span>)\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">/**\n        * [REQUIRED] This is the most important method\n        *\n        * It will get rows from database and prepare them to be showed in table\n        */</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function-definition function\">prepare_items</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">global</span> <span class=\"token variable\">$wpdb</span><span class=\"token punctuation\">;</span>\n        <span class=\"token variable\">$table_name</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$wpdb</span><span class=\"token operator\">-></span><span class=\"token property\">prefix</span> <span class=\"token operator\">.</span> <span class=\"token string single-quoted-string\">'cte'</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// do not forget about tables prefix</span>\n\n        <span class=\"token variable\">$per_page</span> <span class=\"token operator\">=</span> <span class=\"token number\">5</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// constant, how much records will be shown per page</span>\n\n        <span class=\"token variable\">$columns</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-></span><span class=\"token function\">get_columns</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token variable\">$hidden</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token variable\">$sortable</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-></span><span class=\"token function\">get_sortable_columns</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">// here we configure table headers, defined in our methods</span>\n        <span class=\"token variable\">$this</span><span class=\"token operator\">-></span><span class=\"token property\">_column_headers</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$columns</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$hidden</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$sortable</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">// [OPTIONAL] process bulk action if any</span>\n        <span class=\"token variable\">$this</span><span class=\"token operator\">-></span><span class=\"token function\">process_bulk_action</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">// will be used in pagination settings</span>\n        <span class=\"token variable\">$total_items</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$wpdb</span><span class=\"token operator\">-></span><span class=\"token function\">get_var</span><span class=\"token punctuation\">(</span><span class=\"token string double-quoted-string\">\"SELECT COUNT(id) FROM <span class=\"token interpolation\"><span class=\"token variable\">$table_name</span></span>\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">// prepare query params, as usual current page, order by and order direction</span>\n        <span class=\"token variable\">$paged</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">isset</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$_REQUEST</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'paged'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$per_page</span> <span class=\"token operator\">*</span> <span class=\"token function\">max</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token function\">intval</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$_REQUEST</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'paged'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n        <span class=\"token variable\">$orderby</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">isset</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$_REQUEST</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'orderby'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">in_array</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$_REQUEST</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'orderby'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token function\">array_keys</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$this</span><span class=\"token operator\">-></span><span class=\"token function\">get_sortable_columns</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> <span class=\"token variable\">$_REQUEST</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'orderby'</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">:</span> <span class=\"token string single-quoted-string\">'name'</span><span class=\"token punctuation\">;</span>\n        <span class=\"token variable\">$order</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">isset</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$_REQUEST</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'order'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">in_array</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$_REQUEST</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'order'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'asc'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'desc'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> <span class=\"token variable\">$_REQUEST</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'order'</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">:</span> <span class=\"token string single-quoted-string\">'asc'</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">// [REQUIRED] define $items array</span>\n        <span class=\"token comment\">// notice that last argument is ARRAY_A, so we will retrieve array</span>\n        <span class=\"token variable\">$this</span><span class=\"token operator\">-></span><span class=\"token property\">items</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$wpdb</span><span class=\"token operator\">-></span><span class=\"token function\">get_results</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$wpdb</span><span class=\"token operator\">-></span><span class=\"token function\">prepare</span><span class=\"token punctuation\">(</span><span class=\"token string double-quoted-string\">\"SELECT * FROM <span class=\"token interpolation\"><span class=\"token variable\">$table_name</span></span> ORDER BY <span class=\"token interpolation\"><span class=\"token variable\">$orderby</span></span> <span class=\"token interpolation\"><span class=\"token variable\">$order</span></span> LIMIT %d OFFSET %d\"</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$per_page</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$paged</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">ARRAY_A</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">// [REQUIRED] configure pagination</span>\n        <span class=\"token variable\">$this</span><span class=\"token operator\">-></span><span class=\"token function\">set_pagination_args</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span>\n            <span class=\"token string single-quoted-string\">'total_items'</span> <span class=\"token operator\">=></span> <span class=\"token variable\">$total_items</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// total items defined above</span>\n            <span class=\"token string single-quoted-string\">'per_page'</span> <span class=\"token operator\">=></span> <span class=\"token variable\">$per_page</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// per page constant defined at top of method</span>\n            <span class=\"token string single-quoted-string\">'total_pages'</span> <span class=\"token operator\">=></span> <span class=\"token function\">ceil</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$total_items</span> <span class=\"token operator\">/</span> <span class=\"token variable\">$per_page</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// calculate pages count</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/**\n    * PART 3. Admin page\n    * ============================================================================\n    *\n    * In this part you are going to add admin page for custom table\n    *\n    * http://codex.wordpress.org/Administration_Menus\n    */</span>\n\n<span class=\"token comment\">/**\n    * admin_menu hook implementation, will add pages to list persons and to add new one\n    */</span>\n<span class=\"token keyword\">function</span> <span class=\"token function-definition function\">custom_table_example_admin_menu</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token function\">add_menu_page</span><span class=\"token punctuation\">(</span><span class=\"token function\">__</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'Persons'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'custom_table_example'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">__</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'Persons'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'custom_table_example'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'activate_plugins'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'persons'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'custom_table_example_persons_page_handler'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">add_submenu_page</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'persons'</span><span class=\"token punctuation\">,</span> <span class=\"token function\">__</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'Persons'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'custom_table_example'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">__</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'Persons'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'custom_table_example'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'activate_plugins'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'persons'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'custom_table_example_persons_page_handler'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// add new will be described in next part</span>\n    <span class=\"token function\">add_submenu_page</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'persons'</span><span class=\"token punctuation\">,</span> <span class=\"token function\">__</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'Add new'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'custom_table_example'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">__</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'Add new'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'custom_table_example'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'activate_plugins'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'persons_form'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'custom_table_example_persons_form_page_handler'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">add_action</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'admin_menu'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'custom_table_example_admin_menu'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/**\n    * List page handler\n    *\n    * This function renders our custom table\n    * Notice how we display message about successfull deletion\n    * Actualy this is very easy, and you can add as many features\n    * as you want.\n    *\n    * Look into /wp-admin/includes/class-wp-*-list-table.php for examples\n    */</span>\n<span class=\"token keyword\">function</span> <span class=\"token function-definition function\">custom_table_example_persons_page_handler</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">global</span> <span class=\"token variable\">$wpdb</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token variable\">$table</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Custom_Table_Example_List_Table</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$table</span><span class=\"token operator\">-></span><span class=\"token function\">prepare_items</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token variable\">$message</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">''</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'delete'</span> <span class=\"token operator\">===</span> <span class=\"token variable\">$table</span><span class=\"token operator\">-></span><span class=\"token function\">current_action</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token variable\">$message</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'&lt;div class=\"updated below-h2\" id=\"message\">&lt;p>'</span> <span class=\"token operator\">.</span> <span class=\"token function\">sprintf</span><span class=\"token punctuation\">(</span><span class=\"token function\">__</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'Items deleted: %d'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'custom_table_example'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">count</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$_REQUEST</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'id'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">.</span> <span class=\"token string single-quoted-string\">'&lt;/p>&lt;/div>'</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token delimiter important\">?></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>wrap<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>icon32 icon32-posts-post<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>icon-edit<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h2</span><span class=\"token punctuation\">></span></span><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> <span class=\"token function\">_e</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'Persons'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'custom_table_example'</span><span class=\"token punctuation\">)</span><span class=\"token delimiter important\">?></span></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>add-new-h2<span class=\"token punctuation\">\"</span></span>\n                                    <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> <span class=\"token keyword\">echo</span> <span class=\"token function\">get_admin_url</span><span class=\"token punctuation\">(</span><span class=\"token function\">get_current_blog_id</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'admin.php?page=persons_form'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token delimiter important\">?></span></span><span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> <span class=\"token function\">_e</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'Add new'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'custom_table_example'</span><span class=\"token punctuation\">)</span><span class=\"token delimiter important\">?></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h2</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> <span class=\"token keyword\">echo</span> <span class=\"token variable\">$message</span><span class=\"token punctuation\">;</span> <span class=\"token delimiter important\">?></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>form</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>persons-table<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">method</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>GET<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>hidden<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>page<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> <span class=\"token keyword\">echo</span> <span class=\"token variable\">$_REQUEST</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'page'</span><span class=\"token punctuation\">]</span> <span class=\"token delimiter important\">?></span></span><span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n        <span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> <span class=\"token variable\">$table</span><span class=\"token operator\">-></span><span class=\"token function\">display</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token delimiter important\">?></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>form</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/**\n    * PART 4. Form for adding andor editing row\n    * ============================================================================\n    *\n    * In this part you are going to add admin page for adding andor editing items\n    * You cant put all form into this function, but in this example form will\n    * be placed into meta box, and if you want you can split your form into\n    * as many meta boxes as you want\n    *\n    * http://codex.wordpress.org/Data_Validation\n    * http://codex.wordpress.org/Function_Reference/selected\n    */</span>\n\n<span class=\"token comment\">/**\n    * Form page handler checks is there some data posted and tries to save it\n    * Also it renders basic wrapper in which we are callin meta box render\n    */</span>\n<span class=\"token keyword\">function</span> <span class=\"token function-definition function\">custom_table_example_persons_form_page_handler</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">global</span> <span class=\"token variable\">$wpdb</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$table_name</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$wpdb</span><span class=\"token operator\">-></span><span class=\"token property\">prefix</span> <span class=\"token operator\">.</span> <span class=\"token string single-quoted-string\">'cte'</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// do not forget about tables prefix</span>\n\n    <span class=\"token variable\">$message</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">''</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$notice</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">''</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// this is default $item which will be used for new records</span>\n    <span class=\"token variable\">$default</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span>\n        <span class=\"token string single-quoted-string\">'id'</span> <span class=\"token operator\">=></span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string single-quoted-string\">'name'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">''</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string single-quoted-string\">'email'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">''</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string single-quoted-string\">'age'</span> <span class=\"token operator\">=></span> <span class=\"token constant\">null</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// here we are verifying does this request is post back and have correct nonce</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">wp_verify_nonce</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$_REQUEST</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'nonce'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token function\">basename</span><span class=\"token punctuation\">(</span><span class=\"token constant\">__FILE__</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// combine our default item with request params</span>\n        <span class=\"token variable\">$item</span> <span class=\"token operator\">=</span> <span class=\"token function\">shortcode_atts</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$default</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$_REQUEST</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">// validate data, and if all ok save item to database</span>\n        <span class=\"token comment\">// if id is zero insert otherwise update</span>\n        <span class=\"token variable\">$item_valid</span> <span class=\"token operator\">=</span> <span class=\"token function\">custom_table_example_validate_person</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$item</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$item_valid</span> <span class=\"token operator\">===</span> <span class=\"token constant boolean\">true</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$item</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'id'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token variable\">$result</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$wpdb</span><span class=\"token operator\">-></span><span class=\"token function\">insert</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$table_name</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$item</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token variable\">$item</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'id'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$wpdb</span><span class=\"token operator\">-></span><span class=\"token property\">insert_id</span><span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$result</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                    <span class=\"token variable\">$message</span> <span class=\"token operator\">=</span> <span class=\"token function\">__</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'Item was successfully saved'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'custom_table_example'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n                    <span class=\"token variable\">$notice</span> <span class=\"token operator\">=</span> <span class=\"token function\">__</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'There was an error while saving item'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'custom_table_example'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token punctuation\">}</span>\n            <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token variable\">$result</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$wpdb</span><span class=\"token operator\">-></span><span class=\"token function\">update</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$table_name</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$item</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'id'</span> <span class=\"token operator\">=></span> <span class=\"token variable\">$item</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'id'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$result</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                    <span class=\"token variable\">$message</span> <span class=\"token operator\">=</span> <span class=\"token function\">__</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'Item was successfully updated'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'custom_table_example'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n                    <span class=\"token variable\">$notice</span> <span class=\"token operator\">=</span> <span class=\"token function\">__</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'There was an error while updating item'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'custom_table_example'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token punctuation\">}</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token comment\">// if $item_valid not true it contains error message(s)</span>\n            <span class=\"token variable\">$notice</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$item_valid</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// if this is not post back we load item to edit or give new one to create</span>\n        <span class=\"token variable\">$item</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$default</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">isset</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$_REQUEST</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'id'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token variable\">$item</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$wpdb</span><span class=\"token operator\">-></span><span class=\"token function\">get_row</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$wpdb</span><span class=\"token operator\">-></span><span class=\"token function\">prepare</span><span class=\"token punctuation\">(</span><span class=\"token string double-quoted-string\">\"SELECT * FROM <span class=\"token interpolation\"><span class=\"token variable\">$table_name</span></span> WHERE id = %d\"</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$_REQUEST</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'id'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">ARRAY_A</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token variable\">$item</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token variable\">$item</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$default</span><span class=\"token punctuation\">;</span>\n                <span class=\"token variable\">$notice</span> <span class=\"token operator\">=</span> <span class=\"token function\">__</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'Item not found'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'custom_table_example'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">// here we adding our custom meta box</span>\n    <span class=\"token function\">add_meta_box</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'persons_form_meta_box'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'Person data'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'custom_table_example_persons_form_meta_box_handler'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'person'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'normal'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'default'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token delimiter important\">?></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>wrap<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>icon32 icon32-posts-post<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>icon-edit<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h2</span><span class=\"token punctuation\">></span></span><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> <span class=\"token function\">_e</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'Person'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'custom_table_example'</span><span class=\"token punctuation\">)</span><span class=\"token delimiter important\">?></span></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>add-new-h2<span class=\"token punctuation\">\"</span></span>\n                                <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> <span class=\"token keyword\">echo</span> <span class=\"token function\">get_admin_url</span><span class=\"token punctuation\">(</span><span class=\"token function\">get_current_blog_id</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'admin.php?page=persons'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token delimiter important\">?></span></span><span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> <span class=\"token function\">_e</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'back to list'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'custom_table_example'</span><span class=\"token punctuation\">)</span><span class=\"token delimiter important\">?></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h2</span><span class=\"token punctuation\">></span></span>\n\n    <span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token keyword\">empty</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$notice</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token delimiter important\">?></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>notice<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>error<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> <span class=\"token keyword\">echo</span> <span class=\"token variable\">$notice</span> <span class=\"token delimiter important\">?></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> <span class=\"token keyword\">endif</span><span class=\"token punctuation\">;</span><span class=\"token delimiter important\">?></span></span>\n    <span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token keyword\">empty</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$message</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token delimiter important\">?></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>message<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>updated<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> <span class=\"token keyword\">echo</span> <span class=\"token variable\">$message</span> <span class=\"token delimiter important\">?></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> <span class=\"token keyword\">endif</span><span class=\"token punctuation\">;</span><span class=\"token delimiter important\">?></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>form</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>form<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">method</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>POST<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>hidden<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>nonce<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> <span class=\"token keyword\">echo</span> <span class=\"token function\">wp_create_nonce</span><span class=\"token punctuation\">(</span><span class=\"token function\">basename</span><span class=\"token punctuation\">(</span><span class=\"token constant\">__FILE__</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token delimiter important\">?></span></span><span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n        <span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> <span class=\"token comment\">/* NOTICE: here we storing id to determine will be item added or updated */</span> <span class=\"token delimiter important\">?></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>hidden<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>id<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> <span class=\"token keyword\">echo</span> <span class=\"token variable\">$item</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'id'</span><span class=\"token punctuation\">]</span> <span class=\"token delimiter important\">?></span></span><span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>metabox-holder<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>poststuff<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>post-body<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>post-body-content<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n                    <span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> <span class=\"token comment\">/* And here we call our custom meta box */</span> <span class=\"token delimiter important\">?></span></span>\n                    <span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> <span class=\"token function\">do_meta_boxes</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'person'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'normal'</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$item</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token delimiter important\">?></span></span>\n                    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>submit<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> <span class=\"token function\">_e</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'Save'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'custom_table_example'</span><span class=\"token punctuation\">)</span><span class=\"token delimiter important\">?></span></span><span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>submit<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>button-primary<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>submit<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>form</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/**\n    * This function renders our custom meta box\n    * $item is row\n    *\n    * @param $item\n    */</span>\n<span class=\"token keyword\">function</span> <span class=\"token function-definition function\">custom_table_example_persons_form_meta_box_handler</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$item</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token delimiter important\">?></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>table</span> <span class=\"token attr-name\">cellspacing</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>2<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">cellpadding</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>5<span class=\"token punctuation\">\"</span></span> <span class=\"token special-attr\"><span class=\"token attr-name\">style</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token value css language-css\"><span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 100%<span class=\"token punctuation\">;</span></span><span class=\"token punctuation\">\"</span></span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>form-table<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>tbody</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>tr</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>form-field<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>th</span> <span class=\"token attr-name\">valign</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>top<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">scope</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>row<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span> <span class=\"token attr-name\">for</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>name<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> <span class=\"token function\">_e</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'Name'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'custom_table_example'</span><span class=\"token punctuation\">)</span><span class=\"token delimiter important\">?></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>th</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>td</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>name<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>name<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span> <span class=\"token special-attr\"><span class=\"token attr-name\">style</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token value css language-css\"><span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 95%</span><span class=\"token punctuation\">\"</span></span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> <span class=\"token keyword\">echo</span> <span class=\"token function\">esc_attr</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$item</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'name'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token delimiter important\">?></span></span><span class=\"token punctuation\">\"</span></span>\n                    <span class=\"token attr-name\">size</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>50<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>code<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">placeholder</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> <span class=\"token function\">_e</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'Your name'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'custom_table_example'</span><span class=\"token punctuation\">)</span><span class=\"token delimiter important\">?></span></span><span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">required</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>td</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>tr</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>tr</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>form-field<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>th</span> <span class=\"token attr-name\">valign</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>top<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">scope</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>row<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span> <span class=\"token attr-name\">for</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>email<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> <span class=\"token function\">_e</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'E-Mail'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'custom_table_example'</span><span class=\"token punctuation\">)</span><span class=\"token delimiter important\">?></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>th</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>td</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>email<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>email<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>email<span class=\"token punctuation\">\"</span></span> <span class=\"token special-attr\"><span class=\"token attr-name\">style</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token value css language-css\"><span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 95%</span><span class=\"token punctuation\">\"</span></span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> <span class=\"token keyword\">echo</span> <span class=\"token function\">esc_attr</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$item</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'email'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token delimiter important\">?></span></span><span class=\"token punctuation\">\"</span></span>\n                    <span class=\"token attr-name\">size</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>50<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>code<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">placeholder</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> <span class=\"token function\">_e</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'Your E-Mail'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'custom_table_example'</span><span class=\"token punctuation\">)</span><span class=\"token delimiter important\">?></span></span><span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">required</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>td</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>tr</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>tr</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>form-field<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>th</span> <span class=\"token attr-name\">valign</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>top<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">scope</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>row<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span> <span class=\"token attr-name\">for</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>age<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> <span class=\"token function\">_e</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'Age'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'custom_table_example'</span><span class=\"token punctuation\">)</span><span class=\"token delimiter important\">?></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>th</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>td</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>age<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>age<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>number<span class=\"token punctuation\">\"</span></span> <span class=\"token special-attr\"><span class=\"token attr-name\">style</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token value css language-css\"><span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 95%</span><span class=\"token punctuation\">\"</span></span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> <span class=\"token keyword\">echo</span> <span class=\"token function\">esc_attr</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$item</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'age'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token delimiter important\">?></span></span><span class=\"token punctuation\">\"</span></span>\n                    <span class=\"token attr-name\">size</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>50<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>code<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">placeholder</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> <span class=\"token function\">_e</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'Your age'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'custom_table_example'</span><span class=\"token punctuation\">)</span><span class=\"token delimiter important\">?></span></span><span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">required</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>td</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>tr</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>tbody</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>table</span><span class=\"token punctuation\">></span></span>\n<span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/**\n    * Simple function that validates data and retrieve bool on success\n    * and error message(s) on error\n    *\n    * @param $item\n    * @return bool|string\n    */</span>\n<span class=\"token keyword\">function</span> <span class=\"token function-definition function\">custom_table_example_validate_person</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$item</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token variable\">$messages</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">empty</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$item</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'name'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token variable\">$messages</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">__</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'Name is required'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'custom_table_example'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token keyword\">empty</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$item</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'email'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span><span class=\"token function\">is_email</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$item</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'email'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token variable\">$messages</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">__</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'E-Mail is in wrong format'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'custom_table_example'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token function\">ctype_digit</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$item</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'age'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token variable\">$messages</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">__</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'Age in wrong format'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'custom_table_example'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">//if(!empty($item['age']) &amp;&amp; !absint(intval($item['age'])))  $messages[] = __('Age can not be less than zero');</span>\n    <span class=\"token comment\">//if(!empty($item['age']) &amp;&amp; !preg_match('/[0-9]+/', $item['age'])) $messages[] = __('Age must be number');</span>\n    <span class=\"token comment\">//...</span>\n\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">empty</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$messages</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> <span class=\"token constant boolean\">true</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token function\">implode</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'&lt;br />'</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$messages</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/**\n    * Do not forget about translating your plugin, use __('english string', 'your_uniq_plugin_name') to retrieve translated string\n    * and _e('english string', 'your_uniq_plugin_name') to echo it\n    * in this example plugin your_uniq_plugin_name == custom_table_example\n    *\n    * to create translation file, use poedit FileNew catalog...\n    * Fill name of project, add \".\" to path (ENSURE that it was added - must be in list)\n    * and on last tab add \"__\" and \"_e\"\n    *\n    * Name your file like this: [my_plugin]-[ru_RU].po\n    *\n    * http://codex.wordpress.org/Writing_a_Plugin#Internationalizing_Your_Plugin\n    * http://codex.wordpress.org/I18n_for_WordPress_Developers\n    */</span>\n<span class=\"token keyword\">function</span> <span class=\"token function-definition function\">custom_table_example_languages</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token function\">load_plugin_textdomain</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'custom_table_example'</span><span class=\"token punctuation\">,</span> <span class=\"token constant boolean\">false</span><span class=\"token punctuation\">,</span> <span class=\"token function\">dirname</span><span class=\"token punctuation\">(</span><span class=\"token function\">plugin_basename</span><span class=\"token punctuation\">(</span><span class=\"token constant\">__FILE__</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">add_action</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'init'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'custom_table_example_languages'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span></code></pre></div>"}},"pageContext":{"id":"1581d637-b8ba-54da-b0ae-c5318f938454"}},"staticQueryHashes":[],"slicesMap":{}}