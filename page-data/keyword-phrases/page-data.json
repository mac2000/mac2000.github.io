{"componentChunkName":"component---src-templates-note-js","path":"/keyword-phrases","result":{"data":{"remark":{"fields":{"path":"keyword-phrases"},"meta":{"title":""},"headings":[{"value":"Keyword phrases"}],"html":"<h1>Keyword phrases</h1>\n<p>Необходимо получить фразу(ы) для ключевого слова, и подменить в них ключевое слово на ссылку с необходимым адресом.</p>\n<p>Ф-я получения фраз для ключевого слова:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token keyword\">function</span> <span class=\"token function-definition function\">getKeywordPhrases</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$keyword</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$target_url</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token variable\">$url_tpl</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'https://ajax.googleapis.com/ajax/services/search/web?v=1.0&amp;q=%s'</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$url</span> <span class=\"token operator\">=</span> <span class=\"token function\">sprintf</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$url_tpl</span><span class=\"token punctuation\">,</span> <span class=\"token function\">urlencode</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$keyword</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$results</span> <span class=\"token operator\">=</span> <span class=\"token function\">json_decode</span><span class=\"token punctuation\">(</span><span class=\"token function\">file_get_contents</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$url</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$results</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$results</span><span class=\"token operator\">-></span><span class=\"token property\">responseData</span><span class=\"token operator\">-></span><span class=\"token property\">results</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">mb_regex_encoding</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'utf-8'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">mb_internal_encoding</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'utf-8'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$phrases</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">foreach</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$results</span> <span class=\"token keyword\">as</span> <span class=\"token variable\">$result</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token variable\">$sentences</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$result</span><span class=\"token operator\">-></span><span class=\"token property\">content</span><span class=\"token punctuation\">;</span>\n        <span class=\"token variable\">$sentences</span> <span class=\"token operator\">=</span> <span class=\"token function\">strip_tags</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$sentences</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token variable\">$sentences</span> <span class=\"token operator\">=</span> <span class=\"token function\">explode</span><span class=\"token punctuation\">(</span><span class=\"token string double-quoted-string\">\".\"</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$sentences</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">foreach</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$sentences</span> <span class=\"token keyword\">as</span> <span class=\"token variable\">$sentence</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token variable\">$sentence</span> <span class=\"token operator\">=</span> <span class=\"token function\">trim</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$sentence</span><span class=\"token punctuation\">,</span> <span class=\"token string double-quoted-string\">\" ,.:;!?-_()[]\\\"'`\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">empty</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$sentence</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">continue</span><span class=\"token punctuation\">;</span>\n            <span class=\"token variable\">$sentence</span> <span class=\"token operator\">=</span> <span class=\"token function\">mb_strtoupper</span><span class=\"token punctuation\">(</span><span class=\"token function\">mb_substr</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$sentence</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token string double-quoted-string\">\"UTF-8\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string double-quoted-string\">\"UTF-8\"</span><span class=\"token punctuation\">)</span><span class=\"token operator\">.</span><span class=\"token function\">mb_substr</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$sentence</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token function\">mb_strlen</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$sentence</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string double-quoted-string\">\"UTF-8\"</span> <span class=\"token punctuation\">)</span> <span class=\"token operator\">.</span> <span class=\"token string single-quoted-string\">'.'</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token function\">preg_match</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'/'</span><span class=\"token operator\">.</span><span class=\"token variable\">$keyword</span><span class=\"token operator\">.</span><span class=\"token string single-quoted-string\">'/ui'</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$sentence</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">continue</span><span class=\"token punctuation\">;</span>\n            <span class=\"token variable\">$sentence</span> <span class=\"token operator\">=</span> <span class=\"token function\">preg_replace</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'/'</span><span class=\"token operator\">.</span><span class=\"token variable\">$keyword</span><span class=\"token operator\">.</span><span class=\"token string single-quoted-string\">'/ui'</span><span class=\"token punctuation\">,</span><span class=\"token string single-quoted-string\">'&lt;a href=\"'</span><span class=\"token operator\">.</span><span class=\"token variable\">$target_url</span><span class=\"token operator\">.</span><span class=\"token string single-quoted-string\">'\" target=\"_blank\">$0&lt;/a>'</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$sentence</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token variable\">$phrases</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$sentence</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">return</span> <span class=\"token variable\">$phrases</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>И небольшой пример:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token doctype\"><span class=\"token punctuation\">&lt;!</span><span class=\"token doctype-tag\">DOCTYPE</span> <span class=\"token name\">html</span> <span class=\"token name\">PUBLIC</span> <span class=\"token string\">\"-//W3C//DTD XHTML 1.0 Transitional//EN\"</span> <span class=\"token string\">\"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\"</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span> <span class=\"token attr-name\">xmlns</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.w3.org/1999/xhtml<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">http-equiv</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Content-Type<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">content</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text/html; charset=utf-8<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>title</span><span class=\"token punctuation\">></span></span>Keyword phrases<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>title</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>style</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text/css<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token style\"><span class=\"token language-css\">\n<span class=\"token selector\">html,body</span> <span class=\"token punctuation\">{</span><span class=\"token property\">padding</span><span class=\"token punctuation\">:</span>0<span class=\"token punctuation\">;</span><span class=\"token property\">margin</span><span class=\"token punctuation\">:</span>0<span class=\"token punctuation\">;</span><span class=\"token property\">height</span><span class=\"token punctuation\">:</span>100%<span class=\"token punctuation\">;</span><span class=\"token property\">overflow</span><span class=\"token punctuation\">:</span>hidden<span class=\"token punctuation\">;</span><span class=\"token property\">background</span><span class=\"token punctuation\">:</span>#DDDDDD<span class=\"token punctuation\">;</span><span class=\"token property\">background</span><span class=\"token punctuation\">:</span> <span class=\"token function\">-moz-linear-gradient</span><span class=\"token punctuation\">(</span>top<span class=\"token punctuation\">,</span>#CCCCCC<span class=\"token punctuation\">,</span>#EEEEEE<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token property\">background</span><span class=\"token punctuation\">:</span> <span class=\"token function\">-webkit-gradient</span><span class=\"token punctuation\">(</span>linear<span class=\"token punctuation\">,</span> left top<span class=\"token punctuation\">,</span> left bottom<span class=\"token punctuation\">,</span> <span class=\"token function\">from</span><span class=\"token punctuation\">(</span>#CCCCCC<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">to</span><span class=\"token punctuation\">(</span>#EEEEEE<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token property\">filter</span><span class=\"token punctuation\">:</span> <span class=\"token property\">progid</span><span class=\"token punctuation\">:</span>DXImageTransform.Microsoft.<span class=\"token function\">gradient</span><span class=\"token punctuation\">(</span>enabled=<span class=\"token string\">'true'</span><span class=\"token punctuation\">,</span>startColorstr=#CCCCCC<span class=\"token punctuation\">,</span>endColorstr=#EEEEEE<span class=\"token punctuation\">,</span>GradientType=0<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">}</span>\n<span class=\"token selector\">form</span> <span class=\"token punctuation\">{</span><span class=\"token property\">padding</span><span class=\"token punctuation\">:</span>1em 2em<span class=\"token punctuation\">;</span><span class=\"token property\">margin</span><span class=\"token punctuation\">:</span>4em 10em<span class=\"token punctuation\">;</span><span class=\"token property\">background</span><span class=\"token punctuation\">:</span>#FFFFFF<span class=\"token punctuation\">;</span><span class=\"token property\">background</span><span class=\"token punctuation\">:</span> <span class=\"token function\">-moz-linear-gradient</span><span class=\"token punctuation\">(</span>top<span class=\"token punctuation\">,</span>#FFFFFF<span class=\"token punctuation\">,</span>#EEEEEE<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token property\">background</span><span class=\"token punctuation\">:</span> <span class=\"token function\">-webkit-gradient</span><span class=\"token punctuation\">(</span>linear<span class=\"token punctuation\">,</span> left top<span class=\"token punctuation\">,</span> left bottom<span class=\"token punctuation\">,</span> <span class=\"token function\">from</span><span class=\"token punctuation\">(</span>#FFFFFF<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">to</span><span class=\"token punctuation\">(</span>#EEEEEE<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token property\">filter</span><span class=\"token punctuation\">:</span> <span class=\"token property\">progid</span><span class=\"token punctuation\">:</span>DXImageTransform.Microsoft.<span class=\"token function\">gradient</span><span class=\"token punctuation\">(</span>enabled=<span class=\"token string\">'true'</span><span class=\"token punctuation\">,</span>startColorstr=#FFFFFF<span class=\"token punctuation\">,</span>endColorstr=#EEEEEE<span class=\"token punctuation\">,</span>GradientType=0<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token property\">-moz-border-radius</span><span class=\"token punctuation\">:</span>10px<span class=\"token punctuation\">;</span><span class=\"token property\">-webkit-border-radius</span><span class=\"token punctuation\">:</span>10px<span class=\"token punctuation\">;</span><span class=\"token property\">border-radius</span><span class=\"token punctuation\">:</span>10px<span class=\"token punctuation\">;</span><span class=\"token property\">-moz-box-shadow</span><span class=\"token punctuation\">:</span> 0px 0px 5px #000000<span class=\"token punctuation\">;</span><span class=\"token property\">-webkit-box-shadow</span><span class=\"token punctuation\">:</span> 0px 0px 5px #000000<span class=\"token punctuation\">;</span><span class=\"token property\">box-shadow</span><span class=\"token punctuation\">:</span> 0px 0px 5px #000000<span class=\"token punctuation\">;</span><span class=\"token punctuation\">}</span>\n<span class=\"token selector\">label</span> <span class=\"token punctuation\">{</span><span class=\"token property\">font-weight</span><span class=\"token punctuation\">:</span>bold<span class=\"token punctuation\">;</span><span class=\"token punctuation\">}</span>\n<span class=\"token selector\">input</span> <span class=\"token punctuation\">{</span><span class=\"token property\">font</span><span class=\"token punctuation\">:</span>14px Arial<span class=\"token punctuation\">;</span><span class=\"token property\">padding</span><span class=\"token punctuation\">:</span>0.2em 0.4em<span class=\"token punctuation\">;</span><span class=\"token property\">border</span><span class=\"token punctuation\">:</span>1px solid #999<span class=\"token punctuation\">;</span><span class=\"token property\">-moz-border-radius</span><span class=\"token punctuation\">:</span>3px<span class=\"token punctuation\">;</span><span class=\"token property\">-webkit-border-radius</span><span class=\"token punctuation\">:</span>3px<span class=\"token punctuation\">;</span><span class=\"token property\">border-radius</span><span class=\"token punctuation\">:</span>3px<span class=\"token punctuation\">;</span><span class=\"token punctuation\">}</span>\n<span class=\"token selector\">button</span> <span class=\"token punctuation\">{</span><span class=\"token property\">font</span><span class=\"token punctuation\">:</span>14px Arial<span class=\"token punctuation\">;</span><span class=\"token property\">padding</span><span class=\"token punctuation\">:</span>0.2em 0.4em<span class=\"token punctuation\">;</span><span class=\"token property\">color</span><span class=\"token punctuation\">:</span>#fff<span class=\"token punctuation\">;</span><span class=\"token property\">cursor</span><span class=\"token punctuation\">:</span>pointer<span class=\"token punctuation\">;</span><span class=\"token property\">border</span><span class=\"token punctuation\">:</span>none<span class=\"token punctuation\">;</span><span class=\"token property\">background-image</span><span class=\"token punctuation\">:</span><span class=\"token function\">-webkit-gradient</span><span class=\"token punctuation\">(</span>linear<span class=\"token punctuation\">,</span>left bottom<span class=\"token punctuation\">,</span>left top<span class=\"token punctuation\">,</span><span class=\"token function\">color-stop</span><span class=\"token punctuation\">(</span>0<span class=\"token punctuation\">,</span> <span class=\"token function\">rgb</span><span class=\"token punctuation\">(</span>0<span class=\"token punctuation\">,</span>0<span class=\"token punctuation\">,</span>0<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token function\">color-stop</span><span class=\"token punctuation\">(</span>1<span class=\"token punctuation\">,</span> <span class=\"token function\">rgb</span><span class=\"token punctuation\">(</span>125<span class=\"token punctuation\">,</span>126<span class=\"token punctuation\">,</span>125<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token property\">background-image</span><span class=\"token punctuation\">:</span><span class=\"token function\">-moz-linear-gradient</span><span class=\"token punctuation\">(</span>center bottom<span class=\"token punctuation\">,</span><span class=\"token function\">rgb</span><span class=\"token punctuation\">(</span>0<span class=\"token punctuation\">,</span>0<span class=\"token punctuation\">,</span>0<span class=\"token punctuation\">)</span> 0%<span class=\"token punctuation\">,</span><span class=\"token function\">rgb</span><span class=\"token punctuation\">(</span>125<span class=\"token punctuation\">,</span>126<span class=\"token punctuation\">,</span>125<span class=\"token punctuation\">)</span> 100%<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span>#000<span class=\"token punctuation\">;</span><span class=\"token property\">-moz-border-radius</span><span class=\"token punctuation\">:</span>3px<span class=\"token punctuation\">;</span><span class=\"token property\">-webkit-border-radius</span><span class=\"token punctuation\">:</span>3px<span class=\"token punctuation\">;</span><span class=\"token property\">border-radius</span><span class=\"token punctuation\">:</span>3px<span class=\"token punctuation\">;</span><span class=\"token punctuation\">}</span>\n<span class=\"token selector\">h3</span> <span class=\"token punctuation\">{</span><span class=\"token property\">margin</span><span class=\"token punctuation\">:</span>0.5em 0<span class=\"token punctuation\">;</span><span class=\"token punctuation\">}</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>style</span><span class=\"token punctuation\">></span></span>\n<span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n<span class=\"token variable\">$keyword</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">isset</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$_REQUEST</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'keyword'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> <span class=\"token variable\">$_REQUEST</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'keyword'</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">:</span> <span class=\"token string single-quoted-string\">'мебель на заказ'</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$target_url</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">isset</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$_REQUEST</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'target_url'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> <span class=\"token variable\">$_REQUEST</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'target_url'</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">:</span> <span class=\"token string single-quoted-string\">'http://mebelnazakaz.kiev.ua'</span><span class=\"token punctuation\">;</span>\n<span class=\"token delimiter important\">?></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>form</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h3</span><span class=\"token punctuation\">></span></span>Keyword phrases<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h3</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span><span class=\"token punctuation\">></span></span>Keyword:<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>keyword<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> <span class=\"token keyword\">echo</span> <span class=\"token variable\">$keyword</span> <span class=\"token delimiter important\">?></span></span><span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span><span class=\"token punctuation\">></span></span>Target URL:<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>target_url<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> <span class=\"token keyword\">echo</span> <span class=\"token variable\">$target_url</span> <span class=\"token delimiter important\">?></span></span><span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span><span class=\"token punctuation\">></span></span>Get phrases<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h3</span><span class=\"token punctuation\">></span></span>Phrases:<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h3</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ol</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n            <span class=\"token variable\">$phrases</span> <span class=\"token operator\">=</span> <span class=\"token function\">getKeywordPhrases</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$keyword</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$target_url</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">foreach</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$phrases</span> <span class=\"token keyword\">as</span> <span class=\"token variable\">$phrase</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">echo</span> <span class=\"token string double-quoted-string\">\"&lt;li><span class=\"token interpolation\"><span class=\"token variable\">$phrase</span></span>&lt;/li>\"</span><span class=\"token punctuation\">;</span>\n        <span class=\"token delimiter important\">?></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ol</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>form</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span>\n<span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n<span class=\"token keyword\">function</span> <span class=\"token function-definition function\">getKeywordPhrases</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$keyword</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$target_url</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token variable\">$url_tpl</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'https://ajax.googleapis.com/ajax/services/search/web?v=1.0&amp;q=%s'</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$url</span> <span class=\"token operator\">=</span> <span class=\"token function\">sprintf</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$url_tpl</span><span class=\"token punctuation\">,</span> <span class=\"token function\">urlencode</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$keyword</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$results</span> <span class=\"token operator\">=</span> <span class=\"token function\">json_decode</span><span class=\"token punctuation\">(</span><span class=\"token function\">file_get_contents</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$url</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$results</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$results</span><span class=\"token operator\">-></span><span class=\"token property\">responseData</span><span class=\"token operator\">-></span><span class=\"token property\">results</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">mb_regex_encoding</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'utf-8'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">mb_internal_encoding</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'utf-8'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$phrases</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">foreach</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$results</span> <span class=\"token keyword\">as</span> <span class=\"token variable\">$result</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token variable\">$sentences</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$result</span><span class=\"token operator\">-></span><span class=\"token property\">content</span><span class=\"token punctuation\">;</span>\n        <span class=\"token variable\">$sentences</span> <span class=\"token operator\">=</span> <span class=\"token function\">strip_tags</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$sentences</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token variable\">$sentences</span> <span class=\"token operator\">=</span> <span class=\"token function\">explode</span><span class=\"token punctuation\">(</span><span class=\"token string double-quoted-string\">\".\"</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$sentences</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">foreach</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$sentences</span> <span class=\"token keyword\">as</span> <span class=\"token variable\">$sentence</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token variable\">$sentence</span> <span class=\"token operator\">=</span> <span class=\"token function\">trim</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$sentence</span><span class=\"token punctuation\">,</span> <span class=\"token string double-quoted-string\">\" ,.:;!?-_()[]\\\"'`\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">empty</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$sentence</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">continue</span><span class=\"token punctuation\">;</span>\n            <span class=\"token variable\">$sentence</span> <span class=\"token operator\">=</span> <span class=\"token function\">mb_strtoupper</span><span class=\"token punctuation\">(</span><span class=\"token function\">mb_substr</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$sentence</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token string double-quoted-string\">\"UTF-8\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string double-quoted-string\">\"UTF-8\"</span><span class=\"token punctuation\">)</span><span class=\"token operator\">.</span><span class=\"token function\">mb_substr</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$sentence</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token function\">mb_strlen</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$sentence</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string double-quoted-string\">\"UTF-8\"</span> <span class=\"token punctuation\">)</span> <span class=\"token operator\">.</span> <span class=\"token string single-quoted-string\">'.'</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token function\">preg_match</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'/'</span><span class=\"token operator\">.</span><span class=\"token variable\">$keyword</span><span class=\"token operator\">.</span><span class=\"token string single-quoted-string\">'/ui'</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$sentence</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">continue</span><span class=\"token punctuation\">;</span>\n            <span class=\"token variable\">$sentence</span> <span class=\"token operator\">=</span> <span class=\"token function\">preg_replace</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'/'</span><span class=\"token operator\">.</span><span class=\"token variable\">$keyword</span><span class=\"token operator\">.</span><span class=\"token string single-quoted-string\">'/ui'</span><span class=\"token punctuation\">,</span><span class=\"token string single-quoted-string\">'&lt;a href=\"'</span><span class=\"token operator\">.</span><span class=\"token variable\">$target_url</span><span class=\"token operator\">.</span><span class=\"token string single-quoted-string\">'\" target=\"_blank\">$0&lt;/a>'</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$sentence</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token variable\">$phrases</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$sentence</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">return</span> <span class=\"token variable\">$phrases</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token delimiter important\">?></span></span></code></pre></div>\n<p>Ну и собственно вот как это выглядит:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 728px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a32ca6d88a36e4717febb190f51ba470/cecac/12.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 41.01562499999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABb0lEQVQoz3WSfU/CMBDG9/3/10S/jAYnaIxE2NjYW7exrsPBsB1ksAV4zBWnidEmvzzX6/V6uasxHo8RRRGSJPmTOI6/+e0nXSwWGrKn0ykMy7KgpETGuT7wPB9lWeJ0OmnO5zNokfa+3t+2LXa7neZ4PCIMQxiz2QyrsgRjDPwrKec5soxjv9+jKAoEvo8syyCEQJqmOna5XMI0TVxdX+Hm9kb7qErDcRysViu4ros8L9B1HbquQdsSexwOh2+ooh56rGl+zpumQRAEl4RKSVSVxNubwGTyjtdXBdvmsO0E8/kcvudpdWYObMsG3aGKAl8h8LcIgi0+5BZRFMJw3Tk2mw1EXmAwGGM4tPDwEGH4aOPRnOD5aYTR8AX3dx5MM4RlCYhCQEqJuq5R10qrUkoP1/A8Tw+hLNdgTCKOJdK0QiE48nyh+yryHDzLdN8oEUFFVFWlIXu9Xl8S0mQI2rA4BGM98RdMQ9+EtI//j09hVUk/etMQeAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"screenshot\"\n        title=\"screenshot\"\n        src=\"/static/a32ca6d88a36e4717febb190f51ba470/cecac/12.png\"\n        srcset=\"/static/a32ca6d88a36e4717febb190f51ba470/6f3f2/12.png 256w,\n/static/a32ca6d88a36e4717febb190f51ba470/01e7c/12.png 512w,\n/static/a32ca6d88a36e4717febb190f51ba470/cecac/12.png 728w\"\n        sizes=\"(max-width: 728px) 100vw, 728px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Параметры:</p>\n<p><a href=\"http://code.google.com/intl/ru-RU/apis/websearch/docs/reference.html\">http://code.google.com/intl/ru-RU/apis/websearch/docs/reference.html</a></p>\n<p>Подправленный адрес для более адекватных результатов:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token variable\">$url_tpl</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'https://ajax.googleapis.com/ajax/services/search/web?v=1.0&amp;hl=ru&amp;rsz=8&amp;q=%s'</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>На последок подправленный вариант, которые идет по всем результатам и дает больше результатов:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token doctype\"><span class=\"token punctuation\">&lt;!</span><span class=\"token doctype-tag\">DOCTYPE</span> <span class=\"token name\">html</span> <span class=\"token name\">PUBLIC</span> <span class=\"token string\">\"-//W3C//DTD XHTML 1.0 Transitional//EN\"</span> <span class=\"token string\">\"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\"</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span> <span class=\"token attr-name\">xmlns</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.w3.org/1999/xhtml<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">http-equiv</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Content-Type<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">content</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text/html; charset=utf-8<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>title</span><span class=\"token punctuation\">></span></span>Keyword phrases<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>title</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>style</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text/css<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token style\"><span class=\"token language-css\">\n<span class=\"token selector\">html,body</span> <span class=\"token punctuation\">{</span><span class=\"token property\">padding</span><span class=\"token punctuation\">:</span>0<span class=\"token punctuation\">;</span><span class=\"token property\">margin</span><span class=\"token punctuation\">:</span>0<span class=\"token punctuation\">;</span><span class=\"token property\">height</span><span class=\"token punctuation\">:</span>100%<span class=\"token punctuation\">;</span><span class=\"token property\">overflow</span><span class=\"token punctuation\">:</span>hidden<span class=\"token punctuation\">;</span><span class=\"token property\">background</span><span class=\"token punctuation\">:</span>#DDDDDD<span class=\"token punctuation\">;</span><span class=\"token property\">background</span><span class=\"token punctuation\">:</span> <span class=\"token function\">-moz-linear-gradient</span><span class=\"token punctuation\">(</span>top<span class=\"token punctuation\">,</span>#CCCCCC<span class=\"token punctuation\">,</span>#EEEEEE<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token property\">background</span><span class=\"token punctuation\">:</span> <span class=\"token function\">-webkit-gradient</span><span class=\"token punctuation\">(</span>linear<span class=\"token punctuation\">,</span> left top<span class=\"token punctuation\">,</span> left bottom<span class=\"token punctuation\">,</span> <span class=\"token function\">from</span><span class=\"token punctuation\">(</span>#CCCCCC<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">to</span><span class=\"token punctuation\">(</span>#EEEEEE<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token property\">filter</span><span class=\"token punctuation\">:</span> <span class=\"token property\">progid</span><span class=\"token punctuation\">:</span>DXImageTransform.Microsoft.<span class=\"token function\">gradient</span><span class=\"token punctuation\">(</span>enabled=<span class=\"token string\">'true'</span><span class=\"token punctuation\">,</span>startColorstr=#CCCCCC<span class=\"token punctuation\">,</span>endColorstr=#EEEEEE<span class=\"token punctuation\">,</span>GradientType=0<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">}</span>\n<span class=\"token selector\">form</span> <span class=\"token punctuation\">{</span><span class=\"token property\">padding</span><span class=\"token punctuation\">:</span>1em 2em<span class=\"token punctuation\">;</span><span class=\"token property\">margin</span><span class=\"token punctuation\">:</span>4em 10em<span class=\"token punctuation\">;</span><span class=\"token property\">background</span><span class=\"token punctuation\">:</span>#FFFFFF<span class=\"token punctuation\">;</span><span class=\"token property\">background</span><span class=\"token punctuation\">:</span> <span class=\"token function\">-moz-linear-gradient</span><span class=\"token punctuation\">(</span>top<span class=\"token punctuation\">,</span>#FFFFFF<span class=\"token punctuation\">,</span>#EEEEEE<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token property\">background</span><span class=\"token punctuation\">:</span> <span class=\"token function\">-webkit-gradient</span><span class=\"token punctuation\">(</span>linear<span class=\"token punctuation\">,</span> left top<span class=\"token punctuation\">,</span> left bottom<span class=\"token punctuation\">,</span> <span class=\"token function\">from</span><span class=\"token punctuation\">(</span>#FFFFFF<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">to</span><span class=\"token punctuation\">(</span>#EEEEEE<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token property\">filter</span><span class=\"token punctuation\">:</span> <span class=\"token property\">progid</span><span class=\"token punctuation\">:</span>DXImageTransform.Microsoft.<span class=\"token function\">gradient</span><span class=\"token punctuation\">(</span>enabled=<span class=\"token string\">'true'</span><span class=\"token punctuation\">,</span>startColorstr=#FFFFFF<span class=\"token punctuation\">,</span>endColorstr=#EEEEEE<span class=\"token punctuation\">,</span>GradientType=0<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token property\">-moz-border-radius</span><span class=\"token punctuation\">:</span>10px<span class=\"token punctuation\">;</span><span class=\"token property\">-webkit-border-radius</span><span class=\"token punctuation\">:</span>10px<span class=\"token punctuation\">;</span><span class=\"token property\">border-radius</span><span class=\"token punctuation\">:</span>10px<span class=\"token punctuation\">;</span><span class=\"token property\">-moz-box-shadow</span><span class=\"token punctuation\">:</span> 0px 0px 5px #000000<span class=\"token punctuation\">;</span><span class=\"token property\">-webkit-box-shadow</span><span class=\"token punctuation\">:</span> 0px 0px 5px #000000<span class=\"token punctuation\">;</span><span class=\"token property\">box-shadow</span><span class=\"token punctuation\">:</span> 0px 0px 5px #000000<span class=\"token punctuation\">;</span><span class=\"token punctuation\">}</span>\n<span class=\"token selector\">label</span> <span class=\"token punctuation\">{</span><span class=\"token property\">font-weight</span><span class=\"token punctuation\">:</span>bold<span class=\"token punctuation\">;</span><span class=\"token punctuation\">}</span>\n<span class=\"token selector\">input</span> <span class=\"token punctuation\">{</span><span class=\"token property\">font</span><span class=\"token punctuation\">:</span>14px Arial<span class=\"token punctuation\">;</span><span class=\"token property\">padding</span><span class=\"token punctuation\">:</span>0.2em 0.4em<span class=\"token punctuation\">;</span><span class=\"token property\">border</span><span class=\"token punctuation\">:</span>1px solid #999<span class=\"token punctuation\">;</span><span class=\"token property\">-moz-border-radius</span><span class=\"token punctuation\">:</span>3px<span class=\"token punctuation\">;</span><span class=\"token property\">-webkit-border-radius</span><span class=\"token punctuation\">:</span>3px<span class=\"token punctuation\">;</span><span class=\"token property\">border-radius</span><span class=\"token punctuation\">:</span>3px<span class=\"token punctuation\">;</span><span class=\"token punctuation\">}</span>\n<span class=\"token selector\">button</span> <span class=\"token punctuation\">{</span><span class=\"token property\">font</span><span class=\"token punctuation\">:</span>14px Arial<span class=\"token punctuation\">;</span><span class=\"token property\">padding</span><span class=\"token punctuation\">:</span>0.2em 0.4em<span class=\"token punctuation\">;</span><span class=\"token property\">color</span><span class=\"token punctuation\">:</span>#fff<span class=\"token punctuation\">;</span><span class=\"token property\">cursor</span><span class=\"token punctuation\">:</span>pointer<span class=\"token punctuation\">;</span><span class=\"token property\">border</span><span class=\"token punctuation\">:</span>none<span class=\"token punctuation\">;</span><span class=\"token property\">background-image</span><span class=\"token punctuation\">:</span><span class=\"token function\">-webkit-gradient</span><span class=\"token punctuation\">(</span>linear<span class=\"token punctuation\">,</span>left bottom<span class=\"token punctuation\">,</span>left top<span class=\"token punctuation\">,</span><span class=\"token function\">color-stop</span><span class=\"token punctuation\">(</span>0<span class=\"token punctuation\">,</span> <span class=\"token function\">rgb</span><span class=\"token punctuation\">(</span>0<span class=\"token punctuation\">,</span>0<span class=\"token punctuation\">,</span>0<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token function\">color-stop</span><span class=\"token punctuation\">(</span>1<span class=\"token punctuation\">,</span> <span class=\"token function\">rgb</span><span class=\"token punctuation\">(</span>125<span class=\"token punctuation\">,</span>126<span class=\"token punctuation\">,</span>125<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token property\">background-image</span><span class=\"token punctuation\">:</span><span class=\"token function\">-moz-linear-gradient</span><span class=\"token punctuation\">(</span>center bottom<span class=\"token punctuation\">,</span><span class=\"token function\">rgb</span><span class=\"token punctuation\">(</span>0<span class=\"token punctuation\">,</span>0<span class=\"token punctuation\">,</span>0<span class=\"token punctuation\">)</span> 0%<span class=\"token punctuation\">,</span><span class=\"token function\">rgb</span><span class=\"token punctuation\">(</span>125<span class=\"token punctuation\">,</span>126<span class=\"token punctuation\">,</span>125<span class=\"token punctuation\">)</span> 100%<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span>#000<span class=\"token punctuation\">;</span><span class=\"token property\">-moz-border-radius</span><span class=\"token punctuation\">:</span>3px<span class=\"token punctuation\">;</span><span class=\"token property\">-webkit-border-radius</span><span class=\"token punctuation\">:</span>3px<span class=\"token punctuation\">;</span><span class=\"token property\">border-radius</span><span class=\"token punctuation\">:</span>3px<span class=\"token punctuation\">;</span><span class=\"token punctuation\">}</span>\n<span class=\"token selector\">h3</span> <span class=\"token punctuation\">{</span><span class=\"token property\">margin</span><span class=\"token punctuation\">:</span>0.5em 0<span class=\"token punctuation\">;</span><span class=\"token punctuation\">}</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>style</span><span class=\"token punctuation\">></span></span>\n<span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n<span class=\"token variable\">$keyword</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">isset</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$_REQUEST</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'keyword'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> <span class=\"token variable\">$_REQUEST</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'keyword'</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">:</span> <span class=\"token string single-quoted-string\">'мебель на заказ'</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$target_url</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">isset</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$_REQUEST</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'target_url'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> <span class=\"token variable\">$_REQUEST</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'target_url'</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">:</span> <span class=\"token string single-quoted-string\">'http://mebelnazakaz.kiev.ua'</span><span class=\"token punctuation\">;</span>\n<span class=\"token delimiter important\">?></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>form</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h3</span><span class=\"token punctuation\">></span></span>Keyword phrases<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h3</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span><span class=\"token punctuation\">></span></span>Keyword:<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>keyword<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> <span class=\"token keyword\">echo</span> <span class=\"token variable\">$keyword</span> <span class=\"token delimiter important\">?></span></span><span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span><span class=\"token punctuation\">></span></span>Target URL:<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>target_url<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> <span class=\"token keyword\">echo</span> <span class=\"token variable\">$target_url</span> <span class=\"token delimiter important\">?></span></span><span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span><span class=\"token punctuation\">></span></span>Get phrases<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h3</span><span class=\"token punctuation\">></span></span>Phrases:<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h3</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ol</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n            <span class=\"token variable\">$phrases</span> <span class=\"token operator\">=</span> <span class=\"token function\">getKeywordPhrases</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$keyword</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$target_url</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">foreach</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$phrases</span> <span class=\"token keyword\">as</span> <span class=\"token variable\">$phrase</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">echo</span> <span class=\"token string double-quoted-string\">\"&lt;li><span class=\"token interpolation\"><span class=\"token variable\">$phrase</span></span>&lt;/li>\"</span><span class=\"token punctuation\">;</span>\n        <span class=\"token delimiter important\">?></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ol</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>form</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span>\n<span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n<span class=\"token keyword\">function</span> <span class=\"token function-definition function\">getKeywordPhrases</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$keyword</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$target_url</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token variable\">$url_tpl</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'https://ajax.googleapis.com/ajax/services/search/web?v=1.0&amp;start=%d&amp;hl=ru&amp;rsz=8&amp;q=%s'</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token variable\">$data</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$url</span> <span class=\"token operator\">=</span> <span class=\"token function\">sprintf</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$url_tpl</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token function\">urlencode</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$keyword</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$results</span> <span class=\"token operator\">=</span> <span class=\"token function\">json_decode</span><span class=\"token punctuation\">(</span><span class=\"token function\">file_get_contents</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$url</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$items</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$results</span><span class=\"token operator\">-></span><span class=\"token property\">responseData</span><span class=\"token operator\">-></span><span class=\"token property\">results</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">foreach</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$items</span> <span class=\"token keyword\">as</span> <span class=\"token variable\">$item</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token variable\">$data</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$item</span><span class=\"token operator\">-></span><span class=\"token property\">content</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token variable\">$pages</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$results</span><span class=\"token operator\">-></span><span class=\"token property\">responseData</span><span class=\"token operator\">-></span><span class=\"token property\">cursor</span><span class=\"token operator\">-></span><span class=\"token property\">pages</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">array_shift</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$pages</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">foreach</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$pages</span> <span class=\"token keyword\">as</span> <span class=\"token variable\">$page</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token variable\">$url</span> <span class=\"token operator\">=</span> <span class=\"token function\">sprintf</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$url_tpl</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$page</span><span class=\"token operator\">-></span><span class=\"token property\">start</span><span class=\"token punctuation\">,</span> <span class=\"token function\">urlencode</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$keyword</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token variable\">$results</span> <span class=\"token operator\">=</span> <span class=\"token function\">json_decode</span><span class=\"token punctuation\">(</span><span class=\"token function\">file_get_contents</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$url</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token variable\">$items</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$results</span><span class=\"token operator\">-></span><span class=\"token property\">responseData</span><span class=\"token operator\">-></span><span class=\"token property\">results</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">foreach</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$items</span> <span class=\"token keyword\">as</span> <span class=\"token variable\">$item</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token variable\">$data</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$item</span><span class=\"token operator\">-></span><span class=\"token property\">content</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token function\">mb_regex_encoding</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'utf-8'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">mb_internal_encoding</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'utf-8'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$phrases</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">foreach</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$data</span> <span class=\"token keyword\">as</span> <span class=\"token variable\">$item</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token variable\">$sentences</span> <span class=\"token operator\">=</span> <span class=\"token function\">strip_tags</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$item</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token variable\">$sentences</span> <span class=\"token operator\">=</span> <span class=\"token function\">explode</span><span class=\"token punctuation\">(</span><span class=\"token string double-quoted-string\">\".\"</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$sentences</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">foreach</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$sentences</span> <span class=\"token keyword\">as</span> <span class=\"token variable\">$sentence</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token variable\">$sentence</span> <span class=\"token operator\">=</span> <span class=\"token function\">trim</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$sentence</span><span class=\"token punctuation\">,</span> <span class=\"token string double-quoted-string\">\" ,.:;!?-_()[]\\\"'`\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">empty</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$sentence</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">continue</span><span class=\"token punctuation\">;</span>\n            <span class=\"token variable\">$sentence</span> <span class=\"token operator\">=</span> <span class=\"token function\">mb_strtoupper</span><span class=\"token punctuation\">(</span><span class=\"token function\">mb_substr</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$sentence</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token string double-quoted-string\">\"UTF-8\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string double-quoted-string\">\"UTF-8\"</span><span class=\"token punctuation\">)</span><span class=\"token operator\">.</span><span class=\"token function\">mb_substr</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$sentence</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token function\">mb_strlen</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$sentence</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string double-quoted-string\">\"UTF-8\"</span> <span class=\"token punctuation\">)</span> <span class=\"token operator\">.</span> <span class=\"token string single-quoted-string\">'.'</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token function\">preg_match</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'/'</span><span class=\"token operator\">.</span><span class=\"token variable\">$keyword</span><span class=\"token operator\">.</span><span class=\"token string single-quoted-string\">'/ui'</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$sentence</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">continue</span><span class=\"token punctuation\">;</span>\n            <span class=\"token variable\">$sentence</span> <span class=\"token operator\">=</span> <span class=\"token function\">preg_replace</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'/'</span><span class=\"token operator\">.</span><span class=\"token variable\">$keyword</span><span class=\"token operator\">.</span><span class=\"token string single-quoted-string\">'/ui'</span><span class=\"token punctuation\">,</span><span class=\"token string single-quoted-string\">'&lt;a href=\"'</span><span class=\"token operator\">.</span><span class=\"token variable\">$target_url</span><span class=\"token operator\">.</span><span class=\"token string single-quoted-string\">'\" target=\"_blank\">$0&lt;/a>'</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$sentence</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token variable\">$phrases</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$sentence</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">return</span> <span class=\"token variable\">$phrases</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token delimiter important\">?></span></span></code></pre></div>"}},"pageContext":{"id":"e5dee41e-4481-556a-8f2b-f02149a8bcdd"}},"staticQueryHashes":[]}