{"componentChunkName":"component---src-templates-note-js","path":"/drupal-custom-breadcrumbs/","result":{"data":{"remark":{"fields":{"path":"drupal-custom-breadcrumbs"},"meta":{"title":""},"headings":[{"value":"Drupal custom breadcrumbs"}],"html":"<h1>Drupal custom breadcrumbs</h1>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token keyword\">function</span> <span class=\"token function-definition function\">mydrive_preprocess_page</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span><span class=\"token variable\">$variables</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$variables</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'node'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">-></span><span class=\"token property\">type</span> <span class=\"token operator\">!=</span> <span class=\"token string double-quoted-string\">\"\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token variable\">$variables</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'template_files'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string double-quoted-string\">\"page-node-\"</span> <span class=\"token operator\">.</span> <span class=\"token variable\">$variables</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'node'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">-></span><span class=\"token property\">type</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$variables</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'node'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">-></span><span class=\"token property\">type</span> <span class=\"token operator\">==</span> <span class=\"token string double-quoted-string\">\"autoschool\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n            <span class=\"token variable\">$distinct</span> <span class=\"token operator\">=</span> <span class=\"token constant\">null</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">foreach</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$variables</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'node'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">-></span><span class=\"token property\">taxonomy</span> <span class=\"token keyword\">as</span> <span class=\"token variable\">$term</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$term</span><span class=\"token operator\">-></span><span class=\"token property\">vid</span> <span class=\"token operator\">==</span> <span class=\"token string double-quoted-string\">\"3\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                    <span class=\"token variable\">$distinct</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$term</span><span class=\"token punctuation\">;</span>\n                    <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n                <span class=\"token punctuation\">}</span>\n            <span class=\"token punctuation\">}</span>\n\n            <span class=\"token variable\">$regions_terms</span> <span class=\"token operator\">=</span> <span class=\"token function\">get_cached_regions_terms</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n            <span class=\"token variable\">$city</span> <span class=\"token operator\">=</span> <span class=\"token constant\">null</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">foreach</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$regions_terms</span> <span class=\"token keyword\">as</span> <span class=\"token variable\">$term</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$term</span><span class=\"token operator\">-></span><span class=\"token property\">tid</span> <span class=\"token operator\">==</span> <span class=\"token variable\">$distinct</span><span class=\"token operator\">-></span><span class=\"token property\">tid</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                    <span class=\"token variable\">$distinct</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$term</span><span class=\"token punctuation\">;</span>\n                    <span class=\"token keyword\">foreach</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$regions_terms</span> <span class=\"token keyword\">as</span> <span class=\"token variable\">$term</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$term</span><span class=\"token operator\">-></span><span class=\"token property\">tid</span> <span class=\"token operator\">==</span> <span class=\"token variable\">$distinct</span><span class=\"token operator\">-></span><span class=\"token property\">parents</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                            <span class=\"token variable\">$city</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$term</span><span class=\"token punctuation\">;</span>\n                            <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n                        <span class=\"token punctuation\">}</span>\n                    <span class=\"token punctuation\">}</span>\n                    <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n                <span class=\"token punctuation\">}</span>\n            <span class=\"token punctuation\">}</span>\n\n            <span class=\"token variable\">$breadcrumbs</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token variable\">$breadcrumbs</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'&lt;a href=\"/\">Главная&lt;/a>'</span><span class=\"token punctuation\">;</span>\n            <span class=\"token variable\">$breadcrumbs</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'&lt;a href=\"/ca\">Автошколы&lt;/a>'</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$city</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token variable\">$breadcrumbs</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'&lt;a href=\"/ca/'</span><span class=\"token operator\">.</span><span class=\"token variable\">$city</span><span class=\"token operator\">-></span><span class=\"token property\">tid</span><span class=\"token operator\">.</span><span class=\"token string single-quoted-string\">'\">'</span><span class=\"token operator\">.</span><span class=\"token variable\">$city</span><span class=\"token operator\">-></span><span class=\"token property\">name</span><span class=\"token operator\">.</span><span class=\"token string single-quoted-string\">'&lt;/a>'</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$city</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token variable\">$distinct</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token variable\">$breadcrumbs</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'&lt;a href=\"/ca/'</span><span class=\"token operator\">.</span><span class=\"token variable\">$city</span><span class=\"token operator\">-></span><span class=\"token property\">tid</span><span class=\"token operator\">.</span><span class=\"token string single-quoted-string\">'/'</span><span class=\"token operator\">.</span><span class=\"token variable\">$distinct</span><span class=\"token operator\">-></span><span class=\"token property\">tid</span><span class=\"token operator\">.</span><span class=\"token string single-quoted-string\">'\">'</span><span class=\"token operator\">.</span><span class=\"token variable\">$distinct</span><span class=\"token operator\">-></span><span class=\"token property\">name</span><span class=\"token operator\">.</span><span class=\"token string single-quoted-string\">'&lt;/a>'</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n            <span class=\"token variable\">$breadcrumbs</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$variables</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'node'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">-></span><span class=\"token property\">title</span><span class=\"token punctuation\">;</span>\n\n            <span class=\"token variable\">$variables</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'breadcrumb'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">theme</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'breadcrumb'</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$breadcrumbs</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>"}},"pageContext":{"id":"a70cb233-74fb-591a-b686-1126fefd1542"}},"staticQueryHashes":[],"slicesMap":{}}