{"componentChunkName":"component---src-templates-note-js","path":"/iis-combine-minify-assets","result":{"data":{"remark":{"fields":{"path":"iis-combine-minify-assets"},"meta":{"title":""},"headings":[{"value":"IIS combine and minify assets"}],"html":"<h1>IIS combine and minify assets</h1>\n<p>Suppose we have simple site with <code class=\"language-text\">/css</code> and <code class=\"language-text\">/js</code> folders which must be minified and combined.</p>\n<p>Create empty web forms web site and install <code class=\"language-text\">Microsoft ASP.NET Web Optimization Framework</code> via NuGet package manager.</p>\n<p>Actually all you need from this package is: <em>Microsoft.AspNet.Web.Optimization.WebForms.dll</em>, <em>System.Web.Optimization.dll</em> and <em>WebGrease.dll</em>.</p>\n<p>First two needed for bundles to work, last one need for minification.</p>\n<p>Add <code class=\"language-text\">Global.asax</code> to your project with content like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"csharp\"><pre class=\"language-csharp\"><code class=\"language-csharp\"><span class=\"token operator\">&lt;</span><span class=\"token operator\">%</span>@ <span class=\"token class-name\">Application</span> Language<span class=\"token operator\">=</span><span class=\"token string\">\"C#\"</span> <span class=\"token operator\">%</span><span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">%</span>@ <span class=\"token class-name\">Import</span> Namespace<span class=\"token operator\">=</span><span class=\"token string\">\"System.Web.Optimization\"</span> <span class=\"token operator\">%</span><span class=\"token operator\">></span>\n\n<span class=\"token operator\">&lt;</span><span class=\"token class-name\">script</span> runat<span class=\"token operator\">=</span><span class=\"token string\">\"server\"</span><span class=\"token operator\">></span>\n    <span class=\"token return-type class-name\"><span class=\"token keyword\">void</span></span> <span class=\"token function\">Application_Start</span><span class=\"token punctuation\">(</span><span class=\"token class-name\"><span class=\"token keyword\">object</span></span> sender<span class=\"token punctuation\">,</span> <span class=\"token class-name\">EventArgs</span> e<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        BundleTable<span class=\"token punctuation\">.</span>EnableOptimizations <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// this will override Web.config/configuration/system.web/compilation[@debug=true]</span>\n\n        <span class=\"token comment\">// Example of adding script bundle</span>\n        BundleTable<span class=\"token punctuation\">.</span>Bundles<span class=\"token punctuation\">.</span><span class=\"token function\">Add</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">ScriptBundle</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"~/bundles/js/all\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">Include</span><span class=\"token punctuation\">(</span>\n            <span class=\"token string\">\"~/js/a.js\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"~/js/b.js\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">// Example of adding styles bundle (can be also done via Bundle.config)</span>\n        BundleTable<span class=\"token punctuation\">.</span>Bundles<span class=\"token punctuation\">.</span><span class=\"token function\">Add</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">StyleBundle</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"~/bundles/css/all\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">Include</span><span class=\"token punctuation\">(</span>\n            <span class=\"token string\">\"~/css/a.css\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"~/css/b.css\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>script<span class=\"token operator\">></span></code></pre></div>\n<p>Add <code class=\"language-text\">Bundle.config</code> to your project (if needed):</p>\n<div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"utf-8\" ?></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>bundles</span> <span class=\"token attr-name\">version</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>1.0<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token comment\">&lt;!-- Example of styles bundle --></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>styleBundle</span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>~/bundles/css/config<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>include</span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>~/css/a.css<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>include</span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>~/css/b.css<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>styleBundle</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token comment\">&lt;!-- Scripts bundles can not be done this way --></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>bundles</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>Make your <code class=\"language-text\">Web.config</code> to look like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token prolog\">&lt;?xml version=\"1.0\"?></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>configuration</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>system.web</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token comment\">&lt;!-- debug=\"true\" turns off bundles - can be overwritten in Global.asax --></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>compilation</span> <span class=\"token attr-name\">debug</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>false<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">targetFramework</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>4.0<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>httpRuntime</span> <span class=\"token attr-name\">targetFramework</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>4.0<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>system.web</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>configuration</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>Restart your site, and thats all, now you can access your bundles by urls: <code class=\"language-text\">/bundles/js/all</code>, <code class=\"language-text\">/bundles/css/all</code>, <code class=\"language-text\">/bundles/css/config</code></p>\n<p>There is much more can be done with bundles, but in my case i need only such simple example</p>\n<p>On IIS 7 <em>microsoft.web.infrastructure.dll</em> also needed for proper work.</p>"}},"pageContext":{"id":"a80a1807-2d97-57ab-99ff-8fe0bc7cfefb"}},"staticQueryHashes":[]}