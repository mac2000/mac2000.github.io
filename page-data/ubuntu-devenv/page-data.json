{"componentChunkName":"component---src-templates-note-js","path":"/ubuntu-devenv","result":{"data":{"remark":{"fields":{"path":"ubuntu-devenv"},"meta":{"title":""},"headings":[{"value":"Ubuntu devenv"}],"html":"<h1>Ubuntu devenv</h1>\n<p>Tips for configuring php development enviroment in ubuntu.</p>\n<h2>Installing apps</h2>\n<p>First of all install tasksel:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> tasksel</code></pre></div>\n<p>To list available tasks use:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">tasksel --list-tasks</code></pre></div>\n<p>We're going to install lamp-server, dns-server, mail-server.</p>\n<h2>Installing LAMP</h2>\n<p>We're going install apache, mysql and php, to do so, type:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> tasksel <span class=\"token function\">install</span> lamp-server</code></pre></div>\n<p>This command will install and configure all this programs automaticaly. While installing you will be promted to enter root password for mysql.</p>\n<p>After installing try to open <a href=\"http://localhost\">http://localhost</a> if all ok you will see message \"It Works\".</p>\n<p>It is time to setup some packages that not installed by tasksel, like pear, gd, curl etc.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> php-pear php5-xdebug php-apc <span class=\"token function\">curl</span> libcurl3 php5-curl php5-gd php5-tidy php5-xmlrpc phpmyadmin <span class=\"token function\">cron</span> <span class=\"token function\">wget</span> phpunit libzend-framework-php libzend-framework-zendx-php zend-framework zend-framework-bin</code></pre></div>\n<p>While installing you will be promted for phpmyadmin password.</p>\n<p>Also here is some examples using pear:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> pear <span class=\"token function\">install</span> <span class=\"token parameter variable\">--alldeps</span> PhpDocumentor\npear list\n<span class=\"token function\">sudo</span> pear upgrade-all</code></pre></div>\n<p>After all installed, last step to do is enable rewrite module (and some other modules), and you may host almost any site in /var/www, to do so type:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> a2enmod deflate\n<span class=\"token function\">sudo</span> a2enmod expires\n<span class=\"token function\">sudo</span> a2enmod rewrite\n<span class=\"token function\">sudo</span> /etc/init.d/apache2 restart</code></pre></div>\n<p>Now edit /etc/apache2/sites-available/default and change AllowOverride to All for / and /var/www directories, otherwise clean urls wont work. Do not forget restart apache after doing changes to configs.</p>\n<p>Now you will be able to host probably anything in your /var/<a href=\"http://www\">www</a>. But I always need to host many projects, so i again and again create virtual host for each and record in /ets/hosts file and it makes me crazy. What i going to do is setup DNS server to resole any subdomain to localhost and configure apache mass virtual hosting.</p>\n<p><strong>NOTICE:</strong> to make <code class=\"language-text\">mod_rewrite</code> work u must add <code class=\"language-text\">RewriteBase /</code></p>\n<h2>Installing DNS</h2>\n<p>To install DNS just type:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> tasksel <span class=\"token function\">install</span> dns-server</code></pre></div>\n<p>I'm going to configure local.com domain, but it may be really anithing u want.</p>\n<p>First edit /etc/bind/named.conf.local, and add:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">zone \"local.com\" {\n    type master;\n    file \"/etc/bind/db.local.com\";\n};</code></pre></div>\n<p>Then:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">cp</span> /etc/bind/db.local /etc/bind/db.local.com</code></pre></div>\n<p>Then edit /etc/bind/db.local.com, replace all localhost string to local.com and add following line to end of file:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">*.local.com. IN A 127.0.0.1</code></pre></div>\n<p>No check your file, restart bind and check is it works:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">named-checkzone local.com /etc/bind/db.local.com\n<span class=\"token function\">sudo</span> /etc/init.d/bind9 restart\n<span class=\"token function\">nslookup</span> aa.bb.local.com <span class=\"token number\">127.0</span>.0.1</code></pre></div>\n<p>Now when DNS is working we need to tell dhcp to use it, just uncomment following line in /etc/dhcp3/dhclient.conf:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">prepend domain-name-servers 127.0.0.1;</code></pre></div>\n<p>Now after restart you will be able to ping any subdomain for local.com.</p>\n<h2>Apache Mass Virtual Hosting</h2>\n<p>Main idea is that you will have folder projects, and its subfolders will be subdomains to local.com. To configure this you will need <code class=\"language-text\">vhost_alias</code> module, enable it by typing:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> a2enmod vhost_alias\n<span class=\"token function\">sudo</span> /etc/init.d/apache2 restart</code></pre></div>\n<p>Now create folders for your projects:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">mkdir</span> <span class=\"token parameter variable\">-p</span> ~/Projects/zf\n<span class=\"token function\">mkdir</span> <span class=\"token parameter variable\">-p</span> ~/Projects/drupal\n<span class=\"token function\">mkdir</span> <span class=\"token parameter variable\">-p</span> ~/Projects/wp\n<span class=\"token function\">mkdir</span> <span class=\"token parameter variable\">-p</span> ~/Projects/script</code></pre></div>\n<p>And create file /etc/apache2/sites-available/local.com and edit it like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\"># AllowOverride for mod_rewrite\n# Do not forget to change directory path\n&lt;Directory /home/mac/Projects>\n    Options All\n    AllowOverride All\n&lt;/Directory>\n\n# Replacements for subdomains\n# %0 - test1.drupal.local.com > test1.drupal.local.com\n# %1 - test1.drupal.local.com > test1\n\n&lt;VirtualHost *:80>\n        ServerAlias *.drupal.local.com\n        VirtualDocumentRoot /home/mac/Projects/drupal/%1\n&lt;/VirtualHost>\n\n# If using netbeans\n# ln -s /home/mac/NetBeansProjects /home/mac/Projects/nb\n# Notice: project names must be in lower case to work\n&lt;VirtualHost *:80>\n        ServerAlias *.nb.local.com\n        VirtualDocumentRoot /home/mac/Projects/nb/%1\n&lt;/VirtualHost>\n\n&lt;VirtualHost *:80>\n        ServerAlias *.script.local.com\n        VirtualDocumentRoot /home/mac/Projects/script/%1\n&lt;/VirtualHost>\n\n&lt;VirtualHost *:80>\n        ServerAlias *.wp.local.com\n        VirtualDocumentRoot /home/mac/Projects/wp/%1\n&lt;/VirtualHost>\n\n&lt;VirtualHost *:80>\n    ServerAlias *.zf.local.com\n    VirtualDocumentRoot /home/mac/Projects/zf/%1/public\n&lt;/VirtualHost></code></pre></div>\n<p>Now if you create ~/Projects/wp/test1/index.php it will be accessible on <a href=\"http://test1.wp.local.com\">http://test1.wp.local.com</a>.</p>\n<p>All left to do is to configure mail.</p>\n<h2>Install mail server</h2>\n<p>To install mail server just type:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> tasksel <span class=\"token function\">install</span> mail-server</code></pre></div>\n<p>While installing mail server choose \"Internet site\". When you will be asked to enter domain type local.com.</p>\n<p>After installing add following lines to end of /etc/postfix/main.cf file:</p>\n<div class=\"gatsby-highlight\" data-language=\"ini\"><pre class=\"language-ini\"><code class=\"language-ini\"><span class=\"token key attr-name\">local_recipient_maps</span> <span class=\"token punctuation\">=</span>\n<span class=\"token comment\"># Replace mac to your user name</span>\n<span class=\"token key attr-name\">luser_relay</span> <span class=\"token punctuation\">=</span> <span class=\"token value attr-value\">mac</span></code></pre></div>\n<p>This lines tells that all mail will be mailed to specific user.</p>\n<p>Now restart postfix:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> /etc/init.d/postfix restart</code></pre></div>\n<p>And you will be able to send mails to <a href=\"mailto:user1@local.com\">user1@local.com</a>, <a href=\"mailto:user2@local.com\">user2@local.com</a> etc. All mail will be mailed to your local mailbox.</p>\n<p>Try this script ~/Projects/script/mail/index.php, accessible via <a href=\"http://mail.script.local.com/\">http://mail.script.local.com/</a>, run it at least once when all done, to create local mailbox file:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n<span class=\"token variable\">$r</span> <span class=\"token operator\">=</span> <span class=\"token function\">mail</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'user1@local.com'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'test'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'test'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$m</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$r</span> <span class=\"token operator\">?</span> <span class=\"token string single-quoted-string\">'yes'</span> <span class=\"token punctuation\">:</span> <span class=\"token string single-quoted-string\">'no'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">echo</span> <span class=\"token variable\">$m</span><span class=\"token punctuation\">;</span></span></code></pre></div>\n<p>To retrive local mail, add account to evolution.</p>\n<p>When evolution will asks for retriving mail configuration, choose \"Local\", evolution will asks for file with mails, run previous script and file will be created, and placed at /var/mail/mac</p>\n<p><strong>Uploadprogress</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> pecl <span class=\"token function\">install</span> uploadprogress</code></pre></div>\n<p>After install create file /etc/php5/apache2/conf.d/uploadprogress.ini with following line</p>\n<div class=\"gatsby-highlight\" data-language=\"ini\"><pre class=\"language-ini\"><code class=\"language-ini\"><span class=\"token key attr-name\">extension</span><span class=\"token punctuation\">=</span><span class=\"token value attr-value\">uploadprogress.so</span></code></pre></div>\n<p><strong>ServerName</strong></p>\n<p>Put into /etc/apache2/httpd.conf</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">ServerName local.com</code></pre></div>\n<p><strong>PHP</strong></p>\n<p>Edit /etc/php5/apache2/php.ini</p>\n<div class=\"gatsby-highlight\" data-language=\"ini\"><pre class=\"language-ini\"><code class=\"language-ini\"><span class=\"token key attr-name\">error_reporting</span> <span class=\"token punctuation\">=</span> <span class=\"token value attr-value\">E_ALL &amp; ~E_NOTICE</span>\n<span class=\"token key attr-name\">display_errors</span> <span class=\"token punctuation\">=</span> <span class=\"token value attr-value\">On</span>\n<span class=\"token key attr-name\">display_startup_errors</span> <span class=\"token punctuation\">=</span> <span class=\"token value attr-value\">On</span>\n<span class=\"token key attr-name\">track_errors</span> <span class=\"token punctuation\">=</span> <span class=\"token value attr-value\">On</span>\n<span class=\"token key attr-name\">html_errors</span> <span class=\"token punctuation\">=</span> <span class=\"token value attr-value\">On</span>\n<span class=\"token key attr-name\">memory_limit</span> <span class=\"token punctuation\">=</span> <span class=\"token value attr-value\">128M</span>\n<span class=\"token key attr-name\">post_max_size</span> <span class=\"token punctuation\">=</span> <span class=\"token value attr-value\">128M</span>\n<span class=\"token key attr-name\">upload_max_filesize</span> <span class=\"token punctuation\">=</span> <span class=\"token value attr-value\">128M</span>\n<span class=\"token key attr-name\">max_execution_time</span> <span class=\"token punctuation\">=</span> <span class=\"token value attr-value\">900</span></code></pre></div>\n<p>Example of development php.ini can be found here: <code class=\"language-text\">/usr/share/doc/php5-common/examples/php.ini-development</code></p>\n<p><strong>XDEBUG</strong></p>\n<p>Edit /etc/php5/apache2/conf.d/xdebug.ini</p>\n<div class=\"gatsby-highlight\" data-language=\"ini\"><pre class=\"language-ini\"><code class=\"language-ini\"><span class=\"token key attr-name\">xdebug.remote_enable</span><span class=\"token punctuation\">=</span><span class=\"token value attr-value\">On</span>\n<span class=\"token key attr-name\">xdebug.remote_enable</span><span class=\"token punctuation\">=</span><span class=\"token value attr-value\">1</span>\n<span class=\"token key attr-name\">xdebug.remote_handler</span><span class=\"token punctuation\">=</span><span class=\"token value attr-value\">dbgp</span>\n<span class=\"token key attr-name\">xdebug.remote_mode</span><span class=\"token punctuation\">=</span><span class=\"token value attr-value\">req</span>\n<span class=\"token key attr-name\">xdebug.remote_host</span><span class=\"token punctuation\">=</span><span class=\"token value attr-value\">127.0.0.1</span>\n<span class=\"token key attr-name\">xdebug.remote_port</span><span class=\"token punctuation\">=</span><span class=\"token value attr-value\">9000</span></code></pre></div>\n<p><strong>Permissions</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">chgrp</span> <span class=\"token parameter variable\">-R</span> www-data /var/www\n<span class=\"token function\">sudo</span> <span class=\"token function\">chmod</span> <span class=\"token parameter variable\">-R</span> <span class=\"token number\">777</span> /var/www\n<span class=\"token function\">sudo</span> <span class=\"token function\">chmod</span> <span class=\"token parameter variable\">-R</span> g+st /var/www\n<span class=\"token function\">sudo</span> <span class=\"token function\">usermod</span> <span class=\"token parameter variable\">-a</span> <span class=\"token parameter variable\">-G</span> www-data mac <span class=\"token comment\">#YOUR USERNAME HERE</span></code></pre></div>\n<p><strong>Sun Java</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> add-apt-repository ppa:ferramroberto/java\n<span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> update\n<span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> sun-java6-jdk sun-java6-plugin\n<span class=\"token function\">sudo</span> update-alternatives <span class=\"token parameter variable\">--config</span> <span class=\"token function\">java</span></code></pre></div>\n<p><strong>Rewrite</strong></p>\n<p>Add to /etc/php5/apache2/php.ini</p>\n<div class=\"gatsby-highlight\" data-language=\"ini\"><pre class=\"language-ini\"><code class=\"language-ini\"><span class=\"token key attr-name\">auto_prepend_file</span> <span class=\"token punctuation\">=</span> <span class=\"token value attr-value\">/var/www/vhosts/virtual.prepend.php</span></code></pre></div>\n<p>with following content:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n<span class=\"token variable\">$http_host</span> <span class=\"token operator\">=</span> <span class=\"token function\">explode</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'.'</span><span class=\"token punctuation\">,</span><span class=\"token variable\">$_SERVER</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'HTTP_HOST'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$__mod_vhost_alias_fix_doc_root</span> <span class=\"token operator\">=</span> <span class=\"token function\">dirname</span><span class=\"token punctuation\">(</span><span class=\"token constant\">__FILE__</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">.</span> <span class=\"token constant\">DIRECTORY_SEPARATOR</span> <span class=\"token operator\">.</span> <span class=\"token variable\">$http_host</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">is_dir</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$__mod_vhost_alias_fix_doc_root</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n<span class=\"token variable\">$_SERVER</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'__MOD_VHOST_FIX_OLD_DOCUMENT_ROOT'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$_SERVER</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'DOCUMENT_ROOT'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$_SERVER</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'DOCUMENT_ROOT'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$__mod_vhost_alias_fix_doc_root</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token delimiter important\">?></span></span></code></pre></div>\n<p><strong>Links</strong></p>\n<p><a href=\"http://www.vmirgorod.name/11/1/20/drupal-development-environment-based-ubuntu-1010\">http://www.vmirgorod.name/11/1/20/drupal-development-environment-based-ubuntu-1010</a></p>"}},"pageContext":{"id":"d208e744-5fe7-5116-b77b-68474343188c"}},"staticQueryHashes":[]}