{"componentChunkName":"component---src-templates-note-js","path":"/graphql-prototyping/","result":{"data":{"remark":{"fields":{"path":"graphql-prototyping"},"meta":{"title":""},"headings":[{"value":"Playground"}],"html":"<p>Заметка о том как можно быстренько спрототипировать графовый сервис</p>\n<p>Делать будем на ноде, почему станет понятнее в процессе</p>\n<h1>Playground</h1>\n<p>Выполнить следующее</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">mkdir</span> playground\n<span class=\"token builtin class-name\">cd</span> playground\n<span class=\"token function\">npm</span> init <span class=\"token parameter variable\">-y</span> <span class=\"token parameter variable\">-f</span>\n<span class=\"token function\">npm</span> i <span class=\"token parameter variable\">-S</span> @apollo/server\n\n<span class=\"token function\">cat</span> <span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">EOT<span class=\"token bash punctuation\"> <span class=\"token operator\">>></span> playground.mjs</span>\nimport { ApolloServer } from '@apollo/server'\nimport { startStandaloneServer } from '@apollo/server/standalone'\n\nconst typeDefs = <span class=\"token variable\"><span class=\"token variable\">`</span><span class=\"token comment\">#graphql</span>\n<span class=\"token builtin class-name\">type</span> User <span class=\"token punctuation\">{</span>\n  id: ID<span class=\"token operator\">!</span>\n  username: String<span class=\"token operator\">!</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token builtin class-name\">type</span> Query <span class=\"token punctuation\">{</span>\n  me: User\n  users<span class=\"token punctuation\">(</span>name: String<span class=\"token punctuation\">)</span>: <span class=\"token punctuation\">[</span>User<span class=\"token operator\">!</span><span class=\"token punctuation\">]</span><span class=\"token operator\">!</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token variable\">`</span></span>\n\nconst db = {\n  users: [\n    { id: '1', username: 'mac' },\n    { id: '2', username: 'vadim' },\n    { id: '3', username: 'toma' },\n  ],\n}\n\nconst resolvers = {\n  Query: {\n    me: () => db.users.find(u => u.username === 'mac'),\n    users: (_, { name }) => (name ? db.users.filter(u => u.username.includes(name)) : db.users),\n  },\n}\n\nconst server = new ApolloServer({ typeDefs, resolvers })\nstartStandaloneServer(server).then<span class=\"token variable\"><span class=\"token punctuation\">((</span>{ url }<span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> console.log<span class=\"token punctuation\">(</span>`open ${url}`<span class=\"token punctuation\">))</span></span>\nEOT</span>\n\nnpx nodemon playground.mjs</code></pre></div>"}},"pageContext":{"id":"40cfc122-82ad-5038-924e-a7a07fc571c8"}},"staticQueryHashes":[],"slicesMap":{}}