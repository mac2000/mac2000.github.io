{"componentChunkName":"component---src-templates-note-js","path":"/dotnet-strawberry-graphql-strongly-typed-client/","result":{"data":{"remark":{"fields":{"path":"dotnet-strawberry-graphql-strongly-typed-client"},"meta":{"title":""},"headings":[{"value":"Compress me"}],"html":"<h1>Compress me</h1>\n<p>Strawberry Shake removes the complexity of state management and lets you interact with local and remote data through GraphQL.</p>\n<p>–ù–∞ –¥–µ–ª–µ –≤—ã–≥–æ–¥–Ω–æ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç –≤—Å–µ–≥–æ –æ—Å—Ç–∞–ª—å–Ω–æ–≥–æ —Ç–µ–º —á—Ç–æ:</p>\n<ul>\n<li>–≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å—ã - —á–∏—Ç–∞–π –Ω–µ –≤–æ–∑–º–æ–∂–Ω–æ –æ—á–µ–ø—è—Ç–∞—Ç—å—Å—è –≤ –∑–∞–ø—Ä–æ—Å–µ</li>\n<li>–∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–æ–¥–æ –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –¥–ª—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ - —á–∏—Ç–∞–π –Ω–µ –≤–æ–∑–º–æ–∂–Ω–æ –∑–∞–±—ã—Ç—å —á—Ç–æ –≤ –∑–∞–ø—Ä–æ—Å–µ —É–±—Ä–∞–ª–∏ –ø–æ–ª–µ, –∞ –∏–∑ –º–æ–¥–µ–ª—å–∫–∏ –∑–∞–±—ã–ª–∏</li>\n<li>–≥–µ–Ω–µ—Ä–∏—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –¥–ª—è –≤—Å–µ–≥–æ –Ω–∞ —Å–≤–µ—Ç–µ - —á–∏—Ç–∞–π –ø—Ä–æ—â–µ –ø—Ä–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏</li>\n</ul>\n<p>–î–µ–º–æ –ø—Ä–æ–µ–∫—Ç:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">mkdir</span> demo\n<span class=\"token builtin class-name\">cd</span> demo\ndotnet new web\ndotnet <span class=\"token function\">add</span> package StrawberryShake.Transport.Http\ndotnet <span class=\"token function\">add</span> package StrawberryShake.CodeGeneration.CSharp.Analyzers</code></pre></div>\n<p>–ï–¥–∏–Ω–æ–∂–¥—ã:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">dotnet tool <span class=\"token function\">install</span> StrawberryShake.Tools <span class=\"token parameter variable\">--global</span>\ndotnet graphql init https://dracula.rabota.ua/graphql <span class=\"token parameter variable\">-n</span> DraculaClient</code></pre></div>\n<p>–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ —Å—Ç—è–Ω–µ—Ç —Å—Ö–µ–º—É –∏ —Å–æ–∑–¥–∞—Å—Ç –∫–æ–Ω—Ñ–∏–≥ <code class=\"language-text\">.graphqlrc.json</code> –≤ –∫–æ—Ç–æ—Ä–æ–º –µ—Å—Ç—å —Å–º—ã—Å–ª –≤—ã–∫–ª—é—á–∏—Ç—å <code class=\"language-text\">emitGeneratedCode</code> (—á—Ç–æ –±—ã –Ω–µ —Å–æ–∑–¥–∞–≤–∞–ª–∞—Å—å –ø–∞–ø–∫–∞ Generated, –≤—Å–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –≤—Å–µ —Ä–∞–≤–Ω–æ –±—É–¥—É—Ç –¥–æ—Å—Ç—É–ø–Ω—ã, –ø–ª—é—Å —á—Ç–æ –±—ã –Ω–µ —Å–≤–æ–¥–∏—Ç—å —Å —É–º–∞ IDE), –∞ —Ç–∞–∫ –∂–µ –ø–æ –∂–µ–ª–∞–Ω–∏—é –≤–∫–ª—é—á–∏—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏—é record –∑–∞ –≤–º–µ—Å—Ç–æ class –¥–ª—è inputs –∏ entities.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 940px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/1ac63a42e227151fc5ac17712e69153d/f79fa/image-20220905-064955.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 132.8125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAbCAYAAAB836/YAAAACXBIWXMAABYlAAAWJQFJUiTwAAADn0lEQVR42q1WiW7bRhTk//9NP6BoA6RNgTZNY1vWSYsSxVMUuVwuuctLk1laduvUBwqXwLMpS5qd92be0E43DKg1cD7j8frn/X+9nKIxaLsRQrXYJQqHrEbXdWjCEJXnQR+PUIcD6iBAKyXeOsuRusU4jogLjdu9wOJQTqBaVlC7HZS/h9xskF9dQfo+Bnb0KmBFwDMBE0FAX2Adygn0JDUqXWHoewxkPLY8mGBvMiy1Qc8P9sMIn8ws6IxMD0eF5aGAz99aKfRGc7bnNwfsVKadAMdJnBarQCLIG3SiQLlZs20P9Z0L5W5QHdiyaXBu9T1j1qA1hqbByC4eZ/gAqJoWHoVJSw0RxoivbpC5WyTzFdLbBUr3Dsf5DunVDI2/44EuxHyO/OYGiqLZDpyCnun7e8CqbrEJK8z9EnPOcRWUuNkVHEOJZaQQ5xr+YUAQ9DB6+HsErPNlFE5OwOHCUNYGblxNbVtxrneCgALBscLO3WPvp2jaDsfjGWnaW8f+e4aJVBPgMPScYTeBWVZW6U1UYZtU0Px7sDhBiebi/MuPZwRyjlV9ARwmQAti27Vtb8jSHpDSUnmiOU8fOk1eNbgTl+oJoBuryTaW4coChgJfvRzbqIA65SiXKxQsyS1SQchRjd+3XFGUDl1vUDV6Apjtc0S5RF4Y3M4pQqhhaPBuoMF7dkTbdE091TD2GM/DYzlLb4m08JAJD/vkDr+vV/g0X+ILPWjr19kKv8wW8BMPn24+4qc/PiLOAojaR1EdkEv/STlJeWHYtVS5obpi2pBr74QZxbmj6iHZnrIOy7VBlNTUgmzG54szFEybhlVzhgpeaud3oro5GSgkRc4DuRFjy7F0XIL7+5fKud5fIczmiE4Ltr6AGy3w8/Vf+G15jZn3FT/++QM+fP7A8HCp9upS6xfL2cQemURTHYuQjGKyC7GNQ8ZYxA9t8WX1GYXMoEwK2bxeTnSxje1fVC2BO8ZWT8V7Dr5j8PLedNAs5sjbiZ3Ki7Fpi7brERWSMaamfMykQVZSCGG4cny/PT/Z3xeNbfe4tz5jBHUcumBIHAl0ImPDQ0Zxgo5jRtTbFGnsenL7A6BlsE/VtM82edxYYhdyS/ICxXoNud2i2u9hsuz5XY6Emp4pD4ANLWTTu+1tDWx1gOFrNssNYXYyTAdjHgP1GUA+N/iFKW0ohGnf8Qx9EMUyNIz2vjV47+UcqKp9LttW/4/LEUyY7/9zeA/gNzrLIrCPf0O8AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"screenshot\"\n        title=\"\"\n        src=\"/static/1ac63a42e227151fc5ac17712e69153d/f79fa/image-20220905-064955.png\"\n        srcset=\"/static/1ac63a42e227151fc5ac17712e69153d/6f3f2/image-20220905-064955.png 256w,\n/static/1ac63a42e227151fc5ac17712e69153d/01e7c/image-20220905-064955.png 512w,\n/static/1ac63a42e227151fc5ac17712e69153d/f79fa/image-20220905-064955.png 940w\"\n        sizes=\"(max-width: 940px) 100vw, 940px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>–¢–µ–ø–µ—Ä—å –≥–¥–µ —É–≥–æ–¥–Ω–æ –≤ –ø—Ä–æ–µ–∫—Ç–µ —Å–æ–∑–¥–∞–µ–º graphql —Ñ–∞–π–ª —Å –∫–∞–∫–∏–º –ª–∏–±–æ –∑–∞–ø—Ä–æ—Å–æ–º, –Ω–∞–ø—Ä–∏–º–µ—Ä:</p>\n<p><strong>GetPublishedVacancies.graphql</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"gql\"><pre class=\"language-gql\"><code class=\"language-gql\">query GetPublishedVacancies($keywords: String!) {\n  publishedVacancies(\n    filter: { keywords: $keywords }\n    pagination: { count: 3 }\n  ) {\n    items {\n      id\n      title\n    }\n  }\n}</code></pre></div>\n<p>–ü—Ä–∏–º–µ—á–∞–Ω–∏—è:</p>\n<ul>\n<li>vscode –∏ rider –∏–º–µ—é—Ç graphql –ø–ª–∞–≥–∏–Ω—ã, –±–ª–∞–≥–æ–¥–∞—Ä—è —á–µ–º—É –Ω–µ —Ç–æ–ª—å–∫–æ —Å–º–æ–≥—É—Ç –ø–æ–¥—Å–≤–µ—Ç–∏—Ç—å —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –∏ –ø–æ–¥—Å–∫–∞–∑–∞—Ç—å —á—Ç–æ –ø–∏—Å–∞—Ç—å –¥–∞–ª—å—à–µ, –Ω–æ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å –∑–∞–ø—Ä–æ—Å –ø—Ä—è–º–æ –∏–∑ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞</li>\n<li>–±–ª–∞–≥–æ–¥–∞—Ä—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏, –µ—Å–ª–∏ —è –æ—á–µ–ø—è—Ç–∞—é—Å—å –≥–¥–µ –ª–∏–±–æ –∏ –Ω–∞–ø—Ä–∏–º–µ—Ä –Ω–∞–ø–∏—à—É <code class=\"language-text\">tittle</code> —Ç–æ –ø—Ä–æ–µ–∫—Ç –ø—Ä–æ—Å—Ç–æ –Ω–∞–ø—Ä–æ—Å—Ç–æ –Ω–µ —Å–æ–±–µ—Ä–µ—Ç—å—Å—è —Å –æ—à–∏–±–∫–æ–π <code class=\"language-text\">GetPublishedVacancies.graphql(6, 8): [SS0002] The field `tittle` does not exist on the type `Vacancy`.</code></li>\n</ul>\n<p>–°–æ–±–∏—Ä–∞–µ–º –ø—Ä–æ–µ–∫—Ç <code class=\"language-text\">dotnet build</code> (–ø–µ—Ä–≤—ã–π —Ä–∞–∑, –≤–æ–∑–º–æ–∂–Ω–æ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—å—Å—è –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Ä–µ–¥–∞–∫—Ç–æ—Ä, —á—Ç–æ –±—ã –ø–æ—Å–ª–µ–¥–Ω–∏–π —Ä–∞—Å—á–µ—Ö–ª–∏–ª—Å—è –∏ ‚Äú—É–≤–∏–¥–µ–ª‚Äù —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥)</p>\n<p>–î–∞–ª—å—à–µ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º –Ω–∞—à –∫–ª–∏–µ–Ω—Ç:</p>\n<div class=\"gatsby-highlight\" data-language=\"csharp\"><pre class=\"language-csharp\"><code class=\"language-csharp\">builder<span class=\"token punctuation\">.</span>Services\n    <span class=\"token punctuation\">.</span><span class=\"token function\">AddDraculaClient</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">ConfigureHttpClient</span><span class=\"token punctuation\">(</span>client <span class=\"token operator\">=></span> client<span class=\"token punctuation\">.</span>BaseAddress <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">Uri</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"https://dracula.rabota.ua\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>–ù—É –∏ –ø–æ –º–µ—Å—Ç—É –∏–Ω–∂–µ–∫—Ç–∏–º <code class=\"language-text\">IDraculaClient</code> –∏ –≤—ã–∑—ã–≤–∞–µ–º —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π <code class=\"language-text\">GetPublishedVacancies</code>, –Ω–∞–ø—Ä:</p>\n<div class=\"gatsby-highlight\" data-language=\"csharp\"><pre class=\"language-csharp\"><code class=\"language-csharp\"><span class=\"token class-name\"><span class=\"token keyword\">var</span></span> client <span class=\"token operator\">=</span> app<span class=\"token punctuation\">.</span>Services<span class=\"token punctuation\">.</span><span class=\"token generic-method\"><span class=\"token function\">GetRequiredService</span><span class=\"token generic class-name\"><span class=\"token punctuation\">&lt;</span>IDraculaClient<span class=\"token punctuation\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token class-name\"><span class=\"token keyword\">var</span></span> vacancies <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> client<span class=\"token punctuation\">.</span>GetPublishedVacancies<span class=\"token punctuation\">.</span><span class=\"token function\">ExecuteAsync</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"PHP\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>vacancies<span class=\"token punctuation\">.</span>Data <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">&amp;&amp;</span> vacancies<span class=\"token punctuation\">.</span>Data<span class=\"token punctuation\">?.</span>PublishedVacancies<span class=\"token punctuation\">.</span>Items <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">foreach</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\"><span class=\"token keyword\">var</span></span> vacancy <span class=\"token keyword\">in</span> vacancies<span class=\"token punctuation\">.</span>Data<span class=\"token punctuation\">.</span>PublishedVacancies<span class=\"token punctuation\">.</span>Items<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        Console<span class=\"token punctuation\">.</span><span class=\"token function\">WriteLine</span><span class=\"token punctuation\">(</span><span class=\"token interpolation-string\"><span class=\"token string\">$\"</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span><span class=\"token expression language-csharp\">vacancy<span class=\"token punctuation\">?.</span>Id</span><span class=\"token punctuation\">}</span></span><span class=\"token string\">: </span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span><span class=\"token expression language-csharp\">vacancy<span class=\"token punctuation\">?.</span>Title</span><span class=\"token punctuation\">}</span></span><span class=\"token string\">\"</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<blockquote>\n<p>–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –±–ª–∏–Ω, —É –Ω–∞—Å —Ç—É—Ç –Ω–∞ –≤—ã—Ö–æ–¥–µ <code class=\"language-text\">[Vacancy]</code> –∏–∑-–∑–∞ —á–µ–≥–æ –≤—Å–µ –≤—Å–µ nullable ü§∑‚Äç‚ôÇÔ∏è</p>\n</blockquote>\n<p>–∏–ª–∏:</p>\n<div class=\"gatsby-highlight\" data-language=\"csharp\"><pre class=\"language-csharp\"><code class=\"language-csharp\">app<span class=\"token punctuation\">.</span><span class=\"token function\">MapGet</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/vacancies\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token attribute\"><span class=\"token class-name\">FromServices</span></span><span class=\"token punctuation\">]</span> <span class=\"token class-name\">IDraculaClient</span> client<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> client<span class=\"token punctuation\">.</span>GetPublishedVacancies<span class=\"token punctuation\">.</span><span class=\"token function\">ExecuteAsync</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"PHP\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 956px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0f404ba70b5811deab39e541c53055f7/7b1dc/image-20220905-073118.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 89.84375%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAABYlAAAWJQFJUiTwAAABrElEQVR42qWUi46bMBBF8/8/WGnFVtWyQAIsxC/wC25npnKaPqi6iaPJIMtc3zNjc3LLghgTQgiw1kFpg7pp8VK9Snx7q/H23tyi6c7QtO4oTjFGpJSw7zv42fsAbQymeZZQWsMYK3OaNjPWwtPmR3FiMXbnvcdCbnPO2LYNj44TO2MBTU7qukbXdRiGAefzWTKHUgohhv/a6CZYkGfCrKoKl8uFamqxrquUpKzhsd/9cDfzi2AJRmZ8ziyWtwzjNWwwiDl+zmF55sF1bair83VGry/4OlZoru9Q61Vich+Yl0k26m1PzzPSlv4uyM3hzKjsVsqRA1x0WOKCNa0kZOEoQgpYwo95XveH4A21oBOy9opecOLgIWTO3NWWDjgjD2Yg5FdB16vCRKiM++FGyaVZh4LskHM5nzzvk5dYCc0JohNsxv2nQ0YtBzyGKMjyIgmlnJ7rMh/0aZoIucdL/wWdaqm7E63JP0/iHe6hQxYrB51dbjvhEy532lOHfxc5FCz3+qm7zH/sisXKV+eZcXM4jiPatpU73Pc9nHNylz8tyGJcq1Kze6ePoH8H6nCD0WTQOnsAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"screenshot\"\n        title=\"\"\n        src=\"/static/0f404ba70b5811deab39e541c53055f7/7b1dc/image-20220905-073118.png\"\n        srcset=\"/static/0f404ba70b5811deab39e541c53055f7/6f3f2/image-20220905-073118.png 256w,\n/static/0f404ba70b5811deab39e541c53055f7/01e7c/image-20220905-073118.png 512w,\n/static/0f404ba70b5811deab39e541c53055f7/7b1dc/image-20220905-073118.png 956w\"\n        sizes=\"(max-width: 956px) 100vw, 956px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Profit</p>\n<hr>\n<h2>–í–æ–ø—Ä–æ—Å—ã</h2>\n<h3>–ö–∞–∫ –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ö–µ–º—É</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">dotnet graphql update</code></pre></div>\n<h3>–ù—É–∂–Ω–æ –ª–∏ –∫–æ–º–º–∏—Ç–∞—Ç—å —Å—Ö–µ–º—É</h3>\n<p>–î–∞, –±–µ–∑ –Ω–µ–µ –ø—Ä–æ–µ–∫—Ç –Ω–µ —Å–æ–±–µ—Ä–µ—Ç—å—Å—è</p>\n<blockquote>\n<p>–¢—É—Ç –∫—Å—Ç–∞—Ç–∏ —Ç–æ–∂–µ –ª—é–±–æ–ø—ã—Ç–Ω–æ, –ø–æ–ª—É—á–∞–µ—Ç—Å—è –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ —Å–±–æ—Ä–∫–∏ –±–ª–∞–≥–æ–¥–∞—Ä—è —ç—Ç–æ–º –º–æ–∂–Ω–æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å, –≤—Å–µ –µ—â–µ –∞–∫—Ç—É–∞–ª—å–Ω–∞—è —Å—Ö–µ–º–∞ –∏–ª–∏ –Ω–µ—Ç –≤ –ø—Ä–æ–µ–∫—Ç—á–µ (—á–∏—Ç–∞–π –æ–±–µ—Å–ø–µ—á–∏–≤–∞—Ç—å —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å)</p>\n</blockquote>\n<h3>–ü–ª–∞–≥–∏–Ω rider —Ö–æ—á–µ—Ç —Å–æ–∑–¥–∞—Ç—å –≤—Ç–æ—Ä–æ–π –∫–æ–Ω—Ñ–∏–≥</h3>\n<p>–î–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ, –≤ rider –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è ‚Äú—Å—Ç–∞—Ä—ã–π‚Äù –ø–æ–¥—Ö–æ–¥ —Å <code class=\"language-text\">.graphqlconfig</code> –Ω–æ –¥–ª—è –Ω–∞—Å —ç—Ç–æ —Å–æ–≤—Å–µ–º –Ω–µ –ø—Ä–æ–±–ª–µ–º–∞, —Ç–∞–∫ –∫–∞–∫ –æ–Ω —Å–º–æ—Ç—Ä–∏—Ç –Ω–∞ —Ç–æ—Ç –∂–µ —Ñ–∞–π–ª —Å—Ö–µ–º—ã</p>\n<h3>–ö–∞–∫ –ø—Ä–æ–∫–∏–Ω—É—Ç—å —Ç–æ–∫–µ–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h3>\n<p>–ß—Ç–æ —Ç–æ —Ç–∏–ø–∞ —Ç–∞–∫–æ–≥–æ (–ø—Å–µ–≤–¥–æ):</p>\n<div class=\"gatsby-highlight\" data-language=\"csharp\"><pre class=\"language-csharp\"><code class=\"language-csharp\">builder<span class=\"token punctuation\">.</span>Services\n    <span class=\"token punctuation\">.</span><span class=\"token function\">AddHttpContextAccessor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">AddDraculaClient</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">ConfigureHttpClient</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>provider<span class=\"token punctuation\">,</span> client<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n    <span class=\"token punctuation\">{</span>\n        client<span class=\"token punctuation\">.</span>BaseAddress <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">Uri</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"https://dracula.rabota.ua\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        client<span class=\"token punctuation\">.</span>Timeout <span class=\"token operator\">=</span> TimeSpan<span class=\"token punctuation\">.</span><span class=\"token function\">FromSeconds</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">// var ctx = provider.GetRequiredService&lt;IHttpContextAccessor>();</span>\n        <span class=\"token comment\">// client.DefaultRequestHeaders.Authorization = new AuthenticationHeaderValue(\"Bearer\", ctx.HttpContext?.Request.Headers.Authorization)</span>\n        <span class=\"token comment\">// client.DefaultRequestHeaders.AcceptLanguage = ctx.HttpContext.Request.Headers.AcceptLanguage;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>–ü–æ–¥—Ä–æ–±–Ω–µ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–Ω–æ –≤ <a href=\"https://chillicream.com/docs/strawberryshake/networking/authentication#http\">–¥–æ–∫–µ</a>, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –Ω–∞ –∫–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å</p>\n<h3>–ö–∞–∫ –ø—Ä–æ–∫–∏–Ω—É—Ç—å —Ç–æ–∫–µ–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ –∫–æ–Ω—Å–æ–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Å—å—é–º–µ—Ä–∞</h3>\n<p>–ù–∞ –ø—Ä–∏–º–µ—Ä–µ Accep Language, –Ω–æ —Å Authorization –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Ç–∞–∫ –∂–µ</p>\n<p>–ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º —É –Ω–∞—Å –µ—Å—Ç—å —Å–ª–µ–¥—É—é—â–∏–π –∑–∞–ø—Ä–æ—Å:</p>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre class=\"language-graphql\"><code class=\"language-graphql\"><span class=\"token keyword\">query</span> <span class=\"token definition-query function\">GetCity</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$id</span><span class=\"token punctuation\">:</span> <span class=\"token scalar\">ID</span><span class=\"token operator\">!</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property-query\">city</span><span class=\"token punctuation\">(</span><span class=\"token attr-name\">id</span><span class=\"token punctuation\">:</span> <span class=\"token variable\">$id</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">name</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>–ò –ø—Ä–∏–º–µ—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∫–æ—Ç–æ—Ä–æ–µ —É—Ç–∏–ª–∏–∑–∏—Ä—É–µ—Ç —Ñ–∏—á—É —è–∑—ã–∫–∞ AsyncLocal</p>\n<div class=\"gatsby-highlight\" data-language=\"csharp\"><pre class=\"language-csharp\"><code class=\"language-csharp\"><span class=\"token keyword\">using</span> <span class=\"token namespace\">demo</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">using</span> <span class=\"token namespace\">StrawberryShake</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token class-name\"><span class=\"token keyword\">var</span></span> builder <span class=\"token operator\">=</span> WebApplication<span class=\"token punctuation\">.</span><span class=\"token function\">CreateBuilder</span><span class=\"token punctuation\">(</span>args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nbuilder<span class=\"token punctuation\">.</span>Services\n     <span class=\"token punctuation\">.</span><span class=\"token function\">AddDraculaClient</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n     <span class=\"token punctuation\">.</span><span class=\"token function\">ConfigureHttpClient</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>serviceProvider<span class=\"token punctuation\">,</span> client<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n     <span class=\"token punctuation\">{</span>\n         client<span class=\"token punctuation\">.</span>BaseAddress <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">Uri</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"https://dracula.rabota.ua\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n         <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>LangOperation<span class=\"token punctuation\">.</span>Value <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span>\n         <span class=\"token punctuation\">{</span>\n             client<span class=\"token punctuation\">.</span>DefaultRequestHeaders<span class=\"token punctuation\">.</span><span class=\"token function\">Add</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Accept-Language\"</span><span class=\"token punctuation\">,</span> LangOperation<span class=\"token punctuation\">.</span>Value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n         <span class=\"token punctuation\">}</span>\n     <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token class-name\"><span class=\"token keyword\">var</span></span> app <span class=\"token operator\">=</span> builder<span class=\"token punctuation\">.</span><span class=\"token function\">Build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token class-name\"><span class=\"token keyword\">var</span></span> client <span class=\"token operator\">=</span> app<span class=\"token punctuation\">.</span>Services<span class=\"token punctuation\">.</span><span class=\"token generic-method\"><span class=\"token function\">GetRequiredService</span><span class=\"token generic class-name\"><span class=\"token punctuation\">&lt;</span>IDraculaClient<span class=\"token punctuation\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token class-name\"><span class=\"token keyword\">var</span></span> defaultBehavior <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> client<span class=\"token punctuation\">.</span>GetCity<span class=\"token punctuation\">.</span><span class=\"token function\">ExecuteAsync</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nConsole<span class=\"token punctuation\">.</span><span class=\"token function\">WriteLine</span><span class=\"token punctuation\">(</span>defaultBehavior<span class=\"token punctuation\">.</span>Data<span class=\"token punctuation\">.</span>City<span class=\"token punctuation\">.</span>Name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// –ö–∏–µ–≤</span>\n\n<span class=\"token class-name\"><span class=\"token keyword\">var</span></span> acceptedLanguage <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> LangOperation<span class=\"token punctuation\">.</span><span class=\"token function\">Run</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"en\"</span><span class=\"token punctuation\">,</span> token <span class=\"token operator\">=></span> client<span class=\"token punctuation\">.</span>GetCity<span class=\"token punctuation\">.</span><span class=\"token function\">ExecuteAsync</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"1\"</span><span class=\"token punctuation\">,</span> token<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nConsole<span class=\"token punctuation\">.</span><span class=\"token function\">WriteLine</span><span class=\"token punctuation\">(</span>acceptedLanguage<span class=\"token punctuation\">.</span>Data<span class=\"token punctuation\">.</span>City<span class=\"token punctuation\">.</span>Name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Kiev</span>\n\n<span class=\"token class-name\"><span class=\"token keyword\">var</span></span> t1 <span class=\"token operator\">=</span> Task<span class=\"token punctuation\">.</span><span class=\"token function\">Run</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token class-name\"><span class=\"token keyword\">var</span></span> client <span class=\"token operator\">=</span> app<span class=\"token punctuation\">.</span>Services<span class=\"token punctuation\">.</span><span class=\"token generic-method\"><span class=\"token function\">GetRequiredService</span><span class=\"token generic class-name\"><span class=\"token punctuation\">&lt;</span>IDraculaClient<span class=\"token punctuation\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token class-name\"><span class=\"token keyword\">var</span></span> result <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> LangOperation<span class=\"token punctuation\">.</span><span class=\"token function\">Run</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"en\"</span><span class=\"token punctuation\">,</span> token <span class=\"token operator\">=></span> client<span class=\"token punctuation\">.</span>GetCity<span class=\"token punctuation\">.</span><span class=\"token function\">ExecuteAsync</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"1\"</span><span class=\"token punctuation\">,</span> token<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    Console<span class=\"token punctuation\">.</span><span class=\"token function\">WriteLine</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"t1(en): \"</span> <span class=\"token operator\">+</span> result<span class=\"token punctuation\">.</span>Data<span class=\"token punctuation\">.</span>City<span class=\"token punctuation\">.</span>Name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// t2(uk): Kiev</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token class-name\"><span class=\"token keyword\">var</span></span> t2 <span class=\"token operator\">=</span> Task<span class=\"token punctuation\">.</span><span class=\"token function\">Run</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token class-name\"><span class=\"token keyword\">var</span></span> client <span class=\"token operator\">=</span> app<span class=\"token punctuation\">.</span>Services<span class=\"token punctuation\">.</span><span class=\"token generic-method\"><span class=\"token function\">GetRequiredService</span><span class=\"token generic class-name\"><span class=\"token punctuation\">&lt;</span>IDraculaClient<span class=\"token punctuation\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token class-name\"><span class=\"token keyword\">var</span></span> result <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> LangOperation<span class=\"token punctuation\">.</span><span class=\"token function\">Run</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"uk\"</span><span class=\"token punctuation\">,</span> token <span class=\"token operator\">=></span> client<span class=\"token punctuation\">.</span>GetCity<span class=\"token punctuation\">.</span><span class=\"token function\">ExecuteAsync</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"1\"</span><span class=\"token punctuation\">,</span> token<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    Console<span class=\"token punctuation\">.</span><span class=\"token function\">WriteLine</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"t2(uk): \"</span> <span class=\"token operator\">+</span> result<span class=\"token punctuation\">.</span>Data<span class=\"token punctuation\">.</span>City<span class=\"token punctuation\">.</span>Name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// t2(uk): –ö–∏—ó–≤</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nTask<span class=\"token punctuation\">.</span><span class=\"token function\">WaitAll</span><span class=\"token punctuation\">(</span>t1<span class=\"token punctuation\">,</span> t2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">LangOperation</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">readonly</span> <span class=\"token class-name\">AsyncLocal<span class=\"token punctuation\">&lt;</span><span class=\"token keyword\">string</span><span class=\"token punctuation\">></span></span> Store <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token return-type class-name\"><span class=\"token keyword\">string</span><span class=\"token punctuation\">?</span></span> Value <span class=\"token operator\">=></span> Store<span class=\"token punctuation\">.</span>Value<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">async</span> <span class=\"token return-type class-name\">Task<span class=\"token punctuation\">&lt;</span>IOperationResult<span class=\"token punctuation\">&lt;</span>TResultData<span class=\"token punctuation\">></span><span class=\"token punctuation\">></span></span> <span class=\"token generic-method\"><span class=\"token function\">Run</span><span class=\"token generic class-name\"><span class=\"token punctuation\">&lt;</span>TResultData<span class=\"token punctuation\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token class-name\"><span class=\"token keyword\">string</span></span> language<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Func<span class=\"token punctuation\">&lt;</span>CancellationToken<span class=\"token punctuation\">,</span> Task<span class=\"token punctuation\">&lt;</span>IOperationResult<span class=\"token punctuation\">&lt;</span>TResultData<span class=\"token punctuation\">></span><span class=\"token punctuation\">></span><span class=\"token punctuation\">></span></span> implementation<span class=\"token punctuation\">)</span> <span class=\"token keyword\">where</span> <span class=\"token class-name\">TResultData</span> <span class=\"token punctuation\">:</span> <span class=\"token type-list\"><span class=\"token keyword\">class</span></span>\n    <span class=\"token punctuation\">{</span>\n        Store<span class=\"token punctuation\">.</span>Value <span class=\"token operator\">=</span> language<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">await</span> <span class=\"token function\">implementation</span><span class=\"token punctuation\">(</span>CancellationToken<span class=\"token punctuation\">.</span>None<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>–ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ–≤–µ–¥–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –∑–∞—Ç–µ–º —ç—Ç—É —à—Ç—É–∫—É —Å –ø–µ—Ä–µ–¥–∞—á–µ–π –∑–∞–≥–æ–ª–æ–≤–∫–∞ –∏ –∑–∞—Ç–µ–º –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–æ—Ç–æ–∫–∞—Ö.</p>\n<p>–í—Å–µ —ç—Ç–æ –¥–µ–ª–æ –±—ã–ª–æ –Ω–∞–π–¥–µ–Ω–Ω–æ –≤–æ—Ç <a href=\"https://github.com/ChilliCream/hotchocolate/issues/3467#issuecomment-942017053\">—Ç—É—Ç</a></p>\n<hr>\n<p>–° –ê–Ω–µ–π —Å—Ç–æ–ª–∫–Ω—É–ª–∏—Å—å —Å–æ —Å–ª–µ–¥—É—é—â–µ–π –ø—Ä–æ–±–ª–µ–º–æ–π, –∫–æ–Ω—Ä–µ—Ç–Ω–æ –≤ Windows –∏ –≤ VisualStudio, –∫–∞–∫ —Ç–æ –Ω—É –æ—á–µ–Ω—å —Å—Ç—Ä–∞–Ω–Ω–æ —Å–µ–±—è –≤—Å–µ —ç—Ç–æ –¥–µ–ª–æ –≤–µ–¥–µ—Ç, –µ—Å–ª–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º—ã–π –∫–æ–¥ –Ω–µ –≤–∏–¥–µ–Ω –∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–º–æ–≥–∞–µ—Ç - –µ—Å—Ç—å —Å–º—ã—Å–ª –≤–∫–ª—é—á–∏—Ç—å emit –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º—ã—Ö —Ñ–∞–π–ª–æ–≤, —á—Ç–æ –±—ã –æ–Ω–∏ –ø—Ä—è–º –≤ –ø–∞–ø–∫–µ –ø–æ—è–≤–∏–ª–∏—Å—å</p>"}},"pageContext":{"id":"481471bb-12f6-5968-89ab-80278682bf00"}},"staticQueryHashes":[],"slicesMap":{}}