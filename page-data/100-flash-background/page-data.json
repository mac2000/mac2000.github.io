{"componentChunkName":"component---src-templates-note-js","path":"/100-flash-background","result":{"data":{"remark":{"fields":{"path":"100-flash-background"},"meta":{"title":""},"headings":[{"value":"100% Flash background"}],"html":"<h1>100% Flash background</h1>\n<h2>Зачем это нужно?</h2>\n<p>Для того чтобы на страничке был фон который растягивался бы на всю ширину страницы как обои на рабочем столе.</p>\n<h2>Код</h2>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">stage.scaleMode = StageScaleMode.NO_SCALE;\nstage.align = StageAlign.TOP_LEFT;\nvar wo:int = 0;\nvar ho:int = 0;\nvar ratio:Number;\nvar l:Loader = new Loader();\nvar p:String;\n\nvar paramObj:Object = getFlashVars();\n\nif(paramObj.bg != undefined) p = paramObj.bg\nelse {\n    p = \"bg.jpg\";\n    trace('Background parameter is undefined. Setting default background \"bg.jpg\"');\n}\n\nvar r:URLRequest = new URLRequest(p);\nl.load(r);\nl.contentLoaderInfo.addEventListener( Event.INIT , loaded)\nvar m:MovieClip = new MovieClip();\nthis.addChild(m);\nfunction loaded(event:Event):void {\n    m.addChild(l.content);\n    wo = m.width;\n    ho = m.height;\n    ratio = getRatio(m);\n    stageResizeHandler();\n}\n\nstage.addEventListener(Event.RESIZE, stageResizeHandler);\n\nfunction stageResizeHandler(event:Event = null):void{\n\n    m.width = stage.stageWidth;\n    m.height = m.width / ratio;\n\n    if(m.height &lt; stage.stageHeight) {\n        m.height = stage.stageHeight;\n        m.width = m.height * ratio;\n    }\n\n    //centre\n    m.x = (stage.stageWidth - m.width) * .5;\n    m.y = (stage.stageHeight - m.height) * .5;\n}\n\nfunction getRatio(target:MovieClip):Number{\n    var ratio:Number;\n    target.width > target.height ? ratio = (target.width / target.height) : ratio = (target.height / target.width);\n    return ratio;\n}\n\nfunction getFlashVars() {\n    try {\n        var paramObj:Object = LoaderInfo( this.root.loaderInfo ).parameters;\n        return( paramObj );\n    } catch ( e:Error ) {\n        trace( \"Error getting FlashVars\" );\n    }\n}</code></pre></div>\n<p>Файлы: <a href=\"/a8afb2614925f7d4ad545a1083cf039e/bg.zip\">bg</a></p>"}},"pageContext":{"id":"642813da-6d73-50af-afdc-c0890039cf5c"}},"staticQueryHashes":[]}