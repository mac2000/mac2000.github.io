{"componentChunkName":"component---src-templates-note-js","path":"/drupal-programmatically-change-location-of-comment-submission-form","result":{"data":{"remark":{"fields":{"path":"drupal-programmatically-change-location-of-comment-submission-form"},"meta":{"title":""},"headings":[{"value":"Drupal 6 programatically change location of comment submissiom form"}],"html":"<h1>Drupal 6 programatically change location of comment submissiom form</h1>\n<p>Here is example how to change location of comment submissiom form depending on node sticky flag (can be anything you want)</p>\n<p>Add to your <code class=\"language-text\">template.php</code> file next function:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token comment\">// THEME_preprocess_node</span>\n<span class=\"token keyword\">function</span> <span class=\"token function-definition function\">test_preprocess_node</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span><span class=\"token variable\">$vars</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$hook</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">variable_set</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'comment_form_location_'</span> <span class=\"token operator\">.</span> <span class=\"token variable\">$vars</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'node'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">-></span><span class=\"token property\">type</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$vars</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'node'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">-></span><span class=\"token property\">sticky</span> <span class=\"token operator\">?</span> <span class=\"token constant\">COMMENT_FORM_SEPARATE_PAGE</span> <span class=\"token punctuation\">:</span> <span class=\"token constant\">COMMENT_FORM_BELOW</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Here is more complex example:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token comment\">// THEME_preprocess_node</span>\n<span class=\"token keyword\">function</span> <span class=\"token function-definition function\">test_preprocess_node</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span><span class=\"token variable\">$vars</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$hook</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// Show\\hide comment form depending on node sticky flag</span>\n    <span class=\"token function\">variable_set</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'comment_form_location_'</span> <span class=\"token operator\">.</span> <span class=\"token variable\">$vars</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'node'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">-></span><span class=\"token property\">type</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$vars</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'node'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">-></span><span class=\"token property\">sticky</span> <span class=\"token operator\">?</span> <span class=\"token constant\">COMMENT_FORM_SEPARATE_PAGE</span> <span class=\"token punctuation\">:</span> <span class=\"token constant\">COMMENT_FORM_BELOW</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// Render comments to $comments variable wich will be available in your node template file</span>\n    <span class=\"token variable\">$vars</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'comments'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">comment_render</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$vars</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'node'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// Do not render comments in page template</span>\n    <span class=\"token variable\">$vars</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'node'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">-></span><span class=\"token property\">comment</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Starting point was found here: <a href=\"http://adaptivethemes.com/print-comments-anywhere-and-the-form-as-well\">http://adaptivethemes.com/print-comments-anywhere-and-the-form-as-well</a></p>"}},"pageContext":{"id":"848e00e9-3f0b-5e1b-9e64-f5ad88be61c3"}},"staticQueryHashes":[]}