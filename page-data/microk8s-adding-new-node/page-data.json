{"componentChunkName":"component---src-templates-note-js","path":"/microk8s-adding-new-node/","result":{"data":{"remark":{"fields":{"path":"microk8s-adding-new-node"},"meta":{"title":""},"headings":[{"value":"MicroK8S adding new node"}],"html":"<h1>MicroK8S adding new node</h1>\n<p>i was installing sysmtem by following guide</p>\n<p>On mks1 and mks2 run</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">echo</span> <span class=\"token number\">192.168</span>.5.114 mks3 <span class=\"token operator\">|</span> <span class=\"token function\">sudo</span> <span class=\"token function\">tee</span> <span class=\"token parameter variable\">-a</span> /etc/hosts</code></pre></div>\n<p>Then, on master node</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">microk8s add-node</code></pre></div>\n<p>As result it prints:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">microk8s <span class=\"token function\">join</span> <span class=\"token number\">192.168</span>.5.107:25000/AgkdIMSZBoUOcbkdFxPfYfEXUIkgoatk</code></pre></div>\n<p>which i run on new node</p>\n<p>After that <code class=\"language-text\">kubectl get nodes</code> shown all three nodes (i waited half of minute, it did not appear immediatelly)</p>\n<p>Thats all, third node is added, now, we need to make rolling reboot</p>\n<p>On a second node did:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> update\n<span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> upgrade\n<span class=\"token function\">sudo</span> <span class=\"token function\">reboot</span></code></pre></div>\n<p>After reboot, waited until <code class=\"language-text\">kubectl get nodes</code> shown all nodes and five more minutes just in case for all workloads to spinup</p>\n<p>While waiting you may want to run</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">kubectl get pods <span class=\"token parameter variable\">-o</span> wide --all-namespaces</code></pre></div>\n<p>or even</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">kubectl get pods <span class=\"token parameter variable\">-o</span> wide --all-namespaces <span class=\"token parameter variable\">-w</span></code></pre></div>\n<p>To watch how pods are moving</p>"}},"pageContext":{"id":"c61fae12-8023-54dc-a9c1-049c15fe9e37"}},"staticQueryHashes":[],"slicesMap":{}}