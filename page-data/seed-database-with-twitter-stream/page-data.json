{"componentChunkName":"component---src-templates-note-js","path":"/seed-database-with-twitter-stream","result":{"data":{"remark":{"fields":{"path":"seed-database-with-twitter-stream"},"meta":{"title":""},"headings":[{"value":"Seed database with Twitter stream"}],"html":"<h1>Seed database with Twitter stream</h1>\n<p>While playing with things like replication, sharding etc there is often need for data producer which will continously write some data to database.</p>\n<p>Twitter has streeam api which will give you 1+ tweets per second with huge amount of data which can be used for many tests.</p>\n<p>Here is short examples:</p>\n<div class=\"gatsby-highlight\" data-language=\"csharp\"><pre class=\"language-csharp\"><code class=\"language-csharp\"><span class=\"token comment\">//Program.cs - C# example</span>\n<span class=\"token comment\">//Tweetinvi package required</span>\n<span class=\"token keyword\">static</span> <span class=\"token return-type class-name\"><span class=\"token keyword\">void</span></span> <span class=\"token function\">Main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\"><span class=\"token keyword\">string</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></span> args<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\n\n    TwitterCredentials<span class=\"token punctuation\">.</span><span class=\"token function\">SetCredentials</span><span class=\"token punctuation\">(</span>\n        <span class=\"token string\">\"Access Token\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"Access Token Secret\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"Consumer Key (API Key)\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"Consumer Secret (API Secret)\"</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token class-name\"><span class=\"token keyword\">var</span></span> stream <span class=\"token operator\">=</span> Stream<span class=\"token punctuation\">.</span><span class=\"token function\">CreateSampleStream</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    stream<span class=\"token punctuation\">.</span>TweetReceived <span class=\"token operator\">+=</span> <span class=\"token punctuation\">(</span>sender<span class=\"token punctuation\">,</span> arg<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n    <span class=\"token punctuation\">{</span>\n        Console<span class=\"token punctuation\">.</span><span class=\"token function\">WriteLine</span><span class=\"token punctuation\">(</span>arg<span class=\"token punctuation\">.</span>Tweet<span class=\"token punctuation\">.</span>Text<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//TODO: write tweet to database</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n    stream<span class=\"token punctuation\">.</span><span class=\"token function\">StartStream</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>and one more:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n<span class=\"token keyword\">require_once</span> <span class=\"token string single-quoted-string\">'vendor/autoload.php'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// themattharris/tmhoauth package required</span>\n\n<span class=\"token variable\">$twitter</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">tmhOAuth</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n    <span class=\"token string single-quoted-string\">'consumer_key'</span>    <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">''</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string single-quoted-string\">'consumer_secret'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">''</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string single-quoted-string\">'token'</span>           <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">''</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string single-quoted-string\">'secret'</span>          <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">''</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function-definition function\">streaming_callback</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$data</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token variable\">$data</span> <span class=\"token operator\">=</span> <span class=\"token function\">json_decode</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$data</span><span class=\"token punctuation\">,</span> <span class=\"token constant boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">print_r</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$data</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token variable\">$twitter</span><span class=\"token operator\">-></span><span class=\"token function\">streaming_request</span><span class=\"token punctuation\">(</span>\n    <span class=\"token string single-quoted-string\">'GET'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string single-quoted-string\">'https://stream.twitter.com/1.1/statuses/sample.json'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string single-quoted-string\">'streaming_callback'</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span></code></pre></div>"}},"pageContext":{"id":"eedeb7d8-2e7e-5e0e-b529-2b29a8e9b239"}},"staticQueryHashes":[]}