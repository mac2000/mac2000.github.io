{"componentChunkName":"component---src-templates-note-js","path":"/ubuntu-configure-dns-for-development-enviroment","result":{"data":{"remark":{"fields":{"path":"ubuntu-configure-dns-for-development-enviroment"},"meta":{"title":""},"headings":[{"value":"Ubuntu configure DNS for development enviroment"}],"html":"<h1>Ubuntu configure DNS for development enviroment</h1>\n<p>Really hate to add domains to /etc/hosts, then to apache virtual hosts etc only for get enviroment for work.</p>\n<p>My idea is to configure DNS to resolve any subdomains so i will never ever need to edit hosts file.</p>\n<p>Firs of all dns must be installed, i used</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> tasksel</code></pre></div>\n<p>then choose DNS server and press OK.</p>\n<p>It may be installed via:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> bind9</code></pre></div>\n<p>So now we have own local DNS server, and need to add domain</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">nano</span> /etc/bind/named.conf.local</code></pre></div>\n<p>And add to it something like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">zone \"x51rl.example.org.ua\" {\n        type master;\n        file \"/etc/bind/db.x51rl.example.org.ua\";\n};</code></pre></div>\n<p>Now we need file to describe this zone</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">cp</span> /etc/bind/db.local /etc/bind/db.x51rl.example.org.ua</code></pre></div>\n<p>Now edit this file, replace localhost to x51rl.example.org.ua, and add wildcard zone</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">mac@x51rl:/$ cat /etc/bind/db.x51rl.example.org.ua\n;\n; BIND data file for local loopback interface\n;\n$TTL    604800\n@   IN  SOA x51rl.example.org.ua. root.x51rl.example.org.ua. (\n                    2     ; Serial\n                604800     ; Refresh\n                86400     ; Retry\n            2419200     ; Expire\n                604800 )   ; Negative Cache TTL\n;\n@   IN  NS  x51rl.example.org.ua.\n@   IN  A   127.0.0.1\n@   IN  AAAA    ::1\n*.x51rl.example.org.ua. IN A 127.0.0.1</code></pre></div>\n<p>Now when all done, u may check that all is working with:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">named-checkzone x51rl.example.org.ua /etc/bind/db.x51rl.example.org.ua</code></pre></div>\n<p>And if all ok, restart bind:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> /etc/init.d/bind9 restart</code></pre></div>\n<p>Now this command must work:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">nslookup</span> aaa.bbb.x51rl.mam.org.ua <span class=\"token number\">127.0</span>.0.1</code></pre></div>\n<p>If u using dhcp in your network, it will owervrite your resolv.conf, so edit:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">nano</span> /etc/dhcp3/dhclient.conf</code></pre></div>\n<p>and uncomment line</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">prepend domain-name-servers 127.0.0.1;</code></pre></div>\n<p>now after restarting networking u will be able to ping any subdomain.</p>\n<p>All that left is to configure Apache Mass Virtual Hosting</p>\n<p><a href=\"http://serverfault.com/questions/112535/apache2-virtualhost-auto-subdomain\">http://serverfault.com/questions/112535/apache2-virtualhost-auto-subdomain</a></p>\n<p><a href=\"http://httpd.apache.org/docs/2.2/vhosts/mass.html\">http://httpd.apache.org/docs/2.2/vhosts/mass.html</a></p>"}},"pageContext":{"id":"c75addf4-bdaf-5057-83db-b52645ac00a0"}},"staticQueryHashes":[]}