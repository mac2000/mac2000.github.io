{"componentChunkName":"component---src-templates-note-js","path":"/tortoisesvn-and-jira/","result":{"data":{"remark":{"fields":{"path":"tortoisesvn-and-jira"},"meta":{"title":""},"headings":[{"value":"TortoiseSvn and Jira"}],"html":"<h1>TortoiseSvn and Jira</h1>\n<p><a href=\"http://plugins.atlassian.com/plugin/details/10017\">http://plugins.atlassian.com/plugin/details/10017</a></p>\n<p>Инсталлируем: <a href=\"https://github.com/csharptest/JiraSVN/downloads\">https://github.com/csharptest/JiraSVN/downloads</a></p>\n<p>Идем в свойства TortoiseSVN</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 534px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/5be76413509097df0d3c8f600c7ad544/a07a7/13.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 79.296875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAA7DAAAOwwHHb6hkAAADEUlEQVR42mWT2W7jRhBF9f+fkB8ZIEgeEgQZ2/AmmSLZ3Jr73mSTFGWPZPsMSGuMGHkoVPGhTt9bVdz89rvHX/uSP54avl35XJsxV2bOvddgJCNmNmNl8yVPWLnEdRy22x1SLrVL07YcphFXZmyuvY5bt+HWbXkMOuy0ZxvE3DkVZjIgsok7t2IX9ty7FV7gEfgBtmWjB83hcED3mmkc8cKUTVZ2yKjEDSuSsqcZnolrRVxo8naiVDMyU6T1QJgr8sRGBj6WaVHXNVpr+r5nHAeSrGAz9jVD8bTKr8uC19dX3t/eeH9/W/Pb8r3U7++cTif6tkAGAY5wSOJkhS3QYRioqorN8fmIakw816Uoy7VxgZ5fX9f8Wb+9cnz5QRSHxNLHtgW+738ovACX/s00z3hxhhAeoQzJi5LpMK+Q0/nM6XTmx+m8gufjD6zIQQhrXUbXdRfLerUcZxWbbTTz7Vry543L3w8RV/sSuzhhl+fPEOUZKz+Rtkf8tEA4AmELxnFE9/0KnMYBmVZsZD0ThHcEUYbjhVjCx3ZDHC/CdiXClZi2T1YqVDcg0lscz8QRLkqpVeGXGR6OR84van0hSxIcsbxuYZsmrhCURY5qGgbdrxbLKiGOJEEgUapbQV+AWZ3jJwF9pwml5PH+cR24aeyxbZu6aVZrS0NdNzh1RpIl5HmB6rr/b1npkZutQdM0JEnM9mHL027H3jDwPf9z8L/u7bYMEIHP/snA3JuoVn0FDoeZKCvoVE+apiukrqq1XuK/Da1SJGFO4ElMwyAMI/TwsZhPoJ5m7KwlKWOKIl9/q7KqGKfpY4sXZcM40kYh9j/fCbZ79v/eUHuSvla0/USnD+RlvSg8MhxOyFoQyA8ry0LapkHr/mNGF6COIox7gb218PcObZSiREDbH1B6Ji8bNmFS4bkBD8LD9lMMy2Nn+pTthBpfaIdnGn1cI28GTMPFeXgkNAyGywUs57PMOs9zNno4YDoWVeJT5DmOJwlkTBgmyCghijOyoqbTI3Xbs3v6TpYH1KqjqpsV9CsWNz8BRPWe1Faw3NUAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"screenshot\"\n        title=\"\"\n        src=\"/static/5be76413509097df0d3c8f600c7ad544/a07a7/13.png\"\n        srcset=\"/static/5be76413509097df0d3c8f600c7ad544/6f3f2/13.png 256w,\n/static/5be76413509097df0d3c8f600c7ad544/01e7c/13.png 512w,\n/static/5be76413509097df0d3c8f600c7ad544/a07a7/13.png 534w\"\n        sizes=\"(max-width: 534px) 100vw, 534px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Далее добавляем Issue Tracker Integration</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f69efe8a2b6364200a49a28e933d1d60/8c557/2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 66.40625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACf0lEQVR42mWT627jNhBG9f5v1Rb9U2CTXTuxLUuy7jQlUiRFXWwndk4hJbvYogQOhhwSA34fh0FVCfI8oxQC0bQYP9CNF6TqSPOCrBIUtaAQZzLRcDYDqh8ZxolxnJimmWmasNbRtopgGHqOWcPxeKKua7z3vN2uVHnBt+ct20PMy+HIZnfkJUyQ2qCMQ5se4zzKerQbGKcZpTuCeRqIy5Hv+4SXMCKOIrIsJykKDmlGIQRmGGj7nqLzNK5H9Y7WOZRzVNqSK0NrLaeqJuj9QFmfiU8nsrwgjhPSNMMYyzzPjNOntE95P5n/wzxf0FpTVBWBMZq6zknSgvB4XIuVZbnK112HdY6+71fcV/ydJbecUa1a3yForOQ1/U6SFHx7euLp6Zkoitjv9+x2O7Iso6pKyrL4RVH8n8F7GqUIjDNkZcwhjMnzz00pJWchkbLhfJaM48j1euVyuazcbrd1vcSFRc1yiaL+8rBRht3hiHM91prVj67rVhbZ7ku29z1KqdUWIc6kaUqaLfOl9XLivCSo6pI0eWYXRpyyHKX1WuQs5Ro7Y9Cd/pVvlaIWgqZtqauKqq5plcZZyy7KCDqjabJ/iF62pNtXVJpx8R7f9xilV6zu6I3Fao3rOvxy6yU3jGvf3uYL13nGOEfgnKX6+y+iP/6k/LGhORywYcjctExNwyjO9GWFCEO6NKNNTrS7PXa7pf2xwSYJ4vWVarPFliXB4svtOnG/3bi/vcH9Do/H2l8/x+Pjg9vbO/fHg/f7nffHB48les9jGBikZJQS3zQEslVY16ONpdV69WOhadX6NxcW/5ZHOBxCTmnKfre01J5ayvVTlLVgs31hf4z5F2BbyRYjZMirAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"screenshot\"\n        title=\"\"\n        src=\"/static/f69efe8a2b6364200a49a28e933d1d60/8c557/2.png\"\n        srcset=\"/static/f69efe8a2b6364200a49a28e933d1d60/6f3f2/2.png 256w,\n/static/f69efe8a2b6364200a49a28e933d1d60/01e7c/2.png 512w,\n/static/f69efe8a2b6364200a49a28e933d1d60/8c557/2.png 700w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Где:</p>\n<ul>\n<li><em>Working Copy Path</em> - путь к снимку репозитория</li>\n<li><em>Provide</em> - то что мы установили</li>\n<li><em>Parameters</em> - логин, пароль, адресс jira'ы</li>\n</ul>\n<p><a href=\"http://justaddwater.dk/2010/06/10/windows-svn-pre-commit-hook/\">http://justaddwater.dk/2010/06/10/windows-svn-pre-commit-hook/</a></p>\n<p>Скрипт который запрещает коммиты без комментария</p>\n<p>Создаем файл <code class=\"language-text\">D:\\SVN\\Rabota.UA\\hooks\\pre-commit.bat</code> с таким содержимым:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">REM Subversion pre-commit hook <span class=\"token keyword\">for</span> Windows machine\nREM put this <span class=\"token keyword\">in</span> your SVN repository folder /hooks/pre-commit.bat\nREM we use it with svn version\nREM http://stackoverflow.com/questions/869248/windows-pre-commit-hook-for-comment-length-subversion\n\n@echo off\n:: Stops commits that have empty log messages.\n@echo off\n\nsetlocal\n\nrem Subversion sends through the path to the repository and transaction <span class=\"token function\">id</span>\n<span class=\"token builtin class-name\">set</span> <span class=\"token assign-left variable\">REPOS</span><span class=\"token operator\">=</span>%1\n<span class=\"token builtin class-name\">set</span> <span class=\"token assign-left variable\">TXN</span><span class=\"token operator\">=</span>%2\n\nrem line below ensures at least one character <span class=\"token string\">\".\"</span>, <span class=\"token number\">5</span> characters require change to <span class=\"token string\">\".....\"</span>\nsvnlook log %REPOS% <span class=\"token parameter variable\">-t</span> %TXN% <span class=\"token operator\">|</span> findstr <span class=\"token builtin class-name\">.</span> <span class=\"token operator\">></span> nul\n<span class=\"token keyword\">if</span> %errorlevel% gtr <span class=\"token number\">0</span> <span class=\"token punctuation\">(</span>goto err<span class=\"token punctuation\">)</span> <span class=\"token keyword\">else</span> <span class=\"token builtin class-name\">exit</span> <span class=\"token number\">0</span>\n\n:err\necho. <span class=\"token operator\"><span class=\"token file-descriptor important\">1</span>></span><span class=\"token file-descriptor important\">&amp;2</span>\n<span class=\"token builtin class-name\">echo</span> ADD JIRA TASK NUMBER BEFORE COMMIT <span class=\"token operator\"><span class=\"token file-descriptor important\">1</span>></span><span class=\"token file-descriptor important\">&amp;2</span>\n<span class=\"token builtin class-name\">exit</span> <span class=\"token number\">1</span></code></pre></div>\n<p>Если нужно сделать client side pre-commit hook тогда батник будет выглядеть вот так:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">@echo off\nsetlocal\n<span class=\"token builtin class-name\">set</span> <span class=\"token assign-left variable\">REPOS</span><span class=\"token operator\">=</span>%1\n<span class=\"token builtin class-name\">set</span> <span class=\"token assign-left variable\">TXN</span><span class=\"token operator\">=</span>%2\n<span class=\"token builtin class-name\">set</span> <span class=\"token assign-left variable\">COMMENT</span><span class=\"token operator\">=</span>%3\nrem check that logmessage contains at least <span class=\"token number\">1</span> characters\n<span class=\"token builtin class-name\">type</span> <span class=\"token string\">\"%COMMENT%\"</span> <span class=\"token operator\">|</span> findstr <span class=\"token string\">\".\"</span> <span class=\"token operator\">></span> nul\n<span class=\"token keyword\">if</span> %errorlevel% gtr <span class=\"token number\">0</span> goto err\n<span class=\"token builtin class-name\">exit</span> <span class=\"token number\">0</span>\n:err\n<span class=\"token builtin class-name\">echo</span> Empty log message not allowed. Commit aborted<span class=\"token operator\">!</span> <span class=\"token operator\"><span class=\"token file-descriptor important\">1</span>></span><span class=\"token file-descriptor important\">&amp;2</span>\n<span class=\"token builtin class-name\">exit</span> <span class=\"token number\">1</span></code></pre></div>\n<p>Суть изменений в следующем: третьим параметром идет путь к файлу в котором лежит наш коммент, теперь мы проверяем не svnlook'ом, а обычным type'ом, наличие в этом файле текста</p>\n<p>Добавляется это дело в настройках TortoiseSVN\\Hook Scripts (рядом с Issue Tracking Integration)</p>\n<p><a href=\"http://code.google.com/p/tortoisesvn/source/browse/trunk/contrib/hook-scripts/client-side/PreCommit.js.tmpl?r=19213\">http://code.google.com/p/tortoisesvn/source/browse/trunk/contrib/hook-scripts/client-side/PreCommit.js.tmpl?r=19213</a></p>"}},"pageContext":{"id":"3a66bbd2-6546-578f-8e90-4f1ff28ea48c"}},"staticQueryHashes":[],"slicesMap":{}}