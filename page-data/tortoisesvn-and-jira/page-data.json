{"componentChunkName":"component---src-templates-note-js","path":"/tortoisesvn-and-jira/","result":{"data":{"remark":{"fields":{"path":"tortoisesvn-and-jira"},"meta":{"title":""},"headings":[{"value":"TortoiseSvn and Jira"}],"html":"<h1>TortoiseSvn and Jira</h1>\n<p><a href=\"http://plugins.atlassian.com/plugin/details/10017\">http://plugins.atlassian.com/plugin/details/10017</a></p>\n<p>Инсталлируем: <a href=\"https://github.com/csharptest/JiraSVN/downloads\">https://github.com/csharptest/JiraSVN/downloads</a></p>\n<p>Идем в свойства TortoiseSVN</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 534px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/5be76413509097df0d3c8f600c7ad544/a07a7/13.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 79.296875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAA7DAAAOwwHHb6hkAAADFElEQVR42mVU2W7cOBCc//+E/EiARfKQxWJjG740h26RkqiTuqhrYs9VaWomxhr70GBLFItdVd1affnLx49dgW+bCl/vAtybMe7MDM9+ha0YYKYzLIrrOsLKODzXhWGswbnOPVR1jWkc4PEUq3u/xaNXUdR4ZS3spIPBYjy5JUzRwyGQJ6/EOuzwTKvPfLCAwbZsqF5hmiaoTmEcBvhhglVatOBRAS8sIYoOVf8LsWwQ5wpZPaJoZvC0QSJ7hFmDTNjgLIBlWpBSQimFruswDD1EmmM1dBJ9vlnKl0WO0+mEy/mMy+W8rGf9rPPLBYfDAV2dEyCD67gQsVjANGjf9yjLEqv9rz2ayoTveciLYjmoQY8Up1ss+fmE/ds7ojhEzAPYtoMgCK4V3gD1+dU4z/DjFI7jI+QhsrzAOM0LyOF4pKqOeKfQwPP+HVbk0rfWYkbbtjfKaqEcp1ShEc34es/x/cHD3y8R7shxOz/ALo4f4VBY2QFJvUeQ5HBcBw5VOJARiih3iyk9eEKAXM5g4RNYlML1Q1gO0fFCyiNaORwK0w6QFg2allxPHmnPJA09NE2zVPhJw2m/x/GtWW5IhaAP9e0WbNOER3mRZ6RxhV51C8WiFIgjDsY4AbYL0CfAVGYIBEPXKtKQ4/X5dRHc3O5otSEJTFPTB6Ss4MqU2kMgy3KquP2/y40a8GBsUdFBIWIYLwY26zV22y0CP/gQ/k+/PRYMDvXhbrOFuTPR1M1nwJ4cjagh26ZDkiQLiKQNnev474GaNBNhBuaTrnRhGEY0LVdjPgDVOMNOa5qSGDnppceqoI1hHK8u3irrKa+jEPY/P8GMHXb/PkAScEdTVXcjWjUhK6SucI9+OoBLB4xfqWhDapJAqe6q0Q1QRRG2zw5sw0Kwc+kCYuAwApzQqJkAK6xCQQPvMbxQY9tBgq3lY20GKGiOm+ENNc12pfZLZFVPVD24L68IiXJ/6wDdPlrrLMuIcj/BdC2UIkBOL1yiwXhM+gj6aQgatRRpLonSAFl3WG9+Is0YJLVMSa5roD+h2fwGRPWe1IRKgCYAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"screenshot\"\n        title=\"\"\n        src=\"/static/5be76413509097df0d3c8f600c7ad544/a07a7/13.png\"\n        srcset=\"/static/5be76413509097df0d3c8f600c7ad544/6f3f2/13.png 256w,\n/static/5be76413509097df0d3c8f600c7ad544/01e7c/13.png 512w,\n/static/5be76413509097df0d3c8f600c7ad544/a07a7/13.png 534w\"\n        sizes=\"(max-width: 534px) 100vw, 534px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Далее добавляем Issue Tracker Integration</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f69efe8a2b6364200a49a28e933d1d60/8c557/2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 66.40625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACeUlEQVR42mVTaY/aMBTM//9XbdUvlcq2BJKQg1xOyGk7B+FY2OmYZVetijQyPJvnOZ4tIUqkaYK8LFHWDeQ4oZ9PqNoecZoh4X5WEOUBSVnjICe0w4xpPmImjseFOEIpjaZpYU3TAD+p4ft7FEWBcRxxvZwh2Ozniw3bC7HxfKwdH5tdhKqTaKVGJwdIPaJVIzo9YWbjtuthLccJYT7jlxvxDwHCIECSpIiyDF6ckFkJOU1ohgFZP6LWAxmSjdZoCdEppK1EoxT2ooA1UGJeHBDu90jIKgwjxGwkpcKyLLz5Xdq7vA8s/2BZTui6DpkQsKTsKJWM4gw73380y/P8Ib/reyiyGMjOQD/Xv2Fq5kxL/0wOVq0qbONfiCJ6tlphtXpBQNmu68JxHMpPIETOS7JPZNn/mOh93TIUqSWSPIS3C5n2+2ZVVTiUFVemeqgod8b5fMbpdHrgcrk8fpvVwKgxJLLi6WFNUx0mqWm4UvLhR0+5Bka2fsoeRwZCFsaWkmMUxzHixHw3o5ciTHNYosgRRy9wmPCe6bZsZpocyNKsveQFffdZb9iwYIO6aVAwBEFWTdtBM2UnSGD1DKVOfiDY2IjtLVrefqIfIxlJHjRQnK+BqSs21Ww6GtamNs2Pub0w5TMnQlKJpbWC+P4NwZevyH+vUXse1G6Hha/mWNeYKW3IBUrWel7WRHs0jgtl22h4XkURyu0WYm1DcTos48vlfMSN5t6uV+B2A+73x3x9fO5vb7hcX3Fj/ZX7r/c33M1KdncO/UR7ZmIkAavi/CiG0VFSQ0nGD4Oa9eYJ458JwfN22DMI1zEj5aJgE/Mocr71tb2B64f4A2BbyRbJ5zavAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"screenshot\"\n        title=\"\"\n        src=\"/static/f69efe8a2b6364200a49a28e933d1d60/8c557/2.png\"\n        srcset=\"/static/f69efe8a2b6364200a49a28e933d1d60/6f3f2/2.png 256w,\n/static/f69efe8a2b6364200a49a28e933d1d60/01e7c/2.png 512w,\n/static/f69efe8a2b6364200a49a28e933d1d60/8c557/2.png 700w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Где:</p>\n<ul>\n<li><em>Working Copy Path</em> - путь к снимку репозитория</li>\n<li><em>Provide</em> - то что мы установили</li>\n<li><em>Parameters</em> - логин, пароль, адресс jira'ы</li>\n</ul>\n<p><a href=\"http://justaddwater.dk/2010/06/10/windows-svn-pre-commit-hook/\">http://justaddwater.dk/2010/06/10/windows-svn-pre-commit-hook/</a></p>\n<p>Скрипт который запрещает коммиты без комментария</p>\n<p>Создаем файл <code class=\"language-text\">D:\\SVN\\Rabota.UA\\hooks\\pre-commit.bat</code> с таким содержимым:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">REM Subversion pre-commit hook <span class=\"token keyword\">for</span> Windows machine\nREM put this <span class=\"token keyword\">in</span> your SVN repository folder /hooks/pre-commit.bat\nREM we use it with svn version\nREM http://stackoverflow.com/questions/869248/windows-pre-commit-hook-for-comment-length-subversion\n\n@echo off\n:: Stops commits that have empty log messages.\n@echo off\n\nsetlocal\n\nrem Subversion sends through the path to the repository and transaction <span class=\"token function\">id</span>\n<span class=\"token builtin class-name\">set</span> <span class=\"token assign-left variable\">REPOS</span><span class=\"token operator\">=</span>%1\n<span class=\"token builtin class-name\">set</span> <span class=\"token assign-left variable\">TXN</span><span class=\"token operator\">=</span>%2\n\nrem line below ensures at least one character <span class=\"token string\">\".\"</span>, <span class=\"token number\">5</span> characters require change to <span class=\"token string\">\".....\"</span>\nsvnlook log %REPOS% <span class=\"token parameter variable\">-t</span> %TXN% <span class=\"token operator\">|</span> findstr <span class=\"token builtin class-name\">.</span> <span class=\"token operator\">></span> nul\n<span class=\"token keyword\">if</span> %errorlevel% gtr <span class=\"token number\">0</span> <span class=\"token punctuation\">(</span>goto err<span class=\"token punctuation\">)</span> <span class=\"token keyword\">else</span> <span class=\"token builtin class-name\">exit</span> <span class=\"token number\">0</span>\n\n:err\necho. <span class=\"token operator\"><span class=\"token file-descriptor important\">1</span>></span><span class=\"token file-descriptor important\">&amp;2</span>\n<span class=\"token builtin class-name\">echo</span> ADD JIRA TASK NUMBER BEFORE COMMIT <span class=\"token operator\"><span class=\"token file-descriptor important\">1</span>></span><span class=\"token file-descriptor important\">&amp;2</span>\n<span class=\"token builtin class-name\">exit</span> <span class=\"token number\">1</span></code></pre></div>\n<p>Если нужно сделать client side pre-commit hook тогда батник будет выглядеть вот так:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">@echo off\nsetlocal\n<span class=\"token builtin class-name\">set</span> <span class=\"token assign-left variable\">REPOS</span><span class=\"token operator\">=</span>%1\n<span class=\"token builtin class-name\">set</span> <span class=\"token assign-left variable\">TXN</span><span class=\"token operator\">=</span>%2\n<span class=\"token builtin class-name\">set</span> <span class=\"token assign-left variable\">COMMENT</span><span class=\"token operator\">=</span>%3\nrem check that logmessage contains at least <span class=\"token number\">1</span> characters\n<span class=\"token builtin class-name\">type</span> <span class=\"token string\">\"%COMMENT%\"</span> <span class=\"token operator\">|</span> findstr <span class=\"token string\">\".\"</span> <span class=\"token operator\">></span> nul\n<span class=\"token keyword\">if</span> %errorlevel% gtr <span class=\"token number\">0</span> goto err\n<span class=\"token builtin class-name\">exit</span> <span class=\"token number\">0</span>\n:err\n<span class=\"token builtin class-name\">echo</span> Empty log message not allowed. Commit aborted<span class=\"token operator\">!</span> <span class=\"token operator\"><span class=\"token file-descriptor important\">1</span>></span><span class=\"token file-descriptor important\">&amp;2</span>\n<span class=\"token builtin class-name\">exit</span> <span class=\"token number\">1</span></code></pre></div>\n<p>Суть изменений в следующем: третьим параметром идет путь к файлу в котором лежит наш коммент, теперь мы проверяем не svnlook'ом, а обычным type'ом, наличие в этом файле текста</p>\n<p>Добавляется это дело в настройках TortoiseSVN\\Hook Scripts (рядом с Issue Tracking Integration)</p>\n<p><a href=\"http://code.google.com/p/tortoisesvn/source/browse/trunk/contrib/hook-scripts/client-side/PreCommit.js.tmpl?r=19213\">http://code.google.com/p/tortoisesvn/source/browse/trunk/contrib/hook-scripts/client-side/PreCommit.js.tmpl?r=19213</a></p>"}},"pageContext":{"id":"3a66bbd2-6546-578f-8e90-4f1ff28ea48c"}},"staticQueryHashes":[],"slicesMap":{}}