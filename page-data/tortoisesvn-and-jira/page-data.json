{"componentChunkName":"component---src-templates-note-js","path":"/tortoisesvn-and-jira/","result":{"data":{"remark":{"fields":{"path":"tortoisesvn-and-jira"},"meta":{"title":""},"headings":[{"value":"TortoiseSvn and Jira"}],"html":"<h1>TortoiseSvn and Jira</h1>\n<p><a href=\"http://plugins.atlassian.com/plugin/details/10017\">http://plugins.atlassian.com/plugin/details/10017</a></p>\n<p>Инсталлируем: <a href=\"https://github.com/csharptest/JiraSVN/downloads\">https://github.com/csharptest/JiraSVN/downloads</a></p>\n<p>Идем в свойства TortoiseSVN</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 534px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/5be76413509097df0d3c8f600c7ad544/a07a7/13.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 79.296875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAA7DAAAOwwHHb6hkAAADGElEQVR42m2T2W7kNhBF+/8/IR+SAAnykCCTxJPxtHuTSC3UvlN7dzvuxScQ7TEwQB4KVRSBo3uriqsffvb4bV/wy67hxwfFgxXzt5Xz6DXsk4lDdsTKTlgmz9hZgCslm82WIAhwHZem0RznCSdIWX32W764NV/chifVIdKerYp4dCqsZERms6m3QcfarfCUh+8rpC0YhoH5ONP3PfM04oUpq6zqCKICJ6xIip5mfCauW6KiJ29myvZIkLUk1UiYt2SxTeD72JZNXdcGugCncSRJc1ZjVzMWOwIVUhUFt9uN1/vdxP1+476cX9/Ol8uFTuco30dKSRLHdF3PMCwxUlUlq/PzmVbbeK5LWZTw+mqg1+uV23uY+nbj/PxCFIfEgY8QEt/zPxSO40hRlKzm4wk3yhDCNSrzvGT5dr3deblcuVyuJl+vN47nF+zIRUgbR7q0Xfed5SirWG2iIz89KH59cPh9HfLXoUAUF0R5+ciyvGDlL6TNCT8pjF1hC6ZpMjADnEaCpGSlqiMqfERFGY4XYkkf4QZIL8R2FMJRWMInKzW6HZDpF6R7eFPYtt9ZLsuS1fF05vKszR/SJMaRAmnbCMvCkZKyyNFNYxrfdR1FGROFCuWr/wdmVYZKFF3bEyjF+uvaNPyw3xtbdd0Ya8sUlzVxqowkTciz3AC/Wf4AtsPE582epqnNGmzWG7abrQF6nm9ULSqMkq7jn0Ihlc9ht8c6WGjdvt+/A8f5RJgWRmGapGYV6qoydZqmaK0/gLrVxGGO8gIOux1hGDKMI4NROFAtwGE+ITJNXMQUeWZ6U1YV0zy/W33r0TBN6DBE/PEJ9bRn/+mByg3oKk3Tz7TDTFbUi8Iz0+mKqiUq8Dhsd9gHi2YZhOlPZ/IwjQxRyP5RIJ4s/L1Ehymt8Gm6GT2cyMqGVZiUuK7iq3ARfsrO8thaHqWeaKd/0eOZZjhR9yeyesDaucj1E8Fuz5jntE1N22q6riXPM1b9OGNJmyr2KfIcxwtQQUQQJibCOCUrKrphotY9292f5LlP3XaUdWNeyzK4bxP/D1KdnY/y9D0lAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"screenshot\"\n        title=\"\"\n        src=\"/static/5be76413509097df0d3c8f600c7ad544/a07a7/13.png\"\n        srcset=\"/static/5be76413509097df0d3c8f600c7ad544/6f3f2/13.png 256w,\n/static/5be76413509097df0d3c8f600c7ad544/01e7c/13.png 512w,\n/static/5be76413509097df0d3c8f600c7ad544/a07a7/13.png 534w\"\n        sizes=\"(max-width: 534px) 100vw, 534px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Далее добавляем Issue Tracker Integration</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f69efe8a2b6364200a49a28e933d1d60/8c557/2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 66.40625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACd0lEQVR42l2T6Y7bOBCE/f5vtRvsjwCJkfEtSzJF3SIlStRpOTP+AsmbQRAChWo2yUJXN7iJ4gQpBWGSkuYFlW2p+pFMVwgZIuKUME6RSYZIcjLToWxP2w10/cAwDPR9T13XKKXZtK3lKgocxyeOE1prmec7sZR82+7Znz325yu7k8P+4pNrg64atGmomhZdt5RNt4orXbKZxh4/Hvhx8jk4Lp7rEgQBfig53wRBklC1LUXTICtLXjfopkE1L47KGqkMytTc4phNYzuiOMPzfaSUeK7HTQSrhWkc/7c00A8D4/Cy+CeW3DSNlFojF0FjSpIkwBcSx7kihCAMI5Ikoawq6rrBWkvT/IG/9ssdrTRRkrApTM5R/MDzJN++f2e73XK9XjmfzhyPR0QQEEURYRh+YnHyNy+zyLVmU9UVQeRxcTykDNfq8rwgS7MXZxld1zFNE+M4rnyfZ6bpzjzPKxY3rusSLhXadkCVLafLdS3dGIPWmrIsP7H0s2le1pVSa1vSNEXcxBovgjKQeDJiE8URwttyvLjcZIheRKqKNM9Xrky1iv7OK62I05RCKeI4XrGcNbXh6AZsqqqkEF9xD3tu+wNKCCbbYhuL0RqjS+rlQWU+47asqHWJ7Xta2zKPI/dxxNiWTVPXxP994frPv4RvO4rLBXNxGIuCPi/okpR6mfrFQQtB4fkUxxNmtyd/e8N4PsnhQLTbYcJw6aFlvg+8zzMfjwd8vK9YBvB7PYH748HH88nP93d+Pp9r7mEtH21Ll2X0eU5bFGyyXGEaS2lqCl1SKP1CoT6x/NEkTTmfL/i+4HQ8cTiciLMcuf71hLfdnqPj8gv+fMffLcyxnwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"screenshot\"\n        title=\"\"\n        src=\"/static/f69efe8a2b6364200a49a28e933d1d60/8c557/2.png\"\n        srcset=\"/static/f69efe8a2b6364200a49a28e933d1d60/6f3f2/2.png 256w,\n/static/f69efe8a2b6364200a49a28e933d1d60/01e7c/2.png 512w,\n/static/f69efe8a2b6364200a49a28e933d1d60/8c557/2.png 700w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Где:</p>\n<ul>\n<li><em>Working Copy Path</em> - путь к снимку репозитория</li>\n<li><em>Provide</em> - то что мы установили</li>\n<li><em>Parameters</em> - логин, пароль, адресс jira'ы</li>\n</ul>\n<p><a href=\"http://justaddwater.dk/2010/06/10/windows-svn-pre-commit-hook/\">http://justaddwater.dk/2010/06/10/windows-svn-pre-commit-hook/</a></p>\n<p>Скрипт который запрещает коммиты без комментария</p>\n<p>Создаем файл <code class=\"language-text\">D:\\SVN\\Rabota.UA\\hooks\\pre-commit.bat</code> с таким содержимым:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">REM Subversion pre-commit hook <span class=\"token keyword\">for</span> Windows machine\nREM put this <span class=\"token keyword\">in</span> your SVN repository folder /hooks/pre-commit.bat\nREM we use it with svn version\nREM http://stackoverflow.com/questions/869248/windows-pre-commit-hook-for-comment-length-subversion\n\n@echo off\n:: Stops commits that have empty log messages.\n@echo off\n\nsetlocal\n\nrem Subversion sends through the path to the repository and transaction <span class=\"token function\">id</span>\n<span class=\"token builtin class-name\">set</span> <span class=\"token assign-left variable\">REPOS</span><span class=\"token operator\">=</span>%1\n<span class=\"token builtin class-name\">set</span> <span class=\"token assign-left variable\">TXN</span><span class=\"token operator\">=</span>%2\n\nrem line below ensures at least one character <span class=\"token string\">\".\"</span>, <span class=\"token number\">5</span> characters require change to <span class=\"token string\">\".....\"</span>\nsvnlook log %REPOS% <span class=\"token parameter variable\">-t</span> %TXN% <span class=\"token operator\">|</span> findstr <span class=\"token builtin class-name\">.</span> <span class=\"token operator\">></span> nul\n<span class=\"token keyword\">if</span> %errorlevel% gtr <span class=\"token number\">0</span> <span class=\"token punctuation\">(</span>goto err<span class=\"token punctuation\">)</span> <span class=\"token keyword\">else</span> <span class=\"token builtin class-name\">exit</span> <span class=\"token number\">0</span>\n\n:err\necho. <span class=\"token operator\"><span class=\"token file-descriptor important\">1</span>></span><span class=\"token file-descriptor important\">&amp;2</span>\n<span class=\"token builtin class-name\">echo</span> ADD JIRA TASK NUMBER BEFORE COMMIT <span class=\"token operator\"><span class=\"token file-descriptor important\">1</span>></span><span class=\"token file-descriptor important\">&amp;2</span>\n<span class=\"token builtin class-name\">exit</span> <span class=\"token number\">1</span></code></pre></div>\n<p>Если нужно сделать client side pre-commit hook тогда батник будет выглядеть вот так:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">@echo off\nsetlocal\n<span class=\"token builtin class-name\">set</span> <span class=\"token assign-left variable\">REPOS</span><span class=\"token operator\">=</span>%1\n<span class=\"token builtin class-name\">set</span> <span class=\"token assign-left variable\">TXN</span><span class=\"token operator\">=</span>%2\n<span class=\"token builtin class-name\">set</span> <span class=\"token assign-left variable\">COMMENT</span><span class=\"token operator\">=</span>%3\nrem check that logmessage contains at least <span class=\"token number\">1</span> characters\n<span class=\"token builtin class-name\">type</span> <span class=\"token string\">\"%COMMENT%\"</span> <span class=\"token operator\">|</span> findstr <span class=\"token string\">\".\"</span> <span class=\"token operator\">></span> nul\n<span class=\"token keyword\">if</span> %errorlevel% gtr <span class=\"token number\">0</span> goto err\n<span class=\"token builtin class-name\">exit</span> <span class=\"token number\">0</span>\n:err\n<span class=\"token builtin class-name\">echo</span> Empty log message not allowed. Commit aborted<span class=\"token operator\">!</span> <span class=\"token operator\"><span class=\"token file-descriptor important\">1</span>></span><span class=\"token file-descriptor important\">&amp;2</span>\n<span class=\"token builtin class-name\">exit</span> <span class=\"token number\">1</span></code></pre></div>\n<p>Суть изменений в следующем: третьим параметром идет путь к файлу в котором лежит наш коммент, теперь мы проверяем не svnlook'ом, а обычным type'ом, наличие в этом файле текста</p>\n<p>Добавляется это дело в настройках TortoiseSVN\\Hook Scripts (рядом с Issue Tracking Integration)</p>\n<p><a href=\"http://code.google.com/p/tortoisesvn/source/browse/trunk/contrib/hook-scripts/client-side/PreCommit.js.tmpl?r=19213\">http://code.google.com/p/tortoisesvn/source/browse/trunk/contrib/hook-scripts/client-side/PreCommit.js.tmpl?r=19213</a></p>"}},"pageContext":{"id":"3a66bbd2-6546-578f-8e90-4f1ff28ea48c"}},"staticQueryHashes":[],"slicesMap":{}}