{"componentChunkName":"component---src-templates-note-js","path":"/tortoisesvn-and-jira","result":{"data":{"remark":{"fields":{"path":"tortoisesvn-and-jira"},"meta":{"title":""},"headings":[{"value":"TortoiseSvn and Jira"}],"html":"<h1>TortoiseSvn and Jira</h1>\n<p><a href=\"http://plugins.atlassian.com/plugin/details/10017\">http://plugins.atlassian.com/plugin/details/10017</a></p>\n<p>Инсталлируем: <a href=\"https://github.com/csharptest/JiraSVN/downloads\">https://github.com/csharptest/JiraSVN/downloads</a></p>\n<p>Идем в свойства TortoiseSVN</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 534px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/5be76413509097df0d3c8f600c7ad544/a07a7/13.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 79.296875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAA7DAAAOwwHHb6hkAAADDElEQVQ4y2WT627bOBBG/f6PsA+ywF5+7AXott3GSSzLEiWKkixR1P1qJ05s5xSWG2+L/TEYEiQPvpn5uPjpV8kfVsZvVsnPHwM+2TEfN5qlLLHTESfb/xd6wtFbfN9nba1JtgmhCqnrmt004ocpi4eoYykr7mWNFfX4ZsAKY+68AnvbI/TEvyLnUTUsvRwZCJRSOBuHruuYdtM1jyMySljovCbeavwoJzENzfiMrjt0OVA0O6puT5p3mHoiLTqyRBAGcgYWRUHf9zNwHAeSNGMx9jVjvpqlF8ZwOp14O595eztzPp84X/Zv1/3r6ytdbQiVQghBHMe0bTcDh2Egz3MWz4dnmkYgfQ+TmRl2Oh05HY/X/G19AT8dXlCxIlYS1xUEQXBTeAFmxrDopz1umLFxfGQQsU0M/bjn5Xjm+eV4i8PrienpBXcb4AoHT3gzqO+7W8lxmrO4j3b88jng908efy4j/rENm+zlh3CyF2x9IKn2yEQjPIG7cWdVF9g7MLoA42pPkizZpgalYlzh43oSz1e4QuJ5AY7wMUVF0/b4+gue3CBcb7bL9yXPPZx2e46HjnEYSLZbhOvO4Ww2eEKQG0PbNHNpTdNgck0chfMQ27b9PzAtNK7yaJuWKAxZ3i1xHBd7vcZ1XIqynC9fHlZlhVtuSXRCmmiqqpqhPwDbYeLOcijLkjRJeHxYYa1WM1DKYFb1rqLrWr6YCDeQ2JaFvbap6+v5DXiZaKQNzcXMqUYFau6NyTKyLLsBZ4V1jQ63RFKxWa2Io4h+HL9TaFgM0x7PtMQmIss00pczaByneXLv6i4PmyjE/usD8sFm/eEzhR/SZCVVN9H0O1JTsuiGHeP0iioEgZKsVxabtU1ZlPTfyrwCB7pki/MgEA9r1NqliVJaL6BuR5phj74Ao6TAE5J7R+IGGttVWI4ibyaa8UA9PFP1T5TdHl0NWJaPeFyh1jZ9bqirirquZidorS893LERDlUiyTM9e09KhZThnAMVzZ++6wequmNt/Y0xPk03kJflzdjXX9PzFZEjnabsEwXiAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"screenshot\"\n        title=\"screenshot\"\n        src=\"/static/5be76413509097df0d3c8f600c7ad544/a07a7/13.png\"\n        srcset=\"/static/5be76413509097df0d3c8f600c7ad544/6f3f2/13.png 256w,\n/static/5be76413509097df0d3c8f600c7ad544/01e7c/13.png 512w,\n/static/5be76413509097df0d3c8f600c7ad544/a07a7/13.png 534w\"\n        sizes=\"(max-width: 534px) 100vw, 534px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Далее добавляем Issue Tracker Integration</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f69efe8a2b6364200a49a28e933d1d60/8c557/2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 66.40625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACaUlEQVQ4y32T227bOBRF9f8/1ZfBAEWRNE5sWZYl62bdRYqkLlbd1GtABk0H8zACFjYPBB2eszfk5UVJmiZkZUleVvRK000rtRgpqpqi6ajbnqofyNuBapzpzMK0rCzryrquLMvCOI7UdYOntSLKGsLwQl3VTMbw836nKgq+Pe3Y+SG7fcDL25FXP6TuBL1Q9FIhRsMwGoSamJeVfhB4t3UiqVa+Hy68BSFxdCbLMqIsw78kJNcrgzG0SpEOmnpU9ErRqQ8thpG0k7RCkjetndBwLVvOcUya5ZzPEfHlghCSeZ4x08Q0zQ5bW6b5z9li1+77nrrr8KQcqMqcOMlcsyRJKYorVV2jlMIYwzRNGPMv/lvbDdqWqm3xOtnipzviOOfp+Znnp2fCU4jv++z3e5IkIc9zZ8P/odSI1BpvGAWX4kxwirgkqZvQplVV9adaW36nafW2bazrzem2bVRVRRRFHxNqMyPkjB+EjKNCSun8GIbhE6W0W8sihCDPC5qmcZNbPht2PV5RliTxjkMQkuQ5/TA46qZxOgjhLuj63tXWq8w2qWu3apqm7p29OC1KPHto869ExwPx24EuzbiZCa01chCMUjq0Uk7VODIpjR4V07q6xLfbjR/bxiAlnk3y+vdfnL58Ifv+QuP7iGPA2rRM1r+iQGYZ5TGgi2Kac0Tztke87GheXxmiyH1z3R+QaYantGKbNfdl5ed643G/w/3OMi/8fh7Aum28Px7c39+5//oFjwc/hOBdKfT1iilLp17XD2hjGLV2SKU+kPIT+59aH+ModoHYAE6nkNZ63Xa0XccxCDhfLvwDnevJLv/2VikAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"screenshot\"\n        title=\"screenshot\"\n        src=\"/static/f69efe8a2b6364200a49a28e933d1d60/8c557/2.png\"\n        srcset=\"/static/f69efe8a2b6364200a49a28e933d1d60/6f3f2/2.png 256w,\n/static/f69efe8a2b6364200a49a28e933d1d60/01e7c/2.png 512w,\n/static/f69efe8a2b6364200a49a28e933d1d60/8c557/2.png 700w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Где:</p>\n<ul>\n<li><em>Working Copy Path</em> - путь к снимку репозитория</li>\n<li><em>Provide</em> - то что мы установили</li>\n<li><em>Parameters</em> - логин, пароль, адресс jira'ы</li>\n</ul>\n<p><a href=\"http://justaddwater.dk/2010/06/10/windows-svn-pre-commit-hook/\">http://justaddwater.dk/2010/06/10/windows-svn-pre-commit-hook/</a></p>\n<p>Скрипт который запрещает коммиты без комментария</p>\n<p>Создаем файл <code class=\"language-text\">D:\\SVN\\Rabota.UA\\hooks\\pre-commit.bat</code> с таким содержимым:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">REM Subversion pre-commit hook <span class=\"token keyword\">for</span> Windows machine\nREM put this <span class=\"token keyword\">in</span> your SVN repository folder /hooks/pre-commit.bat\nREM we use it with svn version\nREM http://stackoverflow.com/questions/869248/windows-pre-commit-hook-for-comment-length-subversion\n\n@echo off\n:: Stops commits that have empty log messages.\n@echo off\n\nsetlocal\n\nrem Subversion sends through the path to the repository and transaction <span class=\"token function\">id</span>\n<span class=\"token builtin class-name\">set</span> <span class=\"token assign-left variable\">REPOS</span><span class=\"token operator\">=</span>%1\n<span class=\"token builtin class-name\">set</span> <span class=\"token assign-left variable\">TXN</span><span class=\"token operator\">=</span>%2\n\nrem line below ensures at least one character <span class=\"token string\">\".\"</span>, <span class=\"token number\">5</span> characters require change to <span class=\"token string\">\".....\"</span>\nsvnlook log %REPOS% <span class=\"token parameter variable\">-t</span> %TXN% <span class=\"token operator\">|</span> findstr <span class=\"token builtin class-name\">.</span> <span class=\"token operator\">></span> nul\n<span class=\"token keyword\">if</span> %errorlevel% gtr <span class=\"token number\">0</span> <span class=\"token punctuation\">(</span>goto err<span class=\"token punctuation\">)</span> <span class=\"token keyword\">else</span> <span class=\"token builtin class-name\">exit</span> <span class=\"token number\">0</span>\n\n:err\necho. <span class=\"token operator\"><span class=\"token file-descriptor important\">1</span>></span><span class=\"token file-descriptor important\">&amp;2</span>\n<span class=\"token builtin class-name\">echo</span> ADD JIRA TASK NUMBER BEFORE COMMIT <span class=\"token operator\"><span class=\"token file-descriptor important\">1</span>></span><span class=\"token file-descriptor important\">&amp;2</span>\n<span class=\"token builtin class-name\">exit</span> <span class=\"token number\">1</span></code></pre></div>\n<p>Если нужно сделать client side pre-commit hook тогда батник будет выглядеть вот так:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">@echo off\nsetlocal\n<span class=\"token builtin class-name\">set</span> <span class=\"token assign-left variable\">REPOS</span><span class=\"token operator\">=</span>%1\n<span class=\"token builtin class-name\">set</span> <span class=\"token assign-left variable\">TXN</span><span class=\"token operator\">=</span>%2\n<span class=\"token builtin class-name\">set</span> <span class=\"token assign-left variable\">COMMENT</span><span class=\"token operator\">=</span>%3\nrem check that logmessage contains at least <span class=\"token number\">1</span> characters\n<span class=\"token builtin class-name\">type</span> <span class=\"token string\">\"%COMMENT%\"</span> <span class=\"token operator\">|</span> findstr <span class=\"token string\">\".\"</span> <span class=\"token operator\">></span> nul\n<span class=\"token keyword\">if</span> %errorlevel% gtr <span class=\"token number\">0</span> goto err\n<span class=\"token builtin class-name\">exit</span> <span class=\"token number\">0</span>\n:err\n<span class=\"token builtin class-name\">echo</span> Empty log message not allowed. Commit aborted<span class=\"token operator\">!</span> <span class=\"token operator\"><span class=\"token file-descriptor important\">1</span>></span><span class=\"token file-descriptor important\">&amp;2</span>\n<span class=\"token builtin class-name\">exit</span> <span class=\"token number\">1</span></code></pre></div>\n<p>Суть изменений в следующем: третьим параметром идет путь к файлу в котором лежит наш коммент, теперь мы проверяем не svnlook'ом, а обычным type'ом, наличие в этом файле текста</p>\n<p>Добавляется это дело в настройках TortoiseSVN\\Hook Scripts (рядом с Issue Tracking Integration)</p>\n<p><a href=\"http://code.google.com/p/tortoisesvn/source/browse/trunk/contrib/hook-scripts/client-side/PreCommit.js.tmpl?r=19213\">http://code.google.com/p/tortoisesvn/source/browse/trunk/contrib/hook-scripts/client-side/PreCommit.js.tmpl?r=19213</a></p>"}},"pageContext":{"id":"3a66bbd2-6546-578f-8e90-4f1ff28ea48c"}},"staticQueryHashes":[]}