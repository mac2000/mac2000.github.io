{"componentChunkName":"component---src-templates-note-js","path":"/c-linq-count-distinct","result":{"data":{"remark":{"fields":{"path":"c-linq-count-distinct"},"meta":{"title":""},"headings":[{"value":"C# linq count distinct"}],"html":"<h1>C# linq count distinct</h1>\n<p>Here is simple example:</p>\n<div class=\"gatsby-highlight\" data-language=\"csharp\"><pre class=\"language-csharp\"><code class=\"language-csharp\"><span class=\"token comment\">//var list = new List&lt;string> { \"a\", \"b\", \"a\", \"c\", \"a\", \"b\" };</span>\n<span class=\"token class-name\"><span class=\"token keyword\">var</span></span> list <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\"><span class=\"token keyword\">object</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></span> <span class=\"token punctuation\">{</span> <span class=\"token string\">\"a\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"b\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"a\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"c\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"a\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"b\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token class-name\"><span class=\"token keyword\">var</span></span> q <span class=\"token operator\">=</span> <span class=\"token keyword\">from</span> x <span class=\"token keyword\">in</span> list\n    <span class=\"token keyword\">group</span> x <span class=\"token keyword\">by</span> x <span class=\"token keyword\">into</span> g\n    <span class=\"token keyword\">let</span> count <span class=\"token operator\">=</span> g<span class=\"token punctuation\">.</span><span class=\"token function\">Count</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">orderby</span> count <span class=\"token keyword\">descending</span>\n    <span class=\"token keyword\">select</span> <span class=\"token keyword\">new</span> <span class=\"token punctuation\">{</span> Value <span class=\"token operator\">=</span> g<span class=\"token punctuation\">.</span>Key<span class=\"token punctuation\">,</span> Count <span class=\"token operator\">=</span> count <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token class-name\">StringBuilder</span> sb <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">StringBuilder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">foreach</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\"><span class=\"token keyword\">var</span></span> x <span class=\"token keyword\">in</span> q<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    sb<span class=\"token punctuation\">.</span><span class=\"token function\">AppendLine</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Value: \"</span> <span class=\"token operator\">+</span> x<span class=\"token punctuation\">.</span>Value <span class=\"token operator\">+</span> <span class=\"token string\">\" Count: \"</span> <span class=\"token operator\">+</span> x<span class=\"token punctuation\">.</span>Count<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\nMessageBox<span class=\"token punctuation\">.</span><span class=\"token function\">Show</span><span class=\"token punctuation\">(</span>sb<span class=\"token punctuation\">.</span><span class=\"token function\">ToString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Чуть более сложный пример:</p>\n<div class=\"gatsby-highlight\" data-language=\"csharp\"><pre class=\"language-csharp\"><code class=\"language-csharp\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">slice</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">public</span> <span class=\"token function\">slice</span><span class=\"token punctuation\">(</span><span class=\"token class-name\"><span class=\"token keyword\">string</span></span> Browser<span class=\"token punctuation\">,</span> <span class=\"token class-name\"><span class=\"token keyword\">int</span></span> BrowserVersion<span class=\"token punctuation\">,</span> <span class=\"token class-name\"><span class=\"token keyword\">int</span></span> PageViews<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        browser <span class=\"token operator\">=</span> Browser<span class=\"token punctuation\">;</span>\n        browserVersion <span class=\"token operator\">=</span> BrowserVersion<span class=\"token punctuation\">;</span>\n        pageViews <span class=\"token operator\">=</span> PageViews<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\"><span class=\"token keyword\">string</span></span> browser<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\"><span class=\"token keyword\">int</span></span> browserVersion<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\"><span class=\"token keyword\">int</span></span> pageViews<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token class-name\">List<span class=\"token punctuation\">&lt;</span>slice<span class=\"token punctuation\">></span></span> list <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">List<span class=\"token punctuation\">&lt;</span>slice<span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nlist<span class=\"token punctuation\">.</span><span class=\"token function\">Add</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">slice</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Opera\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">9</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nlist<span class=\"token punctuation\">.</span><span class=\"token function\">Add</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">slice</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Opera\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">9</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nlist<span class=\"token punctuation\">.</span><span class=\"token function\">Add</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">slice</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Opera\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nlist<span class=\"token punctuation\">.</span><span class=\"token function\">Add</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">slice</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Chrome\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nlist<span class=\"token punctuation\">.</span><span class=\"token function\">Add</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">slice</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Chrome\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nlist<span class=\"token punctuation\">.</span><span class=\"token function\">Add</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">slice</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Chrome\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">7</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token class-name\"><span class=\"token keyword\">var</span></span> q <span class=\"token operator\">=</span> <span class=\"token keyword\">from</span> x <span class=\"token keyword\">in</span> list\n    <span class=\"token keyword\">group</span> x <span class=\"token keyword\">by</span> <span class=\"token keyword\">new</span> <span class=\"token punctuation\">{</span> x<span class=\"token punctuation\">.</span>browser<span class=\"token punctuation\">,</span> x<span class=\"token punctuation\">.</span>browserVersion <span class=\"token punctuation\">}</span> <span class=\"token keyword\">into</span> g\n    <span class=\"token keyword\">select</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">slice</span><span class=\"token punctuation\">(</span>g<span class=\"token punctuation\">.</span>Key<span class=\"token punctuation\">.</span>browser<span class=\"token punctuation\">,</span> g<span class=\"token punctuation\">.</span>Key<span class=\"token punctuation\">.</span>browserVersion<span class=\"token punctuation\">,</span> g<span class=\"token punctuation\">.</span><span class=\"token function\">Sum</span><span class=\"token punctuation\">(</span>s <span class=\"token operator\">=></span> s<span class=\"token punctuation\">.</span>pageViews<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token class-name\">StringBuilder</span> sb <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">StringBuilder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">foreach</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\"><span class=\"token keyword\">var</span></span> x <span class=\"token keyword\">in</span> q<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    sb<span class=\"token punctuation\">.</span><span class=\"token function\">AppendLine</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"browser: \"</span> <span class=\"token operator\">+</span> x<span class=\"token punctuation\">.</span>browser <span class=\"token operator\">+</span> <span class=\"token string\">\" browserVersion: \"</span> <span class=\"token operator\">+</span> x<span class=\"token punctuation\">.</span>browserVersion<span class=\"token operator\">+</span><span class=\"token string\">\" pageViews: \"</span><span class=\"token operator\">+</span>x<span class=\"token punctuation\">.</span>pageViews<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\nMessageBox<span class=\"token punctuation\">.</span><span class=\"token function\">Show</span><span class=\"token punctuation\">(</span>sb<span class=\"token punctuation\">.</span><span class=\"token function\">ToString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>На выходе даст текст:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">browser: Opera browserVersion: 9 pageViews: 2\nbrowser: Opera browserVersion: 10 pageViews: 1\nbrowser: Chrome browserVersion: 6 pageViews: 2\nbrowser: Chrome browserVersion: 7 pageViews: 1</code></pre></div>\n<p>В этом примере мы сгруппировали записи и посчитали суммы для pageViews.</p>"}},"pageContext":{"id":"184d1228-3f43-5dc7-bc99-b109d4f22709"}},"staticQueryHashes":[]}