{"componentChunkName":"component---src-templates-note-js","path":"/drupal-wysiwyg-codemirror","result":{"data":{"remark":{"fields":{"path":"drupal-wysiwyg-codemirror"},"meta":{"title":""},"headings":[{"value":"Drupal wysiwyg CodeMirror"}],"html":"<h1>Drupal wysiwyg CodeMirror</h1>\n<p>To add CodeMirror editor to wysiwyg drupal module, u need create following files:</p>\n<p><strong>/sites/all/modules/wysiwyg/editors/codemirror.inc</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n<span class=\"token comment\">/**\n    * @file\n    * Editor integration functions for CodeMirror.\n    */</span>\n\n<span class=\"token comment\">/**\n    * Plugin implementation of hook_editor().\n    */</span>\n<span class=\"token keyword\">function</span> <span class=\"token function-definition function\">wysiwyg_codemirror_editor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token variable\">$editor</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'codemirror'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span>\n    <span class=\"token string single-quoted-string\">'title'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'CodeMirror'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string single-quoted-string\">'vendor url'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'http://codemirror.net'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string single-quoted-string\">'download url'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'http://codemirror.net/codemirror.zip'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string single-quoted-string\">'library path'</span> <span class=\"token operator\">=></span> <span class=\"token function\">wysiwyg_get_path</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'codemirror'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string single-quoted-string\">'libraries'</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span>\n        <span class=\"token string single-quoted-string\">''</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span>\n        <span class=\"token string single-quoted-string\">'title'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'CodeMirror'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string single-quoted-string\">'files'</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'lib/codemirror.js'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string single-quoted-string\">'version callback'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'wysiwyg_codemirror_version'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string single-quoted-string\">'themes callback'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'wysiwyg_codemirror_themes'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string single-quoted-string\">'settings callback'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'wysiwyg_codemirror_settings'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string single-quoted-string\">'load callback'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'wysiwyg_codemirror_load'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string single-quoted-string\">'plugin callback'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'wysiwyg_codemirror_plugins'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string single-quoted-string\">'versions'</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span>\n        <span class=\"token string single-quoted-string\">'2'</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span>\n        <span class=\"token string single-quoted-string\">'js files'</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'codemirror.js'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string single-quoted-string\">'css files'</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'codemirror.css'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token variable\">$editor</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/**\n    * Detect editor version.\n    *\n    * @param $editor\n    *   An array containing editor properties as returned from hook_editor().\n    *\n    * @return\n    *   The installed editor version.\n    */</span>\n<span class=\"token keyword\">function</span> <span class=\"token function-definition function\">wysiwyg_codemirror_version</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$editor</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token variable\">$fp</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$editor</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'library path'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">.</span> <span class=\"token string single-quoted-string\">'/README.md'</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token function\">file_exists</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$fp</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token variable\">$fp</span> <span class=\"token operator\">=</span> <span class=\"token function\">fopen</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$fp</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'r'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$line</span> <span class=\"token operator\">=</span> <span class=\"token function\">fgets</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$fp</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">preg_match</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'@([0-9\\.]+)$@'</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$line</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$version</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">fclose</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$fp</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token variable\">$version</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token function\">fclose</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$fp</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/**\n    * Determine available editor themes or check/reset a given one.\n    *\n    * @param $editor\n    *   A processed hook_editor() array of editor properties.\n    * @param $profile\n    *   A wysiwyg editor profile.\n    *\n    * @return\n    *   An array of theme names. The first returned name should be the default\n    *   theme name.\n    */</span>\n<span class=\"token keyword\">function</span> <span class=\"token function-definition function\">wysiwyg_codemirror_themes</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$editor</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$profile</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token variable\">$themes</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'default'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">//TODO: no need in this, i do not found way to use themes with wysiwyg module</span>\n    <span class=\"token comment\">/*if ($handle = opendir($editor['library path'] . '/theme')) {\n        while (false !== ($file = readdir($handle))) {\n            if ($file != \".\" &amp;&amp; $file != \"..\" &amp;&amp; $file != \"default.css\") {\n                if(pathinfo($file, PATHINFO_EXTENSION) == \"css\") {\n                    $themes[] = pathinfo($file, PATHINFO_FILENAME);\n                }\n            }\n        }\n        closedir($handle);\n    }*/</span>\n    <span class=\"token keyword\">return</span> <span class=\"token variable\">$themes</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/**\n    * Perform additional actions upon loading this editor.\n    *\n    * @param $editor\n    *   A processed hook_editor() array of editor properties.\n    * @param $library\n    *   The internal library name (array key) to use.\n    */</span>\n<span class=\"token keyword\">function</span> <span class=\"token function-definition function\">wysiwyg_codemirror_load</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$editor</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$library</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">drupal_add_css</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$editor</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'library path'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">.</span> <span class=\"token string single-quoted-string\">'/lib/codemirror.css'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">drupal_add_css</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$editor</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'library path'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">.</span> <span class=\"token string single-quoted-string\">'/theme/default.css'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//TODO: load apropriate theme file here, when wysiwyg will support this feature</span>\n\n    <span class=\"token function\">drupal_add_js</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$editor</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'library path'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">.</span> <span class=\"token string single-quoted-string\">'/lib/codemirror.js'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">drupal_add_js</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$editor</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'library path'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">.</span> <span class=\"token string single-quoted-string\">'/mode/xml/xml.js'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">drupal_add_js</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$editor</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'library path'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">.</span> <span class=\"token string single-quoted-string\">'/mode/javascript/javascript.js'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">drupal_add_js</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$editor</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'library path'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">.</span> <span class=\"token string single-quoted-string\">'/mode/css/css.js'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">drupal_add_js</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$editor</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'library path'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">.</span> <span class=\"token string single-quoted-string\">'/mode/clike/clike.js'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">drupal_add_js</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$editor</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'library path'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">.</span> <span class=\"token string single-quoted-string\">'/mode/php/php.js'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/**\n    * Return runtime editor settings for a given wysiwyg profile.\n    *\n    * @param $editor\n    *   A processed hook_editor() array of editor properties.\n    * @param $config\n    *   An array containing wysiwyg editor profile settings.\n    * @param $theme\n    *   The name of a theme/GUI/skin to use.\n    *\n    * @return\n    *   A settings array to be populated in\n    *   Drupal.settings.wysiwyg.configs.{editor}\n    */</span>\n<span class=\"token keyword\">function</span> <span class=\"token function-definition function\">wysiwyg_codemirror_settings</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$editor</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$config</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$theme</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token variable\">$settings</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span>\n        <span class=\"token string single-quoted-string\">'theme'</span> <span class=\"token operator\">=></span> <span class=\"token variable\">$theme</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">isset</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$config</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'buttons'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'default'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'lineNumbers'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token variable\">$settings</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'lineNumbers'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token keyword type-casting\">bool</span><span class=\"token punctuation\">)</span><span class=\"token variable\">$config</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'buttons'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'default'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'lineNumbers'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">isset</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$config</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'buttons'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'default'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'indentWithTabs'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token variable\">$settings</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'indentWithTabs'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token keyword type-casting\">bool</span><span class=\"token punctuation\">)</span><span class=\"token variable\">$config</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'buttons'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'default'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'indentWithTabs'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token variable\">$settings</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/**\n    * Return internal plugins for this editor; semi-implementation of hook_wysiwyg_plugin().\n    */</span>\n<span class=\"token keyword\">function</span> <span class=\"token function-definition function\">wysiwyg_codemirror_plugins</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$editor</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token variable\">$plugins</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span>\n    <span class=\"token string single-quoted-string\">'default'</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span>\n        <span class=\"token string single-quoted-string\">'buttons'</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span>\n        <span class=\"token string single-quoted-string\">'lineNumbers'</span> <span class=\"token operator\">=></span> <span class=\"token function\">t</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'Line numbers'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string single-quoted-string\">'indentWithTabs'</span> <span class=\"token operator\">=></span> <span class=\"token function\">t</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'Indent with tabs'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string single-quoted-string\">'internal'</span> <span class=\"token operator\">=></span> <span class=\"token constant boolean\">TRUE</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token variable\">$plugins</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></span></code></pre></div>\n<p><strong>/sites/all/modules/wysiwyg/editors/js/codemirror.js</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token punctuation\">;</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">$</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  Drupal<span class=\"token punctuation\">.</span>wysiwyg<span class=\"token punctuation\">.</span>codemirror <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span> <span class=\"token comment\">// CodeMirror instances storage</span>\n\n  <span class=\"token comment\">/**\n   * Attach this editor to a target element.\n   *\n   * See Drupal.wysiwyg.editor.attach.none() for a full desciption of this hook.\n   */</span>\n  Drupal<span class=\"token punctuation\">.</span>wysiwyg<span class=\"token punctuation\">.</span>editor<span class=\"token punctuation\">.</span>attach<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">codemirror</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">context<span class=\"token punctuation\">,</span> params<span class=\"token punctuation\">,</span> settings</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> params <span class=\"token operator\">!=</span> <span class=\"token string\">'undefined'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      Drupal<span class=\"token punctuation\">.</span>wysiwyg<span class=\"token punctuation\">.</span>codemirror<span class=\"token punctuation\">[</span>params<span class=\"token punctuation\">.</span>field<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> CodeMirror<span class=\"token punctuation\">.</span><span class=\"token function\">fromTextArea</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span>params<span class=\"token punctuation\">.</span>field<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">lineNumbers</span><span class=\"token operator\">:</span> Drupal<span class=\"token punctuation\">.</span>settings<span class=\"token punctuation\">.</span>wysiwyg<span class=\"token punctuation\">.</span>configs<span class=\"token punctuation\">.</span>codemirror<span class=\"token punctuation\">.</span>format5<span class=\"token punctuation\">.</span>lineNumbers<span class=\"token punctuation\">,</span> <span class=\"token comment\">//true,</span>\n        <span class=\"token literal-property property\">matchBrackets</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">mode</span><span class=\"token operator\">:</span> <span class=\"token string\">'application/x-httpd-php'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">indentUnit</span><span class=\"token operator\">:</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">indentWithTabs</span><span class=\"token operator\">:</span> Drupal<span class=\"token punctuation\">.</span>settings<span class=\"token punctuation\">.</span>wysiwyg<span class=\"token punctuation\">.</span>configs<span class=\"token punctuation\">.</span>codemirror<span class=\"token punctuation\">.</span>format5<span class=\"token punctuation\">.</span>indentWithTabs<span class=\"token punctuation\">,</span> <span class=\"token comment\">//true,</span>\n        <span class=\"token literal-property property\">enterMode</span><span class=\"token operator\">:</span> <span class=\"token string\">'keep'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">tabMode</span><span class=\"token operator\">:</span> <span class=\"token string\">'shift'</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">/**\n   * Detach a single or all editors.\n   *\n   * See Drupal.wysiwyg.editor.detach.none() for a full desciption of this hook.\n   */</span>\n  Drupal<span class=\"token punctuation\">.</span>wysiwyg<span class=\"token punctuation\">.</span>editor<span class=\"token punctuation\">.</span>detach<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">codemirror</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">context<span class=\"token punctuation\">,</span> params</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> params <span class=\"token operator\">!=</span> <span class=\"token string\">'undefined'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      Drupal<span class=\"token punctuation\">.</span>wysiwyg<span class=\"token punctuation\">.</span>codemirror<span class=\"token punctuation\">[</span>params<span class=\"token punctuation\">.</span>field<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">toTextArea</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">delete</span> Drupal<span class=\"token punctuation\">.</span>wysiwyg<span class=\"token punctuation\">.</span>codemirror<span class=\"token punctuation\">[</span>params<span class=\"token punctuation\">.</span>field<span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>jQuery<span class=\"token punctuation\">)</span></code></pre></div>\n<p><strong>/sites/all/modules/wysiwyg/editors/css/codemirror.css</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">.CodeMirror</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">border</span><span class=\"token punctuation\">:</span> 1px solid #999<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2>How to add custom editor for wysiyg</h2>\n<p>To add custom editor, u need create files as above.</p>\n<p>Inc file must implement:</p>\n<p><code class=\"language-text\">wysiwyg_[editor]_editor</code> - this hook retrives info about editor, that will be used by wysiwyg module to determine is editor installed (found at /sites/all/libraries).</p>\n<p>Versions sub array contains file names that must be included for specific versions (see for example tinymce.inc).</p>\n<p><code class=\"language-text\">wysiwyg_[editor]_version</code> - must return version of installed editor, used by previous function to include version specific files.</p>\n<p><code class=\"language-text\">wysiwyg_[editor]_themes</code> - actualy do nothing at moment, will be implemented in future versions of wysiwyg, must retrive array with at least one string (theme name).</p>\n<p><code class=\"language-text\">wysiwyg_[editor]_load</code> - optional call back that can be used to load additional files (look at yui.inc).</p>\n<p><code class=\"language-text\">wysiwyg_[editor]_settings</code> - return array of settings that will be encoded to json <code class=\"language-text\">Drupal.settings.wysiwyg.configs.[editor].format5</code> variable. Here u can access config variables that user entered on wysiwyg profile config page. All configs are the same for all editors, except editor plugins.</p>\n<p><code class=\"language-text\">wysiwyg_[editor]_plugins</code> - return array of checkboxes value label pairs, that will be shown on editor profile config page in plugins section.</p>\n<p>Js file must implement:</p>\n<p><code class=\"language-text\">Drupal.wysiwyg.editor.attach.[editor]</code> - must attach editor to params.field.</p>\n<p><code class=\"language-text\">Drupal.wysiwyg.editor.detach.[editor]</code> - must detach editor from params.field.</p>\n<p>Actualy this is it. Implementing this functions u can add any editor u want.</p>\n<p>Commited patch to <a href=\"http://drupal.org/node/1214136\">http://drupal.org/node/1214136</a> - but it was closed as duplicate to <a href=\"http://drupal.org/node/274431\">http://drupal.org/node/274431</a> that was created in 2008 O_o</p>"}},"pageContext":{"id":"97e845d0-b7ea-54b4-b9f9-5e82e8768172"}},"staticQueryHashes":[]}