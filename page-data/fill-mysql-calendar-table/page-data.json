{"componentChunkName":"component---src-templates-note-js","path":"/fill-mysql-calendar-table","result":{"data":{"remark":{"fields":{"path":"fill-mysql-calendar-table"},"meta":{"title":""},"headings":[{"value":"Fill MySQL calendar table"}],"html":"<h1>Fill MySQL calendar table</h1>\n<p>The only possible way to get analysis data from mysql by date ranges with filled missing dates is to have separate calendar in join with results table.</p>\n<p>Here is simple procedure that will allow fill calendar table with ranges of dates (supposed that it will be called before analysis):</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">DROP</span> <span class=\"token keyword\">PROCEDURE</span> <span class=\"token keyword\">IF</span> <span class=\"token keyword\">EXISTS</span> FillCalendar<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">DROP</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">IF</span> <span class=\"token keyword\">EXISTS</span> calendar<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">IF</span> <span class=\"token operator\">NOT</span> <span class=\"token keyword\">EXISTS</span> calendar<span class=\"token punctuation\">(</span>\n\tcalendar_date <span class=\"token keyword\">DATE</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">PRIMARY</span> <span class=\"token keyword\">KEY</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">DELIMITER</span> $$\n<span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">PROCEDURE</span> FillCalendar<span class=\"token punctuation\">(</span>start_date <span class=\"token keyword\">DATE</span><span class=\"token punctuation\">,</span> end_date <span class=\"token keyword\">DATE</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">BEGIN</span>\n\t<span class=\"token keyword\">DECLARE</span> crt_date <span class=\"token keyword\">DATE</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">SET</span> crt_date <span class=\"token operator\">=</span> start_date<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">WHILE</span> crt_date <span class=\"token operator\">&lt;=</span> end_date <span class=\"token keyword\">DO</span>\n\t\t<span class=\"token keyword\">INSERT</span> <span class=\"token keyword\">IGNORE</span> <span class=\"token keyword\">INTO</span> calendar <span class=\"token keyword\">VALUES</span><span class=\"token punctuation\">(</span>crt_date<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">SET</span> crt_date <span class=\"token operator\">=</span> ADDDATE<span class=\"token punctuation\">(</span>crt_date<span class=\"token punctuation\">,</span> <span class=\"token keyword\">INTERVAL</span> <span class=\"token number\">1</span> <span class=\"token keyword\">DAY</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">END</span> <span class=\"token keyword\">WHILE</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">END</span>$$\n<span class=\"token keyword\">DELIMITER</span> <span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">CALL</span> FillCalendar<span class=\"token punctuation\">(</span><span class=\"token string\">'2013-01-01'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'2013-01-03'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">CALL</span> FillCalendar<span class=\"token punctuation\">(</span><span class=\"token string\">'2013-01-01'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'2013-01-07'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>"}},"pageContext":{"id":"c9abfdba-f7f6-5667-9841-113f42fb8c40"}},"staticQueryHashes":[]}