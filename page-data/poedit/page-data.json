{"componentChunkName":"component---src-templates-note-js","path":"/poedit/","result":{"data":{"remark":{"fields":{"path":"poedit"},"meta":{"title":""},"headings":[{"value":"Poedit"}],"html":"<h1>Poedit</h1>\n<p>Пример кода, для переключения языка <code class=\"language-text\">/home/mac/PhpProject2/index.php</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n\n<span class=\"token variable\">$lang</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'ru'</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$locale</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'ru_RU'</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$domain</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'messages'</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// так должны называться файлы *.po и *.mo</span>\n<span class=\"token variable\">$locale_path</span> <span class=\"token operator\">=</span> <span class=\"token function\">dirname</span><span class=\"token punctuation\">(</span><span class=\"token constant\">__FILE__</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">.</span> <span class=\"token string single-quoted-string\">'/locale'</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// папка с каталогами переводов</span>\n<span class=\"token comment\">// Set enviroment</span>\n<span class=\"token function\">putenv</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'LC_ALL='</span> <span class=\"token operator\">.</span> <span class=\"token variable\">$locale</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">putenv</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'LANG='</span> <span class=\"token operator\">.</span> <span class=\"token variable\">$locale</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">putenv</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'LANGUAGE='</span> <span class=\"token operator\">.</span> <span class=\"token variable\">$locale</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// Set locale</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token function\">setlocale</span><span class=\"token punctuation\">(</span><span class=\"token constant\">LC_ALL</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$locale</span> <span class=\"token operator\">.</span> <span class=\"token string single-quoted-string\">'.utf8'</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$locale</span> <span class=\"token operator\">.</span> <span class=\"token string single-quoted-string\">'.utf-8'</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$locale</span> <span class=\"token operator\">.</span> <span class=\"token string single-quoted-string\">'.UTF8'</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$locale</span> <span class=\"token operator\">.</span> <span class=\"token string single-quoted-string\">'.UTF-8'</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$lang</span> <span class=\"token operator\">.</span> <span class=\"token string single-quoted-string\">'.utf-8'</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$lang</span> <span class=\"token operator\">.</span> <span class=\"token string single-quoted-string\">'.UTF-8'</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$lang</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// Set current locale</span>\n    <span class=\"token function\">setlocale</span><span class=\"token punctuation\">(</span><span class=\"token constant\">LC_ALL</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">// Bind domain</span>\n<span class=\"token function\">bindtextdomain</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$domain</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$locale_path</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">bind_textdomain_codeset</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$domain</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'UTF-8'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// Set default domain</span>\n<span class=\"token function\">textdomain</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$domain</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">echo</span> <span class=\"token function\">_</span><span class=\"token punctuation\">(</span><span class=\"token string double-quoted-string\">\"Hello world\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span></code></pre></div>\n<p>Теперь идем в <strong>poedit</strong> и выбираем в меню <strong>Файл \\ Создать новый каталог...</strong></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 539px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/fcfac501acf5df4a3ce3b42739436c05/10f9a/16.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 83.59375000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAIAAABSJhvpAAAACXBIWXMAAAsTAAALEwEAmpwYAAACVUlEQVR42m2SO28TQRRG96dRJCh2ioiOhocEgoK/Q0VFS0uBKCiokCJEIHFsZ73r3Z3XvuY9szNjICC0a+M4BulopCnOfHfuvdGLkzuPHtx/+uTh82eP750cj44OxqPD8ejweHx3PO7PLaOjgz2i5Go2n8/i+CpJ4vhqPptezufT6eXF5eR8Op1MJueTi2/D9SJZxGmy2CVSUhKM67qmbSMYbZpaMFaXBMOCIFhkGciXCBRFnnVGO2t2iYzWSoplmuRZBiEo8qzEuMiWEIC2aYo8L/IcIxSC987tIgWPtJJKCs7oFto2CAKCEaNtVZVSCKWk6zrnutuy6GWjlTV6jessZxQCgBGkbdPUVQh+tQrBu+Bvwp3rNslrGUGQJEm6WABQQJAjCIdXiuUyTZM0zzJCiOs2cgheyb/JRquh/v4LSkra1BhBRluCMW1ba21nrevsNllwxhm9kXtMjzVacIoQYLTti6dt8D5453dgtP1HHnDWYIz6smnfubqqhg/fgv9X1kpWBON1txklhFhr/O1Y7916LpGWYu1rJddjIwghUBCMOW0qBJxWwZo9NsnWaCV4mqbZcgmKAkIAQFESBCHkFS5mE8ua71qsFN+FNRVjNGK0RQiWhBCMSoIJQoTguiQEYyW408pb02PUBqv9sBH9nGnbQACqkvQaRhj1T1SDLAXvOrvhx7W7/t39/OW8X4WwWgWtZNRviDXbDVtjhnNoAVdSSM742cfy03v++UOD8jRNF3GMEYz25rRH/1ZfIufvXsM3L/nbVySZfTn7enp6GsfxHwteger4sUYiAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"screenshot\"\n        title=\"\"\n        src=\"/static/fcfac501acf5df4a3ce3b42739436c05/10f9a/16.png\"\n        srcset=\"/static/fcfac501acf5df4a3ce3b42739436c05/6f3f2/16.png 256w,\n/static/fcfac501acf5df4a3ce3b42739436c05/01e7c/16.png 512w,\n/static/fcfac501acf5df4a3ce3b42739436c05/10f9a/16.png 539w\"\n        sizes=\"(max-width: 539px) 100vw, 539px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 536px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/3465c5333d4de65572a60e3801591635/2d920/21.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 83.203125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAIAAABSJhvpAAAACXBIWXMAAAsTAAALEwEAmpwYAAABs0lEQVR42sWSyW7UQBCG/XBIQzTjOUTcuABCgDjwIki8AhcuvABvEOAQJWgiMvHWi+3eNy8TbGeCB9lWopwmIhwofV39d6v/qj6U9+7w0fNnT1+/evH2zcsnh0t/Plv6B/58tpjPlovHA/6BP4rFeHkXD0RBGKzjKEziKIrCIFiHwTqJIxDHURiEwUUQrCeBEMAYpim6xeOUJFEAkgiBGCOAQJwh6KyxRnNCEIhREmcYYggu66q53Gyq8hZPcpZnOMWI5BmjBCGcpSlGKEkSjBBGaDhBOCwIsyxvml9t07RtUzjrGSUZJVopZ42zxmhtjTZaaSWNHsSgpZSCc0Y5I0ar6YHRylOCr89/EpILzhjNGSOCMym44IwzOmTOnLNV6ZQUJIOc0amQksKzQ30jlRJCMsoYY1IqKSXnnFI2ia7rdmP0/ZjGra4qryqL3YOirm/M/d64x/xPnf+HuX6oefM3nfsb7nQunBvG7V6u+67ftb93bddtr7rt9bauCq9wdhrMPVhr7MWJ+PHNrL7rHKVpCgEgeTZ8u67K/ZRlab58RJ/eq88f+Pnp8cnp16Oj1ersDwkZncWI+uwyAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"screenshot\"\n        title=\"\"\n        src=\"/static/3465c5333d4de65572a60e3801591635/2d920/21.png\"\n        srcset=\"/static/3465c5333d4de65572a60e3801591635/6f3f2/21.png 256w,\n/static/3465c5333d4de65572a60e3801591635/01e7c/21.png 512w,\n/static/3465c5333d4de65572a60e3801591635/2d920/21.png 536w\"\n        sizes=\"(max-width: 536px) 100vw, 536px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Давим ОК, poedit спросит нас куда сохранить результат своей работы, указываем путь <code class=\"language-text\">./locale/ru/LC_MESSAGES/messages.po</code></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 834px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8a586b6f5cee965aa41db4e641fb0b93/5d72a/3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 78.125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAIAAACZeshMAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB9klEQVR42o3QW2/TMBgGYP9yEEUgcYG0DQnxB7jlljvukNDUrtq6tEmd0xLbTZy0cY5OfQpKi4rYCsx6ZFmWX3+fDS7fvb66uvj08cPlxfvJqxeTycu3bybPBIqi4F3Lu7auqjyjRVFIIZSU/yWFAHmeZRnNs5SmCcEo3ZCMpvm4Q3NKt3m2zbOMpmmyOTkdAKG3XtuW7Tj2auU4NorjOIoQihGKMUaB77suxBi1Td3U1agqk2QTRQ8YI/AAV76zhK7r2KulZa0dx7IsxxlvcyG8XyzmN7O1Y+eH+llGS1aEQWCNJ23gB0GSprzrOO+auhJir41SSmp1mLUeBtP3fLfN2W5XFDvecymF0Zp3LaAoZIy1hyGlHJ49+p6D2IYpzRhjfd9LIQZjnjJKGrH/RY4GJXhbg8CFELo0pU3TCCHOFtG7RMVrhd0TjWFHQhD7Xp5vtdLGGMFyzahm2SMqjcYM8U40cbtNCKC1jGMkhTBm2CfRWAHBx/5M/g63dTk2LIUZhn2KFPYU8Z/wzoeVUseHjZXH9qAi7t/oMTYyxOWbEHRde/xnIQSnWJBAbMKzeuxz7B34PfEq8gAWd3f3iwXBiGBcFruKFWc1VenC9XR6PZvNbqbX8x/fV7dzUJWsKlldlcfFP9SH/Pz2Lrq/ib5+Rt++/ASrkWJ3N2XccAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"screenshot\"\n        title=\"\"\n        src=\"/static/8a586b6f5cee965aa41db4e641fb0b93/5d72a/3.png\"\n        srcset=\"/static/8a586b6f5cee965aa41db4e641fb0b93/6f3f2/3.png 256w,\n/static/8a586b6f5cee965aa41db4e641fb0b93/01e7c/3.png 512w,\n/static/8a586b6f5cee965aa41db4e641fb0b93/5d72a/3.png 834w\"\n        sizes=\"(max-width: 834px) 100vw, 834px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Если все ок, poedit пройдется по файлам исходников в поисках строк для перевода и вывалит сообщение, мол все получилось, нашел несколько строк и т.п.</p>\n<p>Выглядит примерно вот так:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 777px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/5d200f01d07699544cd879d486561418/108f8/4.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 88.28125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAIAAADUsmlHAAAACXBIWXMAAAsTAAALEwEAmpwYAAABQElEQVR42s2SXU/CMBiF96e80BtvJKJAJ1/zH3pjSISYjY4B/gvjx41C262LsLEO1pZWI0QSjMY4vPDJyfsmTU7ek5waVrlgglKzDuo1YFnVc6tmNatWw2w2TKthgsrJu8rFSukYVIomOAXl4plZKhwdHuzvGbB9cdVp2de2Y3fs61a7ddnvwZthfzjwhgPP82DP7brQcaEDoQO7truaPbfb91xj/Hh7/3BHEGJstkiTJI6yxVzwTAo+TxnBKI6jpRRS8C1xLjg3XibTMAwZY+qD5Qql1DxNfd+fTKbLbzCklK95+cGstc5v3unyvzVnWaaU0rkwAkqjKNrU+yt2iy2EWPeZK3ZAoyiWUuaJzTnXSuk/qEp/2l/81q3Yo+cnghEhmBBMaUAIDgIfY4TXjxjTwEcIjccjGlLGkiSZbfQGSjPtAH4JNNMAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"screenshot\"\n        title=\"\"\n        src=\"/static/5d200f01d07699544cd879d486561418/108f8/4.png\"\n        srcset=\"/static/5d200f01d07699544cd879d486561418/6f3f2/4.png 256w,\n/static/5d200f01d07699544cd879d486561418/01e7c/4.png 512w,\n/static/5d200f01d07699544cd879d486561418/108f8/4.png 777w\"\n        sizes=\"(max-width: 777px) 100vw, 777px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>После всего этого index.php уже должен выводить строку \"Привет мир\"</p>\n<p>Как проверить текущий язык:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">setlocale(LC_ALL, '0')</code></pre></div>\n<p>Простенький хелпер для этого дела:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n<span class=\"token comment\">/**\n    * Helper to change current locale in all possible ways on any system\n    *\n    * @author mac\n    */</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name-definition class-name\">LocaleHelper</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token comment\">/**\n        * Get Locale Name by Language Name\n        *\n        * @param string $lang\n        * @return string\n        */</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">function</span> <span class=\"token function-definition function\">getLocaleNameByLangName</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$lang</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$lang</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">case</span> <span class=\"token string single-quoted-string\">'ru'</span><span class=\"token punctuation\">:</span> <span class=\"token keyword\">return</span> <span class=\"token string single-quoted-string\">'ru_RU'</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">default</span><span class=\"token punctuation\">:</span> <span class=\"token keyword\">return</span> <span class=\"token string single-quoted-string\">'en_US'</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">/**\n        * Set Locale to $lang\n        *\n        * @param string $lang\n        */</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">function</span> <span class=\"token function-definition function\">setLocale</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$lang</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token variable\">$locale</span> <span class=\"token operator\">=</span> <span class=\"token class-name static-context\">LocaleHelper</span><span class=\"token operator\">::</span><span class=\"token function\">getLocaleNameByLangName</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$lang</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$locale</span> <span class=\"token operator\">==</span> <span class=\"token string single-quoted-string\">'en_US'</span><span class=\"token punctuation\">)</span> <span class=\"token variable\">$lang</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'en'</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token variable\">$domain</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'messages'</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// так должны называться файлы *.po и *.mo</span>\n        <span class=\"token variable\">$locale_path</span> <span class=\"token operator\">=</span> <span class=\"token function\">dirname</span><span class=\"token punctuation\">(</span><span class=\"token constant\">__FILE__</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">.</span> <span class=\"token string single-quoted-string\">'/locale'</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// папка с каталогами переводов</span>\n        <span class=\"token comment\">// Set enviroment</span>\n        <span class=\"token function\">putenv</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'LC_ALL='</span> <span class=\"token operator\">.</span> <span class=\"token variable\">$locale</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">putenv</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'LANG='</span> <span class=\"token operator\">.</span> <span class=\"token variable\">$locale</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">putenv</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'LANGUAGE='</span> <span class=\"token operator\">.</span> <span class=\"token variable\">$locale</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">// Set locale</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token function\">setlocale</span><span class=\"token punctuation\">(</span><span class=\"token constant\">LC_ALL</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$locale</span> <span class=\"token operator\">.</span> <span class=\"token string single-quoted-string\">'.utf8'</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$locale</span> <span class=\"token operator\">.</span> <span class=\"token string single-quoted-string\">'.utf-8'</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$locale</span> <span class=\"token operator\">.</span> <span class=\"token string single-quoted-string\">'.UTF8'</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$locale</span> <span class=\"token operator\">.</span> <span class=\"token string single-quoted-string\">'.UTF-8'</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$lang</span> <span class=\"token operator\">.</span> <span class=\"token string single-quoted-string\">'.utf-8'</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$lang</span> <span class=\"token operator\">.</span> <span class=\"token string single-quoted-string\">'.UTF-8'</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$lang</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token comment\">// Set current locale</span>\n            <span class=\"token function\">setlocale</span><span class=\"token punctuation\">(</span><span class=\"token constant\">LC_ALL</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token comment\">// Bind domain</span>\n        <span class=\"token function\">bindtextdomain</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$domain</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$locale_path</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">bind_textdomain_codeset</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$domain</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'UTF-8'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">// Set default domain</span>\n        <span class=\"token function\">textdomain</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$domain</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span></span></code></pre></div>\n<p>Его тесты:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n\n<span class=\"token keyword\">require_once</span> <span class=\"token string single-quoted-string\">'PHPUnit/Framework.php'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">require_once</span> <span class=\"token function\">dirname</span><span class=\"token punctuation\">(</span><span class=\"token constant\">__FILE__</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">.</span> <span class=\"token string single-quoted-string\">'/../LocaleHelper.php'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/**\n    * Test class for LocaleHelper.\n    * Generated by PHPUnit on 2011-03-05 at 05:28:04.\n    */</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name-definition class-name\">LocaleHelperTest</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">PHPUnit_Framework_TestCase</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token comment\">/**\n        * @var LocaleHelper\n        */</span>\n    <span class=\"token keyword\">protected</span> <span class=\"token variable\">$object</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">/**\n        * Sets up the fixture, for example, opens a network connection.\n        * This method is called before a test is executed.\n        */</span>\n    <span class=\"token keyword\">protected</span> <span class=\"token keyword\">function</span> <span class=\"token function-definition function\">setUp</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token variable\">$this</span><span class=\"token operator\">-></span><span class=\"token keyword type-declaration\">object</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">LocaleHelper</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">/**\n        * Tears down the fixture, for example, closes a network connection.\n        * This method is called after a test is executed.\n        */</span>\n    <span class=\"token keyword\">protected</span> <span class=\"token keyword\">function</span> <span class=\"token function-definition function\">tearDown</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function-definition function\">testGetLocaleNameByLangNameForDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token variable\">$this</span><span class=\"token operator\">-></span><span class=\"token function\">assertEquals</span><span class=\"token punctuation\">(</span>\n                <span class=\"token string single-quoted-string\">'en_US'</span><span class=\"token punctuation\">,</span>\n                <span class=\"token class-name static-context\">LocaleHelper</span><span class=\"token operator\">::</span><span class=\"token function\">getLocaleNameByLangName</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'not_exists'</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function-definition function\">testGetLocaleNameByLangNameForRussian</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token variable\">$this</span><span class=\"token operator\">-></span><span class=\"token function\">assertEquals</span><span class=\"token punctuation\">(</span>\n                <span class=\"token string single-quoted-string\">'ru_RU'</span><span class=\"token punctuation\">,</span>\n                <span class=\"token class-name static-context\">LocaleHelper</span><span class=\"token operator\">::</span><span class=\"token function\">getLocaleNameByLangName</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'ru'</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function-definition function\">testSetLocaleForRussian</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name static-context\">LocaleHelper</span><span class=\"token operator\">::</span><span class=\"token function\">setLocale</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'ru'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token variable\">$this</span><span class=\"token operator\">-></span><span class=\"token function\">assertEquals</span><span class=\"token punctuation\">(</span>\n                <span class=\"token string single-quoted-string\">'ru_RU.utf8'</span><span class=\"token punctuation\">,</span>\n                <span class=\"token function\">setlocale</span><span class=\"token punctuation\">(</span><span class=\"token constant\">LC_ALL</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'0'</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span></span></code></pre></div>\n<p>И пример:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n<span class=\"token keyword\">require_once</span> <span class=\"token string single-quoted-string\">'LocaleHelper.php'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token class-name static-context\">LocaleHelper</span><span class=\"token operator\">::</span><span class=\"token function\">setLocale</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$_REQUEST</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'lang'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">echo</span> <span class=\"token function\">_</span><span class=\"token punctuation\">(</span><span class=\"token string double-quoted-string\">\"Hello world\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span></code></pre></div>\n<p>Касательно <strong>Wordpress'а</strong></p>\n<p>Для перевода плагинов, настройки poedit выглядят следующим образом:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 407px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/4064b8273aba752f558558c970eeaa07/0ff56/po1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 83.59375000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAA7DAAAOwwHHb6hkAAACk0lEQVR42n2TW2/bOBSE/f//Tl8Wfd7sW5N12jiC49SWSFs3UndZF0r6CtJx6i42ITAYHUoazRkdrvzwyKsQvMiAchxogWqeyY1BjwNqGFB9T2YMFdC8oV6Wd+TjSJAqXuSRlYwivN0O7/WVw/GIiCL28kgQhvhhSBBGDofjCRHFyDhxSIsCXZYOqijIqoq9lKwSpfH9gOPxRBiGpEmKDASZztjtXvG8LU9PHg/f7nm4f2D975r1+pGyKMmzjEwptNYURcHhcGBVVBVdNyCFJI4TojB0rHWG7/tEcUyW57y87NyHLQd+wHa7o2lajDEM48A4jvhCssrLkslMNHVD255pmsY9WFU1SZxQliXDMFDXtduzdW25qpzINE1vmAmsYFaW/N+q65aTPJFlGfO8sMwz87Kw3OC32K1gUVwUFlBKI4RwWSRJShhFTtCYybkcxtG5uvItbJdOUOf5u6vRjHTdmbZt6fueNE1RSmHM7EQ/g43LF+JPwf+uPMtJksS9YF2YyXwIm/ungjaXy9/WTG8Zmmn6EL8dXjO8WXYUpDy5sbFZlmWFEJJz1zN9IGxjehe0bi7j0nDuOmc/TRVaKTewvRubhmE0Hzo8n68Oy4q+H5DyiBTCCdlW4yhxgsq2vCzM0+ctWzOHQLBKtSY8hSSpQqUpcRQThRFaaVSq3NjYNi3mK6bJ8XXfuHrBvwhmLvhUKefOss3NOlP64rBpW4eqaSntKWrPF7YxtS1d39N1HXvfv/zluqqoblC/wV7bo5YXBXVZ8BgVfPUrvvwQ/CVavouY7eaJu7t/eH728LZbVnt7MqTkYFkIbL0PAn4Ggat9e09KAinZ+IK7neBvb8/dTrL56fPsedw/PvLkeaw3G34BK2kPlNNvpP8AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"screenshot\"\n        title=\"\"\n        src=\"/static/4064b8273aba752f558558c970eeaa07/0ff56/po1.png\"\n        srcset=\"/static/4064b8273aba752f558558c970eeaa07/6f3f2/po1.png 256w,\n/static/4064b8273aba752f558558c970eeaa07/0ff56/po1.png 407w\"\n        sizes=\"(max-width: 407px) 100vw, 407px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 406px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/4bb8ee01b423f4e7d3f59ca608977330/e33ef/po2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 83.59375000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAA7DAAAOwwHHb6hkAAACUElEQVR42q2TaWvbQBBA9eP7rV9Lf0KhhVAoTRuaNIcvWXJcO4cd37YcS9a1uiw5l6JXJIdAS1N6ZOAx7Gh4O5J2JaWrUT0ZUzoZcjyLkCdrDnoRn0493rcE71SHN7LFW9Xhw2nE507M135MaZhQGa6QFxnV7X2Uly8ov36F1Jsa9MYa/alOXzPpaRadicnpaIl6PuO4q9HsXdIa6JyMlpxNTM4neZ/N4NJhtHAZzW1G8yW5SxqMNeRaDVmu0zxu0Go2qZZKnJ+d4To2URQxGo6oVcqodZmGUqehqvieIAp9An9DGPgsTQdpaXsI4WHbDvpCJ1lfc3t7V3CfZQV3d+lj7ZG89kD+/ObmFtMRSJYrsC0LyzQLoesK/CAo8DwPz/ce1491Px/Cxfc22XFdgiDAET7S3LAZDPpMphq+H+C67pMIIVguLcqlFupxjQu1Qb/TpSrLdDsdHC9E0jSDde+CSNeJr66IVytWcfwk0Wq12Vh4RY6iFWEYFRPqpos0603IxmMIQ4rIMv4l0vSOuW4jTRcWWRz/tSj7qT9NUy6NQmiT3af8b+QTFsKZ7pClzyic6s834dywcqHzfELd2rzy/X1K/on/hB9+zK+Ek4VdnCFX+Ajv9+Q9pvCxvKDI+c3w/Pz2hMWZ1BYWkilCbq7WJHHCOnlg/cDDOkkSbtYJfZGwb6z52DXYNa7pmh6zYR9FURj0e2gLA2mv2qKitjlS2pSUFqV6i6P6t4Ky0qasbsh7vshttsotto6abFXa7FSb7B7W2N4rs3NQ4fOhzHd/VgJQSaaQ5gAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"screenshot\"\n        title=\"\"\n        src=\"/static/4bb8ee01b423f4e7d3f59ca608977330/e33ef/po2.png\"\n        srcset=\"/static/4bb8ee01b423f4e7d3f59ca608977330/6f3f2/po2.png 256w,\n/static/4bb8ee01b423f4e7d3f59ca608977330/e33ef/po2.png 406w\"\n        sizes=\"(max-width: 406px) 100vw, 406px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 407px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d33125a598127a35b48878c797969971/0ff56/po3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 83.203125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAClElEQVR42q2RW2/bRhBG9dv71ueiv6DNS4A+NAWK5tbUkB1ZUhxZpESRorgklxdJJEVyScqBg0Sn0Mp2/JSiSBY4GMxevvlmtvd6NOfv0ZyXQ5MLe8vZouD5dMOzdylPBxFP+pJfzgJ+7Ut+G2149n7LX0bGq1nOazPjH7flze/POf/xB85+/ome6UpsEbHwYxyZY4UFhsi4Wm4Y2Skje83ASnS8cjMmXs61yJgFBQu5w45LFiLFslYsliE9y/EYDYcMLoeMx2Om19eMh5fMzBnW3MJeWORZThJLwiBgnUTIULLvOrpWsW8b9vtOU5Q1PV+mSBnhui6rlUCIgFBGrFaeRvgBvu8jo4ggCPE8DyF8Vp7AW3nYtoPjLEnTNbtK0ZNxiuu4jEZjDMNkMplw9X6CaRhMpyaWZXE5HOpzx1lpkfnM0kWSJNYFjtze3lKr9uRwnabalZQh2+2GIAgQQhDHCXEcE0URfhBQVhU3Nze6PdUomralbVtU09B1LUWp6C39mJXrMplca4eGYbBY2PpSWZZUVfVAWe5YrzP6/SnjdwPs8ZiFOaN/foHjOBRVQ88REd1dFaUamod4qn7PKe80da3I84KqLGlUQ62ODjs2eUXPDVL2bcvNhw980zocSLe7Y8sJHz/e8unT5//5/qB5LLjO7gR5fPANDu8E42P2XQRPLYvvJMi9YJBwOHx+mMl/ce/myxy/zDM5Crp+or+8qpX+/q9SNxSVYqdaHY97qmlp2k5raEFfrtm3irqqUHVF8wh1R11XdKpivql4ETb8YUr+DFsMuUU4FpeDt1gzkzBK6E0cidzsEHGGSPJTjDO8eKvzIC00YVowlwVvRcH5cs2F2GEGG+ZLnyvTwbAFxlLyL7MZ+IBKXEX/AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"screenshot\"\n        title=\"\"\n        src=\"/static/d33125a598127a35b48878c797969971/0ff56/po3.png\"\n        srcset=\"/static/d33125a598127a35b48878c797969971/6f3f2/po3.png 256w,\n/static/d33125a598127a35b48878c797969971/0ff56/po3.png 407w\"\n        sizes=\"(max-width: 407px) 100vw, 407px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Важно, в путях должна быть точка, нужно убедиться что она сохранена. В ключевых словах надо подставить те что пользуются в Wordpress.</p>\n<p>В самом плагиное все вызовы <code class=\"language-text\">__</code> и <code class=\"language-text\">_e</code> <strong>должны содержать домен</strong>, например так: <code class=\"language-text\">_e('Save', 'my_plugin');</code></p>\n<p>Имя файла должно быть: <code class=\"language-text\">my_plugin-ru_RU.mo</code></p>\n<p>То есть: <code class=\"language-text\">[имя_домена_не_плагина]-[локаль].mo</code></p>\n<p>Файл должен лежать в папке плагина.</p>\n<p>Подключается в плагине вот так:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token keyword\">function</span> <span class=\"token function-definition function\">custom_table_example_languages</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">load_plugin_textdomain</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'custom_table_example'</span><span class=\"token punctuation\">,</span> <span class=\"token constant boolean\">false</span><span class=\"token punctuation\">,</span> <span class=\"token function\">dirname</span><span class=\"token punctuation\">(</span><span class=\"token function\">plugin_basename</span><span class=\"token punctuation\">(</span><span class=\"token constant\">__FILE__</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span> <span class=\"token function\">add_action</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'init'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'custom_table_example_languages'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Ссылки по теме:</p>\n<p><a href=\"http://codex.wordpress.org/I18n_for_WordPress_Developers\">http://codex.wordpress.org/I18n_for_WordPress_Developers</a></p>"}},"pageContext":{"id":"848df50b-526a-5c5a-97cf-34cc81ee1732"}},"staticQueryHashes":[],"slicesMap":{}}