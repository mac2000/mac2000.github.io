{"componentChunkName":"component---src-templates-note-js","path":"/call-drupal-7-api-outside-drupal/","result":{"data":{"remark":{"fields":{"path":"call-drupal-7-api-outside-drupal"},"meta":{"title":""},"headings":[{"value":"call drupal 7 api outside drupal"}],"html":"<h1>call drupal 7 api outside drupal</h1>\n<p>Simle sample showing how to check is user logged</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n<span class=\"token function\">define</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'DRUPAL_ROOT'</span><span class=\"token punctuation\">,</span> <span class=\"token function\">dirname</span><span class=\"token punctuation\">(</span><span class=\"token constant\">__FILE__</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">chdir</span><span class=\"token punctuation\">(</span><span class=\"token constant\">DRUPAL_ROOT</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">require_once</span> <span class=\"token constant\">DRUPAL_ROOT</span> <span class=\"token operator\">.</span> <span class=\"token string single-quoted-string\">'/includes/bootstrap.inc'</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">drupal_bootstrap</span><span class=\"token punctuation\">(</span><span class=\"token constant\">DRUPAL_BOOTSTRAP_FULL</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">global</span> <span class=\"token variable\">$user</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$user</span><span class=\"token operator\">-></span><span class=\"token property\">uid</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">print</span> <span class=\"token string double-quoted-string\">\"Logged in\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">print</span> <span class=\"token string double-quoted-string\">\"Logged out\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">echo</span> <span class=\"token string single-quoted-string\">'&lt;hr />'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token variable\">$nid</span> <span class=\"token operator\">=</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$node</span> <span class=\"token operator\">=</span> <span class=\"token function\">node_load</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$nid</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">echo</span> <span class=\"token string single-quoted-string\">'&lt;pre>&lt;code>'</span><span class=\"token operator\">.</span><span class=\"token function\">print_r</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$node</span><span class=\"token punctuation\">,</span> <span class=\"token constant boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token operator\">.</span><span class=\"token string single-quoted-string\">'&lt;/pre>'</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$node</span><span class=\"token operator\">-></span><span class=\"token property\">field_last_check_result</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'und'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'value'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">20</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">node_save</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$node</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span></code></pre></div>\n<p><a href=\"http://www.group42.ca/creating_and_updating_nodes_programmatically_in_drupal_7\">http://www.group42.ca/creating_and_updating_nodes_programmatically_in_drupal_7</a></p>"}},"pageContext":{"id":"1f5a1fba-4fed-5b88-ac61-3ac8c571a0b9"}},"staticQueryHashes":[],"slicesMap":{}}