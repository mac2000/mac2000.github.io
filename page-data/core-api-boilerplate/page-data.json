{"componentChunkName":"component---src-templates-note-js","path":"/core-api-boilerplate/","result":{"data":{"remark":{"fields":{"path":"core-api-boilerplate"},"meta":{"title":""},"headings":[{"value":"Dotnet Core API"}],"html":"<h1>Dotnet Core API</h1>\n<p><a href=\"https://github.com/ASP-NET-MVC-Boilerplate/Templates\">https://github.com/ASP-NET-MVC-Boilerplate/Templates</a></p>\n<p>Packages:</p>\n<ul>\n<li>Microsoft.AspNetCore.Rewrite - Rewrite from home page to swagger</li>\n<li>Microsoft.AspNetCore.Mvc - api itself</li>\n<li>Microsoft.AspNetCore.Cors - cors</li>\n<li>Swashbuckle.AspNetCore - swagger</li>\n</ul>\n<h2>MVC</h2>\n<div class=\"gatsby-highlight\" data-language=\"csharp\"><pre class=\"language-csharp\"><code class=\"language-csharp\">services<span class=\"token punctuation\">.</span><span class=\"token function\">AddCors</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\napp<span class=\"token punctuation\">.</span><span class=\"token function\">UseMvcWithDefaultRoute</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2>Cors</h2>\n<div class=\"gatsby-highlight\" data-language=\"csharp\"><pre class=\"language-csharp\"><code class=\"language-csharp\">services<span class=\"token punctuation\">.</span><span class=\"token function\">AddCors</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\napp<span class=\"token punctuation\">.</span><span class=\"token function\">UseCors</span><span class=\"token punctuation\">(</span>builder <span class=\"token operator\">=></span> builder<span class=\"token punctuation\">.</span><span class=\"token function\">AllowCredentials</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">AllowAnyHeader</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">AllowAnyMethod</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">AllowAnyOrigin</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">Build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2>Rewriter</h2>\n<div class=\"gatsby-highlight\" data-language=\"csharp\"><pre class=\"language-csharp\"><code class=\"language-csharp\">app<span class=\"token punctuation\">.</span><span class=\"token function\">UseRewriter</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">RewriteOptions</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">AddRedirect</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"^$\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"swagger\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span><span class=\"token punctuation\">)</span>HttpStatusCode<span class=\"token punctuation\">.</span>MovedPermanently<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>redirect from homepage to swagger</p>\n<h2>Swagger</h2>\n<div class=\"gatsby-highlight\" data-language=\"csharp\"><pre class=\"language-csharp\"><code class=\"language-csharp\">services<span class=\"token punctuation\">.</span><span class=\"token function\">AddSwaggerGen</span><span class=\"token punctuation\">(</span>c <span class=\"token operator\">=></span>\n<span class=\"token punctuation\">{</span>\n  c<span class=\"token punctuation\">.</span><span class=\"token function\">SwaggerDoc</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"v1\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">Info</span> <span class=\"token punctuation\">{</span> Title <span class=\"token operator\">=</span> <span class=\"token string\">\"Firebase Token Provider\"</span><span class=\"token punctuation\">,</span> Version <span class=\"token operator\">=</span> <span class=\"token string\">\"v1\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\napp<span class=\"token punctuation\">.</span><span class=\"token function\">UseSwagger</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\napp<span class=\"token punctuation\">.</span><span class=\"token function\">UseSwaggerUI</span><span class=\"token punctuation\">(</span>c <span class=\"token operator\">=></span>\n<span class=\"token punctuation\">{</span>\n  c<span class=\"token punctuation\">.</span><span class=\"token function\">SwaggerEndpoint</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/swagger/v1/swagger.json\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"My API V1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  c<span class=\"token punctuation\">.</span><span class=\"token function\">ShowJsonEditor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ediro for POST json requests</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2>Static files</h2>\n<p>TODO: copy examples, do not forget about UseDefaultFiles</p>\n<h2>Validate all request models</h2>\n<p>Cool trick - automatic validation of all models in application</p>\n<div class=\"gatsby-highlight\" data-language=\"csharp\"><pre class=\"language-csharp\"><code class=\"language-csharp\"><span class=\"token keyword\">using</span> <span class=\"token namespace\">Microsoft<span class=\"token punctuation\">.</span>AspNetCore<span class=\"token punctuation\">.</span>Mvc</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">using</span> <span class=\"token namespace\">Microsoft<span class=\"token punctuation\">.</span>AspNetCore<span class=\"token punctuation\">.</span>Mvc<span class=\"token punctuation\">.</span>Filters</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">namespace</span> <span class=\"token namespace\">WebApplication1<span class=\"token punctuation\">.</span>Services</span>\n<span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ValidateModelAttribute</span> <span class=\"token punctuation\">:</span> <span class=\"token type-list\"><span class=\"token class-name\">ActionFilterAttribute</span></span>\n  <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">override</span> <span class=\"token return-type class-name\"><span class=\"token keyword\">void</span></span> <span class=\"token function\">OnActionExecuting</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ActionExecutingContext</span> context<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>context<span class=\"token punctuation\">.</span>ModelState<span class=\"token punctuation\">.</span>IsValid<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">{</span>\n        context<span class=\"token punctuation\">.</span>Result <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">BadRequestObjectResult</span><span class=\"token punctuation\">(</span>context<span class=\"token punctuation\">.</span>ModelState<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Then connect it:</p>\n<div class=\"gatsby-highlight\" data-language=\"csharp\"><pre class=\"language-csharp\"><code class=\"language-csharp\">services<span class=\"token punctuation\">.</span><span class=\"token function\">AddMvc</span><span class=\"token punctuation\">(</span>options <span class=\"token operator\">=></span> options<span class=\"token punctuation\">.</span>Filters<span class=\"token punctuation\">.</span><span class=\"token function\">Add</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">ValidateModelAttribute</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">AddJsonOptions</span><span class=\"token punctuation\">(</span>x <span class=\"token operator\">=></span>\n<span class=\"token punctuation\">{</span>\n  x<span class=\"token punctuation\">.</span>SerializerSettings<span class=\"token punctuation\">.</span>ContractResolver <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">DefaultContractResolver</span>\n  <span class=\"token punctuation\">{</span>\n    NamingStrategy <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">CamelCaseNamingStrategy</span>\n    <span class=\"token punctuation\">{</span>\n      ProcessDictionaryKeys <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Note: now, erros will also be in <code class=\"language-text\">camelCase</code></p>"}},"pageContext":{"id":"337cb4e5-e0f0-5ee6-8e0a-d83af0cbf022"}},"staticQueryHashes":[],"slicesMap":{}}