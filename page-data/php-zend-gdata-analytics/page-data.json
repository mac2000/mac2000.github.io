{"componentChunkName":"component---src-templates-note-js","path":"/php-zend-gdata-analytics/","result":{"data":{"remark":{"fields":{"path":"php-zend-gdata-analytics"},"meta":{"title":""},"headings":[{"value":"php zend gdata analytics"}],"html":"<h1>php zend gdata analytics</h1>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n\n<span class=\"token variable\">$email</span> <span class=\"token operator\">=</span> <span class=\"token string double-quoted-string\">\"LOGIN@gmail.com\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$pass</span> <span class=\"token operator\">=</span> <span class=\"token string double-quoted-string\">\"PASSWORD\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$siteId</span> <span class=\"token operator\">=</span> <span class=\"token string double-quoted-string\">\"ga:2266524\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">require_once</span><span class=\"token punctuation\">(</span><span class=\"token string double-quoted-string\">\"Zend/Loader.php\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token class-name static-context\">Zend_Loader</span><span class=\"token operator\">::</span><span class=\"token function\">loadClass</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'Zend_Gdata'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token class-name static-context\">Zend_Loader</span><span class=\"token operator\">::</span><span class=\"token function\">loadClass</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'Zend_Gdata_Query'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token class-name static-context\">Zend_Loader</span><span class=\"token operator\">::</span><span class=\"token function\">loadClass</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'Zend_Gdata_ClientLogin'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token variable\">$client</span> <span class=\"token operator\">=</span> <span class=\"token class-name static-context\">Zend_Gdata_ClientLogin</span><span class=\"token operator\">::</span><span class=\"token function\">getHttpClient</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$email</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$pass</span><span class=\"token punctuation\">,</span> <span class=\"token string double-quoted-string\">\"analytics\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$gdClient</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Zend_Gdata</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$client</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token variable\">$reportURL</span> <span class=\"token operator\">=</span> <span class=\"token string double-quoted-string\">\"https://www.google.com/analytics/feeds/data\"</span> <span class=\"token operator\">.</span>\n        <span class=\"token string double-quoted-string\">\"?start-date=2010-10-01\"</span> <span class=\"token operator\">.</span>\n        <span class=\"token string double-quoted-string\">\"&amp;end-date=2010-11-01\"</span> <span class=\"token operator\">.</span>\n        <span class=\"token string double-quoted-string\">\"&amp;dimensions=ga:browser,ga:browserVersion\"</span> <span class=\"token operator\">.</span>\n        <span class=\"token string double-quoted-string\">\"&amp;metrics=ga:pageviews\"</span> <span class=\"token operator\">.</span>\n        <span class=\"token string double-quoted-string\">\"&amp;sort=-ga:pageviews\"</span> <span class=\"token operator\">.</span>\n        <span class=\"token comment\">//\"&amp;max-results=10\" .</span>\n        <span class=\"token string double-quoted-string\">\"&amp;filters=ga:browser%3D%3DFirefox,ga:browser%3D%3DOpera,ga:browser%3D%3DChrome,ga:browser%3D%3DInternet%20Explorer\"</span> <span class=\"token operator\">.</span>\n        <span class=\"token string double-quoted-string\">\"&amp;ids=\"</span> <span class=\"token operator\">.</span> <span class=\"token variable\">$siteId</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token variable\">$results</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$gdClient</span><span class=\"token operator\">-></span><span class=\"token function\">getFeed</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$reportURL</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token variable\">$data</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">foreach</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$results</span> <span class=\"token keyword\">as</span> <span class=\"token variable\">$result</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token variable\">$data</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span>\n            <span class=\"token string single-quoted-string\">'browser'</span> <span class=\"token operator\">=></span> <span class=\"token variable\">$result</span><span class=\"token operator\">-></span><span class=\"token property\">extensionElements</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token operator\">-></span><span class=\"token property\">extensionAttributes</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'value'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'value'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string single-quoted-string\">'browserVersion'</span> <span class=\"token operator\">=></span> <span class=\"token variable\">$result</span><span class=\"token operator\">-></span><span class=\"token property\">extensionElements</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token operator\">-></span><span class=\"token property\">extensionAttributes</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'value'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'value'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string single-quoted-string\">'pageViews'</span> <span class=\"token operator\">=></span> <span class=\"token variable\">$result</span><span class=\"token operator\">-></span><span class=\"token property\">extensionElements</span><span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token operator\">-></span><span class=\"token property\">extensionAttributes</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'value'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'value'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token function\">var_dump</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$data</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Zend_Exception</span> <span class=\"token variable\">$e</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">echo</span> <span class=\"token string double-quoted-string\">\"&lt;h3>Caught exception:&lt;/h3>\"</span> <span class=\"token operator\">.</span> <span class=\"token function\">get_class</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$e</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">.</span> <span class=\"token string double-quoted-string\">\"&lt;br />\"</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">echo</span> <span class=\"token string double-quoted-string\">\"&lt;h3>Message:&lt;/h3>\"</span> <span class=\"token operator\">.</span> <span class=\"token variable\">$e</span><span class=\"token operator\">-></span><span class=\"token function\">getMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">.</span> <span class=\"token string double-quoted-string\">\"&lt;br />\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></span></code></pre></div>\n<p>В примере выдирается инфа по использованию браузеров, для работы необходима либа Zend Gdata</p>"}},"pageContext":{"id":"3eb137d4-4e73-5fe7-95f3-2248dd2b3b7e"}},"staticQueryHashes":[],"slicesMap":{}}